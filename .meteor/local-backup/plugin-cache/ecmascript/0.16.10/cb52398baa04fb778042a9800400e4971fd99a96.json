{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/gckelechi/SmartKid/packages/blaze/builtins.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"packages/blaze/builtins.js","filename":"/home/gckelechi/SmartKid/packages/blaze/builtins.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/gckelechi/SmartKid","root":"/home/gckelechi/SmartKid","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/home/gckelechi/SmartKid/packages/blaze/builtins.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/blaze/builtins.js"}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    let has;\n    module.link(\"lodash.has\", {\n      default(v) {\n        has = v;\n      }\n    }, 0);\n    let isObject;\n    module.link(\"lodash.isobject\", {\n      default(v) {\n        isObject = v;\n      }\n    }, 1);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    Blaze._calculateCondition = function (cond) {\n      if (HTML.isArray(cond) && cond.length === 0) return false;\n      return !!cond;\n    };\n\n    /**\n     * @summary Constructs a View that renders content with a data context.\n     * @locus Client\n     * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a\n     *   function is provided, it will be reactively re-run.\n     * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n     */\n    Blaze.With = function (data, contentFunc) {\n      const view = Blaze.View('with', contentFunc);\n      view.dataVar = null;\n      view.onViewCreated(() => {\n        view.dataVar = _createBinding(view, data, 'setData');\n      });\n      return view;\n    };\n\n    /**\n     * @summary Shallow compare of two bindings.\n     * @param {Binding} x\n     * @param {Binding} y\n     */\n    function _isEqualBinding(x, y) {\n      if (typeof x === 'object' && typeof y === 'object') {\n        return x.error === y.error && ReactiveVar._isEqual(x.value, y.value);\n      } else {\n        return ReactiveVar._isEqual(x, y);\n      }\n    }\n\n    /**\n     * @template T\n     * @param {T} x\n     * @returns {T}\n     */\n    function _identity(x) {\n      return x;\n    }\n\n    /**\n     * Attaches a single binding to the instantiated view.\n     * @template T, U\n     * @param {ReactiveVar<U>} reactiveVar Target view.\n     * @param {Promise<T> | T} value Bound value.\n     * @param {function(T): U} [mapper] Maps the computed value before store.\n     */\n    function _setBindingValue(reactiveVar, value) {\n      let mapper = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _identity;\n      if (value && typeof value.then === 'function') {\n        value.then(value => reactiveVar.set({\n          value: mapper(value)\n        }), error => reactiveVar.set({\n          error\n        }));\n      } else {\n        reactiveVar.set({\n          value: mapper(value)\n        });\n      }\n    }\n\n    /**\n     * @template T, U\n     * @param {Blaze.View} view Target view.\n     * @param {Promise<T> | T | function(): (Promise<T> | T)} binding Binding value or its getter.\n     * @param {string} [displayName] Autorun's display name.\n     * @param {function(T): U} [mapper] Maps the computed value before store.\n     * @returns {ReactiveVar<U>}\n     */\n    function _createBinding(view, binding, displayName, mapper) {\n      const reactiveVar = new ReactiveVar(undefined, _isEqualBinding);\n      if (typeof binding === 'function') {\n        view.autorun(() => _setBindingValue(reactiveVar, binding(), mapper), view.parentView, displayName);\n      } else {\n        _setBindingValue(reactiveVar, binding, mapper);\n      }\n      return reactiveVar;\n    }\n\n    /**\n     * Attaches bindings to the instantiated view.\n     * @param {Object} bindings A dictionary of bindings, each binding name\n     * corresponds to a value or a function that will be reactively re-run.\n     * @param {Blaze.View} view The target.\n     */\n    Blaze._attachBindingsToView = function (bindings, view) {\n      view.onViewCreated(function () {\n        Object.entries(bindings).forEach(function (_ref) {\n          let [name, binding] = _ref;\n          view._scopeBindings[name] = _createBinding(view, binding);\n        });\n      });\n    };\n\n    /**\n     * @summary Constructs a View setting the local lexical scope in the block.\n     * @param {Function} bindings Dictionary mapping names of bindings to\n     * values or computations to reactively re-run.\n     * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n     */\n    Blaze.Let = function (bindings, contentFunc) {\n      var view = Blaze.View('let', contentFunc);\n      Blaze._attachBindingsToView(bindings, view);\n      return view;\n    };\n\n    /**\n     * @summary Constructs a View that renders content conditionally.\n     * @locus Client\n     * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines\n     *   whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n     * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n     * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n     *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n     */\n    Blaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n      const view = Blaze.View(_not ? 'unless' : 'if', function () {\n        // Render only if the binding has a value, i.e., it's either synchronous or\n        // has resolved. Rejected `Promise`s are NOT rendered.\n        const condition = view.__conditionVar.get();\n        if (condition && 'value' in condition) {\n          return condition.value ? contentFunc() : elseFunc ? elseFunc() : null;\n        }\n        return null;\n      });\n      view.__conditionVar = null;\n      view.onViewCreated(() => {\n        view.__conditionVar = _createBinding(view, conditionFunc, 'condition',\n        // Store only the actual condition.\n        value => !Blaze._calculateCondition(value) !== !_not);\n      });\n      return view;\n    };\n\n    /**\n     * @summary An inverted [`Blaze.If`](#Blaze-If).\n     * @locus Client\n     * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown,\n     *   otherwise `elseFunc` is shown.  An empty array is considered falsy.\n     * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n     * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n     *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n     */\n    Blaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n      return Blaze.If(conditionFunc, contentFunc, elseFunc, true /*_not*/);\n    };\n\n    /**\n     * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n     * @locus Client\n     * @param {Function} argFunc A function to reactively re-run. The function can\n     * return one of two options:\n     *\n     * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n     *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n     *   Each body you will be able to get the current item from the sequence using\n     *   the name specified in the '_variable' field.\n     *\n     * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n     *   object. Inside the Each body, the current item will be set as the data\n     *   context.\n     * @param {Function} contentFunc A Function that returns  [*renderable\n     * content*](#Renderable-Content).\n     * @param {Function} [elseFunc] A Function that returns [*renderable\n     * content*](#Renderable-Content) to display in the case when there are no items\n     * in the sequence.\n     */\n    Blaze.Each = function (argFunc, contentFunc, elseFunc) {\n      const eachView = Blaze.View('each', function () {\n        const subviews = this.initialSubviews;\n        this.initialSubviews = null;\n        if (this._isCreatedForExpansion) {\n          this.expandedValueDep = new Tracker.Dependency();\n          this.expandedValueDep.depend();\n        }\n        return subviews;\n      });\n      eachView.initialSubviews = [];\n      eachView.numItems = 0;\n      eachView.inElseMode = false;\n      eachView.stopHandle = null;\n      eachView.contentFunc = contentFunc;\n      eachView.elseFunc = elseFunc;\n      eachView.argVar = undefined;\n      eachView.variableName = null;\n\n      // update the @index value in the scope of all subviews in the range\n      const updateIndices = function (from, to) {\n        if (to === undefined) {\n          to = eachView.numItems - 1;\n        }\n        for (let i = from; i <= to; i++) {\n          const view = eachView._domrange.members[i].view;\n          view._scopeBindings['@index'].set({\n            value: i\n          });\n        }\n      };\n      eachView.onViewCreated(function () {\n        // We evaluate `argFunc` in `Tracker.autorun` to ensure `Blaze.currentView`\n        // is always set when it runs.\n        eachView.argVar = _createBinding(eachView,\n        // Unwrap a sequence reactively (`{{#each x in xs}}`).\n        () => {\n          let maybeSequence = argFunc();\n          if (isObject(maybeSequence) && has(maybeSequence, '_sequence')) {\n            eachView.variableName = maybeSequence._variable || null;\n            maybeSequence = maybeSequence._sequence;\n          }\n          return maybeSequence;\n        }, 'collection');\n        eachView.stopHandle = ObserveSequence.observe(function () {\n          var _eachView$argVar$get;\n          return (_eachView$argVar$get = eachView.argVar.get()) === null || _eachView$argVar$get === void 0 ? void 0 : _eachView$argVar$get.value;\n        }, {\n          addedAt: function (id, item, index) {\n            Tracker.nonreactive(function () {\n              let newItemView;\n              if (eachView.variableName) {\n                // new-style #each (as in {{#each item in items}})\n                // doesn't create a new data context\n                newItemView = Blaze.View('item', eachView.contentFunc);\n              } else {\n                newItemView = Blaze.With(item, eachView.contentFunc);\n              }\n              eachView.numItems++;\n              const bindings = {};\n              bindings['@index'] = index;\n              if (eachView.variableName) {\n                bindings[eachView.variableName] = item;\n              }\n              Blaze._attachBindingsToView(bindings, newItemView);\n              if (eachView.expandedValueDep) {\n                eachView.expandedValueDep.changed();\n              } else if (eachView._domrange) {\n                if (eachView.inElseMode) {\n                  eachView._domrange.removeMember(0);\n                  eachView.inElseMode = false;\n                }\n                const range = Blaze._materializeView(newItemView, eachView);\n                eachView._domrange.addMember(range, index);\n                updateIndices(index);\n              } else {\n                eachView.initialSubviews.splice(index, 0, newItemView);\n              }\n            });\n          },\n          removedAt: function (id, item, index) {\n            Tracker.nonreactive(function () {\n              eachView.numItems--;\n              if (eachView.expandedValueDep) {\n                eachView.expandedValueDep.changed();\n              } else if (eachView._domrange) {\n                eachView._domrange.removeMember(index);\n                updateIndices(index);\n                if (eachView.elseFunc && eachView.numItems === 0) {\n                  eachView.inElseMode = true;\n                  eachView._domrange.addMember(Blaze._materializeView(Blaze.View('each_else', eachView.elseFunc), eachView), 0);\n                }\n              } else {\n                eachView.initialSubviews.splice(index, 1);\n              }\n            });\n          },\n          changedAt: function (id, newItem, oldItem, index) {\n            Tracker.nonreactive(function () {\n              if (eachView.expandedValueDep) {\n                eachView.expandedValueDep.changed();\n              } else {\n                let itemView;\n                if (eachView._domrange) {\n                  itemView = eachView._domrange.getMember(index).view;\n                } else {\n                  itemView = eachView.initialSubviews[index];\n                }\n                if (eachView.variableName) {\n                  itemView._scopeBindings[eachView.variableName].set({\n                    value: newItem\n                  });\n                } else {\n                  itemView.dataVar.set({\n                    value: newItem\n                  });\n                }\n              }\n            });\n          },\n          movedTo: function (id, item, fromIndex, toIndex) {\n            Tracker.nonreactive(function () {\n              if (eachView.expandedValueDep) {\n                eachView.expandedValueDep.changed();\n              } else if (eachView._domrange) {\n                eachView._domrange.moveMember(fromIndex, toIndex);\n                updateIndices(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n              } else {\n                const subviews = eachView.initialSubviews;\n                const itemView = subviews[fromIndex];\n                subviews.splice(fromIndex, 1);\n                subviews.splice(toIndex, 0, itemView);\n              }\n            });\n          }\n        });\n        if (eachView.elseFunc && eachView.numItems === 0) {\n          eachView.inElseMode = true;\n          eachView.initialSubviews[0] = Blaze.View('each_else', eachView.elseFunc);\n        }\n      });\n      eachView.onViewDestroyed(function () {\n        if (eachView.stopHandle) eachView.stopHandle.stop();\n      });\n      return eachView;\n    };\n\n    /**\n     * Create a new `Blaze.Let` view that unwraps the given value.\n     * @param {unknown} value\n     * @returns {Blaze.View}\n     */\n    Blaze._Await = function (value) {\n      return Blaze.Let({\n        value\n      }, Blaze._AwaitContent);\n    };\n    Blaze._AwaitContent = function () {\n      var _Blaze$currentView$_s;\n      return (_Blaze$currentView$_s = Blaze.currentView._scopeBindings.value.get()) === null || _Blaze$currentView$_s === void 0 ? void 0 : _Blaze$currentView$_s.value;\n    };\n    Blaze._TemplateWith = function (arg, contentFunc) {\n      let w;\n      let argFunc = arg;\n      if (typeof arg !== 'function') {\n        argFunc = function () {\n          return arg;\n        };\n      }\n\n      // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n      // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n      // parent Views in the current template.  However, when there's an argument\n      // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n      // in the original scope.  There's no good order to nest\n      // Blaze._InOuterTemplateScope and Blaze._TemplateWith to achieve this,\n      // so we wrap argFunc to run it in the \"original parentView\" of the\n      // Blaze._InOuterTemplateScope.\n      //\n      // To make this better, reconsider _InOuterTemplateScope as a primitive.\n      // Longer term, evaluate expressions in the proper lexical scope.\n      const wrappedArgFunc = function () {\n        let viewToEvaluateArg = null;\n        if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n          viewToEvaluateArg = w.parentView.originalParentView;\n        }\n        if (viewToEvaluateArg) {\n          return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n        } else {\n          return argFunc();\n        }\n      };\n      const wrappedContentFunc = function () {\n        let content = contentFunc.call(this);\n\n        // Since we are generating the Blaze._TemplateWith view for the\n        // user, set the flag on the child view.  If `content` is a template,\n        // construct the View so that we can set the flag.\n        if (content instanceof Blaze.Template) {\n          content = content.constructView();\n        }\n        if (content instanceof Blaze.View) {\n          content._hasGeneratedParent = true;\n        }\n        return content;\n      };\n      w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n      w.__isTemplateWith = true;\n      return w;\n    };\n    Blaze._InOuterTemplateScope = function (templateView, contentFunc) {\n      const view = Blaze.View('InOuterTemplateScope', contentFunc);\n      let parentView = templateView.parentView;\n\n      // Hack so that if you call `{{> foo bar}}` and it expands into\n      // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n      // that inserts `{{> Template.contentBlock}}`, the data context for\n      // `Template.contentBlock` is not `bar` but the one enclosing that.\n      if (parentView.__isTemplateWith) parentView = parentView.parentView;\n      view.onViewCreated(function () {\n        this.originalParentView = this.parentView;\n        this.parentView = parentView;\n        this.__childDoesntStartNewLexicalScope = true;\n      });\n      return view;\n    };\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["has","module","link","default","v","isObject","__reifyWaitForDeps__","Blaze","_calculateCondition","cond","HTML","isArray","length","With","data","contentFunc","view","View","dataVar","onViewCreated","_createBinding","_isEqualBinding","x","y","error","ReactiveVar","_isEqual","value","_identity","_setBindingValue","reactiveVar","mapper","arguments","undefined","then","set","binding","displayName","autorun","parentView","_attachBindingsToView","bindings","Object","entries","forEach","_ref","name","_scopeBindings","Let","If","conditionFunc","elseFunc","_not","condition","__conditionVar","get","Unless","Each","argFunc","eachView","subviews","initialSubviews","_isCreatedForExpansion","expandedValueDep","Tracker","Dependency","depend","numItems","inElseMode","stopHandle","argVar","variableName","updateIndices","from","to","i","_domrange","members","maybeSequence","_variable","_sequence","ObserveSequence","observe","_eachView$argVar$get","addedAt","id","item","index","nonreactive","newItemView","changed","removeMember","range","_materializeView","addMember","splice","removedAt","changedAt","newItem","oldItem","itemView","getMember","movedTo","fromIndex","toIndex","moveMember","Math","min","max","onViewDestroyed","stop","_Await","_AwaitContent","_Blaze$currentView$_s","currentView","_TemplateWith","arg","w","wrappedArgFunc","viewToEvaluateArg","originalParentView","_withCurrentView","wrappedContentFunc","content","call","Template","constructView","_hasGeneratedParent","__isTemplateWith","_InOuterTemplateScope","templateView","__childDoesntStartNewLexicalScope","__reify_async_result__","_reifyError","self","async"],"sources":["packages/blaze/builtins.js"],"sourcesContent":["import has from 'lodash.has';\nimport isObject from 'lodash.isobject';\n\nBlaze._calculateCondition = function (cond) {\n  if (HTML.isArray(cond) && cond.length === 0) return false;\n  return !!cond;\n};\n\n/**\n * @summary Constructs a View that renders content with a data context.\n * @locus Client\n * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a\n *   function is provided, it will be reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.With = function (data, contentFunc) {\n  const view = Blaze.View('with', contentFunc);\n\n  view.dataVar = null;\n  view.onViewCreated(() => {\n    view.dataVar = _createBinding(view, data, 'setData');\n  });\n\n  return view;\n};\n\n\n/**\n * @summary Shallow compare of two bindings.\n * @param {Binding} x\n * @param {Binding} y\n */\nfunction _isEqualBinding(x, y) {\n  if (typeof x === 'object' && typeof y === 'object') {\n    return x.error === y.error && ReactiveVar._isEqual(x.value, y.value);\n  }\n  else {\n    return ReactiveVar._isEqual(x, y);\n  }\n}\n\n/**\n * @template T\n * @param {T} x\n * @returns {T}\n */\nfunction _identity(x) {\n  return x;\n}\n\n/**\n * Attaches a single binding to the instantiated view.\n * @template T, U\n * @param {ReactiveVar<U>} reactiveVar Target view.\n * @param {Promise<T> | T} value Bound value.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n */\nfunction _setBindingValue(reactiveVar, value, mapper = _identity) {\n  if (value && typeof value.then === 'function') {\n    value.then(\n      value => reactiveVar.set({ value: mapper(value) }),\n      error => reactiveVar.set({ error }),\n    );\n  } else {\n    reactiveVar.set({ value: mapper(value) });\n  }\n}\n\n/**\n * @template T, U\n * @param {Blaze.View} view Target view.\n * @param {Promise<T> | T | function(): (Promise<T> | T)} binding Binding value or its getter.\n * @param {string} [displayName] Autorun's display name.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n * @returns {ReactiveVar<U>}\n */\nfunction _createBinding(view, binding, displayName, mapper) {\n  const reactiveVar = new ReactiveVar(undefined, _isEqualBinding);\n  if (typeof binding === 'function') {\n    view.autorun(\n      () => _setBindingValue(reactiveVar, binding(), mapper),\n      view.parentView,\n      displayName,\n    );\n  } else {\n    _setBindingValue(reactiveVar, binding, mapper);\n  }\n\n  return reactiveVar;\n}\n\n/**\n * Attaches bindings to the instantiated view.\n * @param {Object} bindings A dictionary of bindings, each binding name\n * corresponds to a value or a function that will be reactively re-run.\n * @param {Blaze.View} view The target.\n */\nBlaze._attachBindingsToView = function (bindings, view) {\n  view.onViewCreated(function () {\n    Object.entries(bindings).forEach(function ([name, binding]) {\n      view._scopeBindings[name] = _createBinding(view, binding);\n    });\n  });\n};\n\n/**\n * @summary Constructs a View setting the local lexical scope in the block.\n * @param {Function} bindings Dictionary mapping names of bindings to\n * values or computations to reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.Let = function (bindings, contentFunc) {\n  var view = Blaze.View('let', contentFunc);\n  Blaze._attachBindingsToView(bindings, view);\n\n  return view;\n};\n\n/**\n * @summary Constructs a View that renders content conditionally.\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines\n *   whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n  const view = Blaze.View(_not ? 'unless' : 'if', function () {\n    // Render only if the binding has a value, i.e., it's either synchronous or\n    // has resolved. Rejected `Promise`s are NOT rendered.\n    const condition = view.__conditionVar.get();\n    if (condition && 'value' in condition) {\n      return condition.value ? contentFunc() : (elseFunc ? elseFunc() : null);\n    }\n\n    return null;\n  });\n\n  view.__conditionVar = null;\n  view.onViewCreated(() => {\n    view.__conditionVar = _createBinding(\n      view,\n      conditionFunc,\n      'condition',\n      // Store only the actual condition.\n      value => !Blaze._calculateCondition(value) !== !_not,\n    );\n  });\n\n  return view;\n};\n\n/**\n * @summary An inverted [`Blaze.If`](#Blaze-If).\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown,\n *   otherwise `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n  return Blaze.If(conditionFunc, contentFunc, elseFunc, true /*_not*/);\n};\n\n/**\n * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n * @locus Client\n * @param {Function} argFunc A function to reactively re-run. The function can\n * return one of two options:\n *\n * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n *   Each body you will be able to get the current item from the sequence using\n *   the name specified in the '_variable' field.\n *\n * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n *   object. Inside the Each body, the current item will be set as the data\n *   context.\n * @param {Function} contentFunc A Function that returns  [*renderable\n * content*](#Renderable-Content).\n * @param {Function} [elseFunc] A Function that returns [*renderable\n * content*](#Renderable-Content) to display in the case when there are no items\n * in the sequence.\n */\nBlaze.Each = function (argFunc, contentFunc, elseFunc) {\n  const eachView = Blaze.View('each', function () {\n    const subviews = this.initialSubviews;\n    this.initialSubviews = null;\n    if (this._isCreatedForExpansion) {\n      this.expandedValueDep = new Tracker.Dependency;\n      this.expandedValueDep.depend();\n    }\n    return subviews;\n  });\n  eachView.initialSubviews = [];\n  eachView.numItems = 0;\n  eachView.inElseMode = false;\n  eachView.stopHandle = null;\n  eachView.contentFunc = contentFunc;\n  eachView.elseFunc = elseFunc;\n  eachView.argVar = undefined;\n  eachView.variableName = null;\n\n  // update the @index value in the scope of all subviews in the range\n  const updateIndices = function (from, to) {\n    if (to === undefined) {\n      to = eachView.numItems - 1;\n    }\n\n    for (let i = from; i <= to; i++) {\n      const view = eachView._domrange.members[i].view;\n      view._scopeBindings['@index'].set({ value: i });\n    }\n  };\n\n  eachView.onViewCreated(function () {\n    // We evaluate `argFunc` in `Tracker.autorun` to ensure `Blaze.currentView`\n    // is always set when it runs.\n    eachView.argVar = _createBinding(\n      eachView,\n      // Unwrap a sequence reactively (`{{#each x in xs}}`).\n      () => {\n        let maybeSequence = argFunc();\n        if (isObject(maybeSequence) && has(maybeSequence, '_sequence')) {\n          eachView.variableName = maybeSequence._variable || null;\n          maybeSequence = maybeSequence._sequence;\n        }\n        return maybeSequence;\n      },\n      'collection',\n    );\n\n    eachView.stopHandle = ObserveSequence.observe(function () {\n      return eachView.argVar.get()?.value;\n    }, {\n      addedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          let newItemView;\n          if (eachView.variableName) {\n            // new-style #each (as in {{#each item in items}})\n            // doesn't create a new data context\n            newItemView = Blaze.View('item', eachView.contentFunc);\n          } else {\n            newItemView = Blaze.With(item, eachView.contentFunc);\n          }\n\n          eachView.numItems++;\n\n          const bindings = {};\n          bindings['@index'] = index;\n          if (eachView.variableName) {\n            bindings[eachView.variableName] = item;\n          }\n          Blaze._attachBindingsToView(bindings, newItemView);\n\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            if (eachView.inElseMode) {\n              eachView._domrange.removeMember(0);\n              eachView.inElseMode = false;\n            }\n\n            const range = Blaze._materializeView(newItemView, eachView);\n            eachView._domrange.addMember(range, index);\n            updateIndices(index);\n          } else {\n            eachView.initialSubviews.splice(index, 0, newItemView);\n          }\n        });\n      },\n      removedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          eachView.numItems--;\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.removeMember(index);\n            updateIndices(index);\n            if (eachView.elseFunc && eachView.numItems === 0) {\n              eachView.inElseMode = true;\n              eachView._domrange.addMember(\n                Blaze._materializeView(\n                  Blaze.View('each_else',eachView.elseFunc),\n                  eachView), 0);\n            }\n          } else {\n            eachView.initialSubviews.splice(index, 1);\n          }\n        });\n      },\n      changedAt: function (id, newItem, oldItem, index) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else {\n            let itemView;\n            if (eachView._domrange) {\n              itemView = eachView._domrange.getMember(index).view;\n            } else {\n              itemView = eachView.initialSubviews[index];\n            }\n            if (eachView.variableName) {\n              itemView._scopeBindings[eachView.variableName].set({ value: newItem });\n            } else {\n              itemView.dataVar.set({ value: newItem });\n            }\n          }\n        });\n      },\n      movedTo: function (id, item, fromIndex, toIndex) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.moveMember(fromIndex, toIndex);\n            updateIndices(\n              Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n          } else {\n            const subviews = eachView.initialSubviews;\n            const itemView = subviews[fromIndex];\n            subviews.splice(fromIndex, 1);\n            subviews.splice(toIndex, 0, itemView);\n          }\n        });\n      }\n    });\n\n    if (eachView.elseFunc && eachView.numItems === 0) {\n      eachView.inElseMode = true;\n      eachView.initialSubviews[0] =\n        Blaze.View('each_else', eachView.elseFunc);\n    }\n  });\n\n  eachView.onViewDestroyed(function () {\n    if (eachView.stopHandle)\n      eachView.stopHandle.stop();\n  });\n\n  return eachView;\n};\n\n/**\n * Create a new `Blaze.Let` view that unwraps the given value.\n * @param {unknown} value\n * @returns {Blaze.View}\n */\nBlaze._Await = function (value) {\n  return Blaze.Let({ value }, Blaze._AwaitContent);\n};\n\nBlaze._AwaitContent = function () {\n  return Blaze.currentView._scopeBindings.value.get()?.value;\n};\n\nBlaze._TemplateWith = function (arg, contentFunc) {\n  let w;\n\n  let argFunc = arg;\n  if (typeof arg !== 'function') {\n    argFunc = function () {\n      return arg;\n    };\n  }\n\n  // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n  // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n  // parent Views in the current template.  However, when there's an argument\n  // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n  // in the original scope.  There's no good order to nest\n  // Blaze._InOuterTemplateScope and Blaze._TemplateWith to achieve this,\n  // so we wrap argFunc to run it in the \"original parentView\" of the\n  // Blaze._InOuterTemplateScope.\n  //\n  // To make this better, reconsider _InOuterTemplateScope as a primitive.\n  // Longer term, evaluate expressions in the proper lexical scope.\n  const wrappedArgFunc = function () {\n    let viewToEvaluateArg = null;\n    if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n      viewToEvaluateArg = w.parentView.originalParentView;\n    }\n    if (viewToEvaluateArg) {\n      return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n    } else {\n      return argFunc();\n    }\n  };\n\n  const wrappedContentFunc = function () {\n    let content = contentFunc.call(this);\n\n    // Since we are generating the Blaze._TemplateWith view for the\n    // user, set the flag on the child view.  If `content` is a template,\n    // construct the View so that we can set the flag.\n    if (content instanceof Blaze.Template) {\n      content = content.constructView();\n    }\n    if (content instanceof Blaze.View) {\n      content._hasGeneratedParent = true;\n    }\n\n    return content;\n  };\n\n  w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n  w.__isTemplateWith = true;\n  return w;\n};\n\nBlaze._InOuterTemplateScope = function (templateView, contentFunc) {\n  const view = Blaze.View('InOuterTemplateScope', contentFunc);\n  let parentView = templateView.parentView;\n\n  // Hack so that if you call `{{> foo bar}}` and it expands into\n  // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n  // that inserts `{{> Template.contentBlock}}`, the data context for\n  // `Template.contentBlock` is not `bar` but the one enclosing that.\n  if (parentView.__isTemplateWith)\n    parentView = parentView.parentView;\n\n  view.onViewCreated(function () {\n    this.originalParentView = this.parentView;\n    this.parentView = parentView;\n    this.__childDoesntStartNewLexicalScope = true;\n  });\n  return view;\n};\n\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"cb52398baa04fb778042a9800400e4971fd99a96"}
