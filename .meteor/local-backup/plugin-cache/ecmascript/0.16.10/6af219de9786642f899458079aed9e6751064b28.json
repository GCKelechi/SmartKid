{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/gckelechi/SmartKid/packages/htmljs/visitors.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","topLevelAwait","objectRestSpread","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"packages/htmljs/visitors.js","filename":"/home/gckelechi/SmartKid/packages/htmljs/visitors.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/gckelechi/SmartKid","root":"/home/gckelechi/SmartKid","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true,"topLevelAwait":true},"externalDependencies":[]},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.17.2","helpers":true,"useESModules":false,"corejs":false},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true},"externalDependencies":[]},{"key":"transform-react-jsx","visitor":{"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXFragment":{"exit":[null]},"JSXElement":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false},"externalDependencies":[]},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-nullish-coalescing-operator","visitor":{"LogicalExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-chaining","visitor":{"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-optional-catch-binding","visitor":{"CatchClause":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-class-properties","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-async-generator-functions","visitor":{"Program":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"proposal-logical-assignment-operators","visitor":{"AssignmentExpression":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{},"externalDependencies":[]},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{},"externalDependencies":[]}],"presets":[],"generatorOpts":{"filename":"/home/gckelechi/SmartKid/packages/htmljs/visitors.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/htmljs/visitors.js"}},"code":"!module.wrapAsync(async function (module, __reifyWaitForDeps__, __reify_async_result__) {\n  \"use strict\";\n  try {\n    module.export({\n      Visitor: () => Visitor,\n      TransformingVisitor: () => TransformingVisitor,\n      ToTextVisitor: () => ToTextVisitor,\n      ToHTMLVisitor: () => ToHTMLVisitor,\n      toHTML: () => toHTML,\n      TEXTMODE: () => TEXTMODE,\n      toText: () => toText\n    });\n    let Tag, CharRef, Comment, Raw, isArray, getTag, isConstructedObject, flattenAttributes, isVoidElement;\n    module.link(\"./html\", {\n      Tag(v) {\n        Tag = v;\n      },\n      CharRef(v) {\n        CharRef = v;\n      },\n      Comment(v) {\n        Comment = v;\n      },\n      Raw(v) {\n        Raw = v;\n      },\n      isArray(v) {\n        isArray = v;\n      },\n      getTag(v) {\n        getTag = v;\n      },\n      isConstructedObject(v) {\n        isConstructedObject = v;\n      },\n      flattenAttributes(v) {\n        flattenAttributes = v;\n      },\n      isVoidElement(v) {\n        isVoidElement = v;\n      }\n    }, 0);\n    if (__reifyWaitForDeps__()) (await __reifyWaitForDeps__())();\n    const isPromiseLike = x => !!x && typeof x.then === 'function';\n    var IDENTITY = function (x) {\n      return x;\n    };\n\n    // _assign is like _.extend or the upcoming Object.assign.\n    // Copy src's own, enumerable properties onto tgt and return\n    // tgt.\n    var _hasOwnProperty = Object.prototype.hasOwnProperty;\n    var _assign = function (tgt, src) {\n      for (var k in src) {\n        if (_hasOwnProperty.call(src, k)) tgt[k] = src[k];\n      }\n      return tgt;\n    };\n    const Visitor = function (props) {\n      _assign(this, props);\n    };\n    Visitor.def = function (options) {\n      _assign(this.prototype, options);\n    };\n    Visitor.extend = function (options) {\n      var curType = this;\n      var subType = function HTMLVisitorSubtype(/*arguments*/\n      ) {\n        Visitor.apply(this, arguments);\n      };\n      subType.prototype = new curType();\n      subType.extend = curType.extend;\n      subType.def = curType.def;\n      if (options) _assign(subType.prototype, options);\n      return subType;\n    };\n    Visitor.def({\n      visit: function (content /*, ...*/) {\n        if (content == null)\n          // null or undefined.\n          return this.visitNull.apply(this, arguments);\n        if (typeof content === 'object') {\n          if (content.htmljsType) {\n            switch (content.htmljsType) {\n              case Tag.htmljsType:\n                return this.visitTag.apply(this, arguments);\n              case CharRef.htmljsType:\n                return this.visitCharRef.apply(this, arguments);\n              case Comment.htmljsType:\n                return this.visitComment.apply(this, arguments);\n              case Raw.htmljsType:\n                return this.visitRaw.apply(this, arguments);\n              default:\n                throw new Error(\"Unknown htmljs type: \" + content.htmljsType);\n            }\n          }\n          if (isArray(content)) return this.visitArray.apply(this, arguments);\n          return this.visitObject.apply(this, arguments);\n        } else if (typeof content === 'string' || typeof content === 'boolean' || typeof content === 'number') {\n          return this.visitPrimitive.apply(this, arguments);\n        } else if (typeof content === 'function') {\n          return this.visitFunction.apply(this, arguments);\n        }\n        throw new Error(\"Unexpected object in htmljs: \" + content);\n      },\n      visitNull: function (nullOrUndefined /*, ...*/) {},\n      visitPrimitive: function (stringBooleanOrNumber /*, ...*/) {},\n      visitArray: function (array /*, ...*/) {},\n      visitComment: function (comment /*, ...*/) {},\n      visitCharRef: function (charRef /*, ...*/) {},\n      visitRaw: function (raw /*, ...*/) {},\n      visitTag: function (tag /*, ...*/) {},\n      visitObject: function (obj /*, ...*/) {\n        throw new Error(\"Unexpected object in htmljs: \" + obj);\n      },\n      visitFunction: function (fn /*, ...*/) {\n        throw new Error(\"Unexpected function in htmljs: \" + fn);\n      }\n    });\n    const TransformingVisitor = Visitor.extend();\n    TransformingVisitor.def({\n      visitNull: IDENTITY,\n      visitPrimitive: IDENTITY,\n      visitArray: function (array) {\n        var result = array;\n        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n        for (var i = 0; i < array.length; i++) {\n          var oldItem = array[i];\n          var newItem = this.visit(oldItem, ...args);\n          if (newItem !== oldItem) {\n            // copy `array` on write\n            if (result === array) result = array.slice();\n            result[i] = newItem;\n          }\n        }\n        return result;\n      },\n      visitComment: IDENTITY,\n      visitCharRef: IDENTITY,\n      visitRaw: IDENTITY,\n      visitObject: function (obj) {\n        // Don't parse Markdown & RCData as HTML\n        if (obj.textMode != null) {\n          return obj;\n        }\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n        if ('content' in obj) {\n          obj.content = this.visit(obj.content, ...args);\n        }\n        if ('elseContent' in obj) {\n          obj.elseContent = this.visit(obj.elseContent, ...args);\n        }\n        return obj;\n      },\n      visitFunction: IDENTITY,\n      visitTag: function (tag) {\n        var oldChildren = tag.children;\n        for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n          args[_key3 - 1] = arguments[_key3];\n        }\n        var newChildren = this.visitChildren(oldChildren, ...args);\n        var oldAttrs = tag.attrs;\n        var newAttrs = this.visitAttributes(oldAttrs, ...args);\n        if (newAttrs === oldAttrs && newChildren === oldChildren) return tag;\n        var newTag = getTag(tag.tagName).apply(null, newChildren);\n        newTag.attrs = newAttrs;\n        return newTag;\n      },\n      visitChildren: function (children) {\n        for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n          args[_key4 - 1] = arguments[_key4];\n        }\n        return this.visitArray(children, ...args);\n      },\n      // Transform the `.attrs` property of a tag, which may be a dictionary,\n      // an array, or in some uses, a foreign object (such as\n      // a template tag).\n      visitAttributes: function (attrs) {\n        for (var _len5 = arguments.length, args = new Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {\n          args[_key5 - 1] = arguments[_key5];\n        }\n        // Allow Promise-like values here; these will be handled in materializer.\n        if (isPromiseLike(attrs)) {\n          return attrs;\n        }\n        if (isArray(attrs)) {\n          var result = attrs;\n          for (var i = 0; i < attrs.length; i++) {\n            var oldItem = attrs[i];\n            var newItem = this.visitAttributes(oldItem, ...args);\n            if (newItem !== oldItem) {\n              // copy on write\n              if (result === attrs) result = attrs.slice();\n              result[i] = newItem;\n            }\n          }\n          return result;\n        }\n        if (attrs && isConstructedObject(attrs)) {\n          throw new Error(\"The basic TransformingVisitor does not support \" + \"foreign objects in attributes.  Define a custom \" + \"visitAttributes for this case.\");\n        }\n        var oldAttrs = attrs;\n        var newAttrs = oldAttrs;\n        if (oldAttrs) {\n          var attrArgs = [null, null];\n          attrArgs.push.apply(attrArgs, arguments);\n          for (var k in oldAttrs) {\n            var oldValue = oldAttrs[k];\n            attrArgs[0] = k;\n            attrArgs[1] = oldValue;\n            var newValue = this.visitAttribute.apply(this, attrArgs);\n            if (newValue !== oldValue) {\n              // copy on write\n              if (newAttrs === oldAttrs) newAttrs = _assign({}, oldAttrs);\n              newAttrs[k] = newValue;\n            }\n          }\n        }\n        return newAttrs;\n      },\n      // Transform the value of one attribute name/value in an\n      // attributes dictionary.\n      visitAttribute: function (name, value, tag) {\n        for (var _len6 = arguments.length, args = new Array(_len6 > 3 ? _len6 - 3 : 0), _key6 = 3; _key6 < _len6; _key6++) {\n          args[_key6 - 3] = arguments[_key6];\n        }\n        return this.visit(value, ...args);\n      }\n    });\n    const ToTextVisitor = Visitor.extend();\n    ToTextVisitor.def({\n      visitNull: function (nullOrUndefined) {\n        return '';\n      },\n      visitPrimitive: function (stringBooleanOrNumber) {\n        var str = String(stringBooleanOrNumber);\n        if (this.textMode === TEXTMODE.RCDATA) {\n          return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n        } else if (this.textMode === TEXTMODE.ATTRIBUTE) {\n          // escape `&` and `\"` this time, not `&` and `<`\n          return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n        } else {\n          return str;\n        }\n      },\n      visitArray: function (array) {\n        var parts = [];\n        for (var i = 0; i < array.length; i++) parts.push(this.visit(array[i]));\n        return parts.join('');\n      },\n      visitComment: function (comment) {\n        throw new Error(\"Can't have a comment here\");\n      },\n      visitCharRef: function (charRef) {\n        if (this.textMode === TEXTMODE.RCDATA || this.textMode === TEXTMODE.ATTRIBUTE) {\n          return charRef.html;\n        } else {\n          return charRef.str;\n        }\n      },\n      visitRaw: function (raw) {\n        return raw.value;\n      },\n      visitTag: function (tag) {\n        // Really we should just disallow Tags here.  However, at the\n        // moment it's useful to stringify any HTML we find.  In\n        // particular, when you include a template within `{{#markdown}}`,\n        // we render the template as text, and since there's currently\n        // no way to make the template be *parsed* as text (e.g. `<template\n        // type=\"text\">`), we hackishly support HTML tags in markdown\n        // in templates by parsing them and stringifying them.\n        return this.visit(this.toHTML(tag));\n      },\n      visitObject: function (x) {\n        throw new Error(\"Unexpected object in htmljs in toText: \" + x);\n      },\n      toHTML: function (node) {\n        return toHTML(node);\n      }\n    });\n    const ToHTMLVisitor = Visitor.extend();\n    ToHTMLVisitor.def({\n      visitNull: function (nullOrUndefined) {\n        return '';\n      },\n      visitPrimitive: function (stringBooleanOrNumber) {\n        var str = String(stringBooleanOrNumber);\n        return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n      },\n      visitArray: function (array) {\n        var parts = [];\n        for (var i = 0; i < array.length; i++) parts.push(this.visit(array[i]));\n        return parts.join('');\n      },\n      visitComment: function (comment) {\n        return '<!--' + comment.sanitizedValue + '-->';\n      },\n      visitCharRef: function (charRef) {\n        return charRef.html;\n      },\n      visitRaw: function (raw) {\n        return raw.value;\n      },\n      visitTag: function (tag) {\n        var attrStrs = [];\n        var tagName = tag.tagName;\n        var children = tag.children;\n        var attrs = tag.attrs;\n        if (attrs) {\n          attrs = flattenAttributes(attrs);\n          for (var k in attrs) {\n            if (k === 'value' && tagName === 'textarea') {\n              children = [attrs[k], children];\n            } else {\n              var v = this.toText(attrs[k], TEXTMODE.ATTRIBUTE);\n              attrStrs.push(' ' + k + '=\"' + v + '\"');\n            }\n          }\n        }\n        var startTag = '<' + tagName + attrStrs.join('') + '>';\n        var childStrs = [];\n        var content;\n        if (tagName === 'textarea') {\n          for (var i = 0; i < children.length; i++) childStrs.push(this.toText(children[i], TEXTMODE.RCDATA));\n          content = childStrs.join('');\n          if (content.slice(0, 1) === '\\n')\n            // TEXTAREA will absorb a newline, so if we see one, add\n            // another one.\n            content = '\\n' + content;\n        } else {\n          for (var i = 0; i < children.length; i++) childStrs.push(this.visit(children[i]));\n          content = childStrs.join('');\n        }\n        var result = startTag + content;\n        if (children.length || !isVoidElement(tagName)) {\n          // \"Void\" elements like BR are the only ones that don't get a close\n          // tag in HTML5.  They shouldn't have contents, either, so we could\n          // throw an error upon seeing contents here.\n          result += '</' + tagName + '>';\n        }\n        return result;\n      },\n      visitObject: function (x) {\n        throw new Error(\"Unexpected object in htmljs in toHTML: \" + x);\n      },\n      toText: function (node, textMode) {\n        return toText(node, textMode);\n      }\n    });\n\n    ////////////////////////////// TOHTML\n\n    function toHTML(content) {\n      return new ToHTMLVisitor().visit(content);\n    }\n    const TEXTMODE = {\n      STRING: 1,\n      RCDATA: 2,\n      ATTRIBUTE: 3\n    };\n    function toText(content, textMode) {\n      if (!textMode) throw new Error(\"textMode required for HTML.toText\");\n      if (!(textMode === TEXTMODE.STRING || textMode === TEXTMODE.RCDATA || textMode === TEXTMODE.ATTRIBUTE)) throw new Error(\"Unknown textMode: \" + textMode);\n      var visitor = new ToTextVisitor({\n        textMode: textMode\n      });\n      return visitor.visit(content);\n    }\n    __reify_async_result__();\n  } catch (_reifyError) {\n    return __reify_async_result__(_reifyError);\n  }\n  __reify_async_result__()\n}, {\n  self: this,\n  async: false\n});","map":{"version":3,"names":["module","export","Visitor","TransformingVisitor","ToTextVisitor","ToHTMLVisitor","toHTML","TEXTMODE","toText","Tag","CharRef","Comment","Raw","isArray","getTag","isConstructedObject","flattenAttributes","isVoidElement","link","v","__reifyWaitForDeps__","isPromiseLike","x","then","IDENTITY","_hasOwnProperty","Object","prototype","hasOwnProperty","_assign","tgt","src","k","call","props","def","options","extend","curType","subType","HTMLVisitorSubtype","apply","arguments","visit","content","visitNull","htmljsType","visitTag","visitCharRef","visitComment","visitRaw","Error","visitArray","visitObject","visitPrimitive","visitFunction","nullOrUndefined","stringBooleanOrNumber","array","comment","charRef","raw","tag","obj","fn","result","_len","length","args","Array","_key","i","oldItem","newItem","slice","textMode","_len2","_key2","elseContent","oldChildren","children","_len3","_key3","newChildren","visitChildren","oldAttrs","attrs","newAttrs","visitAttributes","newTag","tagName","_len4","_key4","_len5","_key5","attrArgs","push","oldValue","newValue","visitAttribute","name","value","_len6","_key6","str","String","RCDATA","replace","ATTRIBUTE","parts","join","html","node","sanitizedValue","attrStrs","startTag","childStrs","STRING","visitor","__reify_async_result__","_reifyError","self","async"],"sources":["packages/htmljs/visitors.js"],"sourcesContent":["import {\n  Tag,\n  CharRef,\n  Comment,\n  Raw,\n  isArray,\n  getTag,\n  isConstructedObject,\n  flattenAttributes,\n  isVoidElement,\n} from './html';\n\nconst isPromiseLike = x => !!x && typeof x.then === 'function';\n\nvar IDENTITY = function (x) { return x; };\n\n// _assign is like _.extend or the upcoming Object.assign.\n// Copy src's own, enumerable properties onto tgt and return\n// tgt.\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nvar _assign = function (tgt, src) {\n  for (var k in src) {\n    if (_hasOwnProperty.call(src, k))\n      tgt[k] = src[k];\n  }\n  return tgt;\n};\n\nexport const Visitor = function (props) {\n  _assign(this, props);\n};\n\nVisitor.def = function (options) {\n  _assign(this.prototype, options);\n};\n\nVisitor.extend = function (options) {\n  var curType = this;\n  var subType = function HTMLVisitorSubtype(/*arguments*/) {\n    Visitor.apply(this, arguments);\n  };\n  subType.prototype = new curType;\n  subType.extend = curType.extend;\n  subType.def = curType.def;\n  if (options)\n    _assign(subType.prototype, options);\n  return subType;\n};\n\nVisitor.def({\n  visit: function (content/*, ...*/) {\n    if (content == null)\n      // null or undefined.\n      return this.visitNull.apply(this, arguments);\n\n    if (typeof content === 'object') {\n      if (content.htmljsType) {\n        switch (content.htmljsType) {\n        case Tag.htmljsType:\n          return this.visitTag.apply(this, arguments);\n        case CharRef.htmljsType:\n          return this.visitCharRef.apply(this, arguments);\n        case Comment.htmljsType:\n          return this.visitComment.apply(this, arguments);\n        case Raw.htmljsType:\n          return this.visitRaw.apply(this, arguments);\n        default:\n          throw new Error(\"Unknown htmljs type: \" + content.htmljsType);\n        }\n      }\n\n      if (isArray(content))\n        return this.visitArray.apply(this, arguments);\n\n      return this.visitObject.apply(this, arguments);\n\n    } else if ((typeof content === 'string') ||\n               (typeof content === 'boolean') ||\n               (typeof content === 'number')) {\n      return this.visitPrimitive.apply(this, arguments);\n\n    } else if (typeof content === 'function') {\n      return this.visitFunction.apply(this, arguments);\n    }\n\n    throw new Error(\"Unexpected object in htmljs: \" + content);\n\n  },\n  visitNull: function (nullOrUndefined/*, ...*/) {},\n  visitPrimitive: function (stringBooleanOrNumber/*, ...*/) {},\n  visitArray: function (array/*, ...*/) {},\n  visitComment: function (comment/*, ...*/) {},\n  visitCharRef: function (charRef/*, ...*/) {},\n  visitRaw: function (raw/*, ...*/) {},\n  visitTag: function (tag/*, ...*/) {},\n  visitObject: function (obj/*, ...*/) {\n    throw new Error(\"Unexpected object in htmljs: \" + obj);\n  },\n  visitFunction: function (fn/*, ...*/) {\n    throw new Error(\"Unexpected function in htmljs: \" + fn);\n  }\n});\n\nexport const TransformingVisitor = Visitor.extend();\nTransformingVisitor.def({\n  visitNull: IDENTITY,\n  visitPrimitive: IDENTITY,\n  visitArray: function (array, ...args) {\n    var result = array;\n    for (var i = 0; i < array.length; i++) {\n      var oldItem = array[i];\n      var newItem = this.visit(oldItem, ...args);\n      if (newItem !== oldItem) {\n        // copy `array` on write\n        if (result === array)\n          result = array.slice();\n        result[i] = newItem;\n      }\n    }\n    return result;\n  },\n  visitComment: IDENTITY,\n  visitCharRef: IDENTITY,\n  visitRaw: IDENTITY,\n  visitObject: function(obj, ...args){\n    // Don't parse Markdown & RCData as HTML\n    if (obj.textMode != null){\n      return obj;\n    }\n    if ('content' in obj) {\n      obj.content = this.visit(obj.content, ...args);\n    }\n    if ('elseContent' in obj){\n      obj.elseContent = this.visit(obj.elseContent, ...args);\n    }\n    return obj;\n  },\n  visitFunction: IDENTITY,\n  visitTag: function (tag, ...args) {\n    var oldChildren = tag.children;\n    var newChildren = this.visitChildren(oldChildren, ...args);\n\n    var oldAttrs = tag.attrs;\n    var newAttrs = this.visitAttributes(oldAttrs, ...args);\n\n    if (newAttrs === oldAttrs && newChildren === oldChildren)\n      return tag;\n\n    var newTag = getTag(tag.tagName).apply(null, newChildren);\n    newTag.attrs = newAttrs;\n    return newTag;\n  },\n  visitChildren: function (children, ...args) {\n    return this.visitArray(children, ...args);\n  },\n  // Transform the `.attrs` property of a tag, which may be a dictionary,\n  // an array, or in some uses, a foreign object (such as\n  // a template tag).\n  visitAttributes: function (attrs, ...args) {\n    // Allow Promise-like values here; these will be handled in materializer.\n    if (isPromiseLike(attrs)) {\n      return attrs;\n    }\n\n    if (isArray(attrs)) {\n      var result = attrs;\n      for (var i = 0; i < attrs.length; i++) {\n        var oldItem = attrs[i];\n        var newItem = this.visitAttributes(oldItem, ...args);\n        if (newItem !== oldItem) {\n          // copy on write\n          if (result === attrs)\n            result = attrs.slice();\n          result[i] = newItem;\n        }\n      }\n      return result;\n    }\n\n    if (attrs && isConstructedObject(attrs)) {\n      throw new Error(\"The basic TransformingVisitor does not support \" +\n                      \"foreign objects in attributes.  Define a custom \" +\n                      \"visitAttributes for this case.\");\n    }\n\n    var oldAttrs = attrs;\n    var newAttrs = oldAttrs;\n    if (oldAttrs) {\n      var attrArgs = [null, null];\n      attrArgs.push.apply(attrArgs, arguments);\n      for (var k in oldAttrs) {\n        var oldValue = oldAttrs[k];\n        attrArgs[0] = k;\n        attrArgs[1] = oldValue;\n        var newValue = this.visitAttribute.apply(this, attrArgs);\n        if (newValue !== oldValue) {\n          // copy on write\n          if (newAttrs === oldAttrs)\n            newAttrs = _assign({}, oldAttrs);\n          newAttrs[k] = newValue;\n        }\n      }\n    }\n\n    return newAttrs;\n  },\n  // Transform the value of one attribute name/value in an\n  // attributes dictionary.\n  visitAttribute: function (name, value, tag, ...args) {\n    return this.visit(value, ...args);\n  }\n});\n\n\nexport const ToTextVisitor = Visitor.extend();\nToTextVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    if (this.textMode === TEXTMODE.RCDATA) {\n      return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n    } else if (this.textMode === TEXTMODE.ATTRIBUTE) {\n      // escape `&` and `\"` this time, not `&` and `<`\n      return str.replace(/&/g, '&amp;').replace(/\"/g, '&quot;');\n    } else {\n      return str;\n    }\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++)\n      parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    throw new Error(\"Can't have a comment here\");\n  },\n  visitCharRef: function (charRef) {\n    if (this.textMode === TEXTMODE.RCDATA ||\n        this.textMode === TEXTMODE.ATTRIBUTE) {\n      return charRef.html;\n    } else {\n      return charRef.str;\n    }\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    // Really we should just disallow Tags here.  However, at the\n    // moment it's useful to stringify any HTML we find.  In\n    // particular, when you include a template within `{{#markdown}}`,\n    // we render the template as text, and since there's currently\n    // no way to make the template be *parsed* as text (e.g. `<template\n    // type=\"text\">`), we hackishly support HTML tags in markdown\n    // in templates by parsing them and stringifying them.\n    return this.visit(this.toHTML(tag));\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toText: \" + x);\n  },\n  toHTML: function (node) {\n    return toHTML(node);\n  }\n});\n\n\n\nexport const ToHTMLVisitor = Visitor.extend();\nToHTMLVisitor.def({\n  visitNull: function (nullOrUndefined) {\n    return '';\n  },\n  visitPrimitive: function (stringBooleanOrNumber) {\n    var str = String(stringBooleanOrNumber);\n    return str.replace(/&/g, '&amp;').replace(/</g, '&lt;');\n  },\n  visitArray: function (array) {\n    var parts = [];\n    for (var i = 0; i < array.length; i++)\n      parts.push(this.visit(array[i]));\n    return parts.join('');\n  },\n  visitComment: function (comment) {\n    return '<!--' + comment.sanitizedValue + '-->';\n  },\n  visitCharRef: function (charRef) {\n    return charRef.html;\n  },\n  visitRaw: function (raw) {\n    return raw.value;\n  },\n  visitTag: function (tag) {\n    var attrStrs = [];\n\n    var tagName = tag.tagName;\n    var children = tag.children;\n\n    var attrs = tag.attrs;\n    if (attrs) {\n      attrs = flattenAttributes(attrs);\n      for (var k in attrs) {\n        if (k === 'value' && tagName === 'textarea') {\n          children = [attrs[k], children];\n        } else {\n          var v = this.toText(attrs[k], TEXTMODE.ATTRIBUTE);\n          attrStrs.push(' ' + k + '=\"' + v + '\"');\n        }\n      }\n    }\n\n    var startTag = '<' + tagName + attrStrs.join('') + '>';\n\n    var childStrs = [];\n    var content;\n    if (tagName === 'textarea') {\n\n      for (var i = 0; i < children.length; i++)\n        childStrs.push(this.toText(children[i], TEXTMODE.RCDATA));\n\n      content = childStrs.join('');\n      if (content.slice(0, 1) === '\\n')\n        // TEXTAREA will absorb a newline, so if we see one, add\n        // another one.\n        content = '\\n' + content;\n\n    } else {\n      for (var i = 0; i < children.length; i++)\n        childStrs.push(this.visit(children[i]));\n\n      content = childStrs.join('');\n    }\n\n    var result = startTag + content;\n\n    if (children.length || ! isVoidElement(tagName)) {\n      // \"Void\" elements like BR are the only ones that don't get a close\n      // tag in HTML5.  They shouldn't have contents, either, so we could\n      // throw an error upon seeing contents here.\n      result += '</' + tagName + '>';\n    }\n\n    return result;\n  },\n  visitObject: function (x) {\n    throw new Error(\"Unexpected object in htmljs in toHTML: \" + x);\n  },\n  toText: function (node, textMode) {\n    return toText(node, textMode);\n  }\n});\n\n\n\n////////////////////////////// TOHTML\n\nexport function toHTML(content) {\n  return (new ToHTMLVisitor).visit(content);\n}\n\n// Escaping modes for outputting text when generating HTML.\nexport const TEXTMODE = {\n  STRING: 1,\n  RCDATA: 2,\n  ATTRIBUTE: 3\n};\n\n\nexport function toText(content, textMode) {\n  if (! textMode)\n    throw new Error(\"textMode required for HTML.toText\");\n  if (! (textMode === TEXTMODE.STRING ||\n         textMode === TEXTMODE.RCDATA ||\n         textMode === TEXTMODE.ATTRIBUTE))\n    throw new Error(\"Unknown textMode: \" + textMode);\n\n  var visitor = new ToTextVisitor({textMode: textMode});\n  return visitor.visit(content);\n}\n"],"mappings":"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","ignoreList":[]},"sourceType":"module","externalDependencies":{},"hash":"6af219de9786642f899458079aed9e6751064b28"}
