[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\nPackage[\"core-runtime\"].queue(\"blaze\",function () {/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar check = Package.check.check;\nvar Match = Package.check.Match;\nvar ObserveSequence = Package['observe-sequence'].ObserveSequence;\nvar ReactiveVar = Package['reactive-var'].ReactiveVar;\nvar OrderedDict = Package['ordered-dict'].OrderedDict;\nvar HTML = Package.htmljs.HTML;\nvar meteorInstall = Package.modules.meteorInstall;\nvar Promise = Package.promise.Promise;\n\n/* Package-scope variables */\nvar Blaze, AttributeHandler, ElementAttributesUpdater, UI, Handlebars;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"blaze\":{\"preamble.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/preamble.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * @namespace Blaze\n * @summary The namespace for all Blaze-related methods and classes.\n */\nBlaze = {};\n\n// Utility to HTML-escape a string.  Included for legacy reasons.\n// TODO: Should be replaced with _.escape once underscore is upgraded to a newer\n//       version which escapes ` (backtick) as well. Underscore 1.5.2 does not.\nBlaze._escape = function () {\n  const escape_map = {\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\",\n    \"/\": \"&#x2F;\",\n    \"`\": \"&#x60;\",\n    /* IE allows backtick-delimited attributes?? */\n    \"&\": \"&amp;\"\n  };\n  const escape_one = function (c) {\n    return escape_map[c];\n  };\n  return function (x) {\n    return x.replace(/[&<>\"'`]/g, escape_one);\n  };\n}();\nBlaze._warn = function (msg) {\n  msg = 'Warning: ' + msg;\n  if (typeof console !== 'undefined' && console.warn) {\n    console.warn(msg);\n  }\n};\nconst nativeBind = Function.prototype.bind;\n\n// An implementation of _.bind which allows better optimization.\n// See: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\nif (nativeBind) {\n  Blaze._bind = function (func, obj) {\n    for (var _len = arguments.length, rest = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n      rest[_key - 2] = arguments[_key];\n    }\n    if (arguments.length === 2) {\n      return nativeBind.call(func, obj);\n    }\n    const args = [obj, ...rest];\n    return nativeBind.apply(func, args);\n  };\n} else {\n  // A slower but backwards compatible version.\n  Blaze._bind = function (objA, objB) {\n    objA.bind(objB);\n  };\n}\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"dombackend.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/dombackend.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nconst DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\nconst $jq = typeof jQuery !== 'undefined' ? jQuery : typeof Package !== 'undefined' ? Package.jquery && Package.jquery.jQuery : null;\nif (!$jq) throw new Error(\"jQuery not found\");\nDOMBackend._$jq = $jq;\nDOMBackend.getContext = function () {\n  if (DOMBackend._context) {\n    return DOMBackend._context;\n  }\n  if (DOMBackend._$jq.support.createHTMLDocument) {\n    DOMBackend._context = document.implementation.createHTMLDocument(\"\");\n\n    // Set the base href for the created document\n    // so any parsed elements with URLs\n    // are based on the document's URL (gh-2965)\n    const base = DOMBackend._context.createElement(\"base\");\n    base.href = document.location.href;\n    DOMBackend._context.head.appendChild(base);\n  } else {\n    DOMBackend._context = document;\n  }\n  return DOMBackend._context;\n};\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html, DOMBackend.getContext()) || [];\n};\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n  bindEventCapturer: function (elem, type, selector, handler) {\n    const $elem = $jq(elem);\n    const wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target;\n\n      // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n      const $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector))) handler.call(elem, event);\n    };\n    handler._meteorui_wrapper = wrapper;\n    type = DOMBackend.Events.parseEventType(type);\n    // add *capturing* event listener\n    elem.addEventListener(type, wrapper, true);\n  },\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n  parseEventType: function (type) {\n    // strip off namespaces\n    const dotLoc = type.indexOf('.');\n    if (dotLoc >= 0) return type.slice(0, dotLoc);\n    return type;\n  }\n};\n\n///// Removal detection and interoperability.\n\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nconst NOOP = function () {};\n\n// Circular doubly-linked list\nconst TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n};\n\n// Insert newElt before oldElt in the circular list\nTeardownCallback.prototype.linkBefore = function (oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\nTeardownCallback.prototype.go = function () {\n  const func = this.func;\n  func && func();\n};\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    const elt = new TeardownCallback(func);\n    const propName = DOMBackend.Teardown._CB_PROP;\n    if (!elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback();\n\n      // Set up the event, only the first time.\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n    elt.linkBefore(elem[propName]);\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    const elems = [];\n    // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n    const nodeList = elem.getElementsByTagName('*');\n    for (let i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {\n    // This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function () {\n    const elem = this;\n    const callbacks = elem[DOMBackend.Teardown._CB_PROP];\n    if (callbacks) {\n      let elt = callbacks.next;\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n      callbacks.go();\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n};\n\n// Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"domrange.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/domrange.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// A constant empty array (frozen if the JS engine supports it).\nconst _emptyArray = Object.freeze ? Object.freeze([]) : [];\n\n// `[new] Blaze._DOMRange([nodeAndRangeArray])`\n//\n// A DOMRange consists of an array of consecutive nodes and DOMRanges,\n// which may be replaced at any time with a new array.  If the DOMRange\n// has been attached to the DOM at some location, then updating\n// the array will cause the DOM to be updated at that location.\nBlaze._DOMRange = function (nodeAndRangeArray) {\n  if (!(this instanceof DOMRange))\n    // called without `new`\n    return new DOMRange(nodeAndRangeArray);\n  const members = nodeAndRangeArray || _emptyArray;\n  if (!(members && typeof members.length === 'number')) throw new Error(\"Expected array\");\n  for (let i = 0; i < members.length; i++) this._memberIn(members[i]);\n  this.members = members;\n  this.emptyRangePlaceholder = null;\n  this.attached = false;\n  this.parentElement = null;\n  this.parentRange = null;\n  this.attachedCallbacks = _emptyArray;\n};\nconst DOMRange = Blaze._DOMRange;\n\n// In IE 8, don't use empty text nodes as placeholders\n// in empty DOMRanges, use comment nodes instead.  Using\n// empty text nodes in modern browsers is great because\n// it doesn't clutter the web inspector.  In IE 8, however,\n// it seems to lead in some roundabout way to the OAuth\n// pop-up crashing the browser completely.  In the past,\n// we didn't use empty text nodes on IE 8 because they\n// don't accept JS properties, so just use the same logic\n// even though we don't need to set properties on the\n// placeholder anymore.\nDOMRange._USE_COMMENT_PLACEHOLDERS = function () {\n  let result = false;\n  const textNode = document.createTextNode(\"\");\n  try {\n    textNode.someProp = true;\n  } catch (e) {\n    // IE 8\n    result = true;\n  }\n  return result;\n}();\n\n// static methods\nDOMRange._insert = function (rangeOrNode, parentElement, nextNode, _isMove) {\n  const m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.attach(parentElement, nextNode, _isMove);\n  } else {\n    if (_isMove) DOMRange._moveNodeWithHooks(m, parentElement, nextNode);else DOMRange._insertNodeWithHooks(m, parentElement, nextNode);\n  }\n};\nDOMRange._remove = function (rangeOrNode) {\n  const m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.detach();\n  } else {\n    DOMRange._removeNodeWithHooks(m);\n  }\n};\nDOMRange._removeNodeWithHooks = function (n) {\n  if (!n.parentNode) return;\n  if (n.nodeType === 1 && n.parentNode._uihooks && n.parentNode._uihooks.removeElement) {\n    n.parentNode._uihooks.removeElement(n);\n  } else {\n    n.parentNode.removeChild(n);\n  }\n};\nDOMRange._insertNodeWithHooks = function (n, parent, next) {\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 && parent._uihooks && parent._uihooks.insertElement) {\n    parent._uihooks.insertElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\nDOMRange._moveNodeWithHooks = function (n, parent, next) {\n  if (n.parentNode !== parent) return;\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 && parent._uihooks && parent._uihooks.moveElement) {\n    parent._uihooks.moveElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\nDOMRange.forElement = function (elem) {\n  if (elem.nodeType !== 1) throw new Error(\"Expected element, found: \" + elem);\n  let range = null;\n  while (elem && !range) {\n    range = elem.$blaze_range || null;\n    if (!range) elem = elem.parentNode;\n  }\n  return range;\n};\nDOMRange.prototype.attach = function (parentElement, nextNode, _isMove, _isReplace) {\n  // This method is called to insert the DOMRange into the DOM for\n  // the first time, but it's also used internally when\n  // updating the DOM.\n  //\n  // If _isMove is true, move this attached range to a different\n  // location under the same parentElement.\n  if (_isMove || _isReplace) {\n    if (!(this.parentElement === parentElement && this.attached)) throw new Error(\"Can only move or replace an attached DOMRange, and only under the same parent element\");\n  }\n  const members = this.members;\n  if (members.length) {\n    this.emptyRangePlaceholder = null;\n    for (let i = 0; i < members.length; i++) {\n      DOMRange._insert(members[i], parentElement, nextNode, _isMove);\n    }\n  } else {\n    const placeholder = DOMRange._USE_COMMENT_PLACEHOLDERS ? document.createComment(\"\") : document.createTextNode(\"\");\n    this.emptyRangePlaceholder = placeholder;\n    parentElement.insertBefore(placeholder, nextNode || null);\n  }\n  this.attached = true;\n  this.parentElement = parentElement;\n  if (!(_isMove || _isReplace)) {\n    for (let i = 0; i < this.attachedCallbacks.length; i++) {\n      const obj = this.attachedCallbacks[i];\n      obj.attached && obj.attached(this, parentElement);\n    }\n  }\n};\nDOMRange.prototype.setMembers = function (newNodeAndRangeArray) {\n  const newMembers = newNodeAndRangeArray;\n  if (!(newMembers && typeof newMembers.length === 'number')) throw new Error(\"Expected array\");\n  const oldMembers = this.members;\n  for (let i = 0; i < oldMembers.length; i++) this._memberOut(oldMembers[i]);\n  for (let i = 0; i < newMembers.length; i++) this._memberIn(newMembers[i]);\n  if (!this.attached) {\n    this.members = newMembers;\n  } else {\n    // don't do anything if we're going from empty to empty\n    if (newMembers.length || oldMembers.length) {\n      // detach the old members and insert the new members\n      const nextNode = this.lastNode().nextSibling;\n      const parentElement = this.parentElement;\n      // Use detach/attach, but don't fire attached/detached hooks\n      this.detach(true /*_isReplace*/);\n      this.members = newMembers;\n      this.attach(parentElement, nextNode, false, true /*_isReplace*/);\n    }\n  }\n};\nDOMRange.prototype.firstNode = function () {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!this.members.length) return this.emptyRangePlaceholder;\n  const m = this.members[0];\n  return m instanceof DOMRange ? m.firstNode() : m;\n};\nDOMRange.prototype.lastNode = function () {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!this.members.length) return this.emptyRangePlaceholder;\n  const m = this.members[this.members.length - 1];\n  return m instanceof DOMRange ? m.lastNode() : m;\n};\nDOMRange.prototype.detach = function (_isReplace) {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  const oldParentElement = this.parentElement;\n  const members = this.members;\n  if (members.length) {\n    for (let i = 0; i < members.length; i++) {\n      DOMRange._remove(members[i]);\n    }\n  } else {\n    const placeholder = this.emptyRangePlaceholder;\n    this.parentElement.removeChild(placeholder);\n    this.emptyRangePlaceholder = null;\n  }\n  if (!_isReplace) {\n    this.attached = false;\n    this.parentElement = null;\n    for (let i = 0; i < this.attachedCallbacks.length; i++) {\n      const obj = this.attachedCallbacks[i];\n      obj.detached && obj.detached(this, oldParentElement);\n    }\n  }\n};\nDOMRange.prototype.addMember = function (newMember, atIndex, _isMove) {\n  const members = this.members;\n  if (!(atIndex >= 0 && atIndex <= members.length)) throw new Error(\"Bad index in range.addMember: \" + atIndex);\n  if (!_isMove) this._memberIn(newMember);\n  if (!this.attached) {\n    // currently detached; just updated members\n    members.splice(atIndex, 0, newMember);\n  } else if (members.length === 0) {\n    // empty; use the empty-to-nonempty handling of setMembers\n    this.setMembers([newMember]);\n  } else {\n    let nextNode;\n    if (atIndex === members.length) {\n      // insert at end\n      nextNode = this.lastNode().nextSibling;\n    } else {\n      const m = members[atIndex];\n      nextNode = m instanceof DOMRange ? m.firstNode() : m;\n    }\n    members.splice(atIndex, 0, newMember);\n    DOMRange._insert(newMember, this.parentElement, nextNode, _isMove);\n  }\n};\nDOMRange.prototype.removeMember = function (atIndex, _isMove) {\n  const members = this.members;\n  if (!(atIndex >= 0 && atIndex < members.length)) throw new Error(\"Bad index in range.removeMember: \" + atIndex);\n  if (_isMove) {\n    members.splice(atIndex, 1);\n  } else {\n    const oldMember = members[atIndex];\n    this._memberOut(oldMember);\n    if (members.length === 1) {\n      // becoming empty; use the logic in setMembers\n      this.setMembers(_emptyArray);\n    } else {\n      members.splice(atIndex, 1);\n      if (this.attached) DOMRange._remove(oldMember);\n    }\n  }\n};\nDOMRange.prototype.moveMember = function (oldIndex, newIndex) {\n  const member = this.members[oldIndex];\n  this.removeMember(oldIndex, true /*_isMove*/);\n  this.addMember(member, newIndex, true /*_isMove*/);\n};\nDOMRange.prototype.getMember = function (atIndex) {\n  const members = this.members;\n  if (!(atIndex >= 0 && atIndex < members.length)) throw new Error(\"Bad index in range.getMember: \" + atIndex);\n  return this.members[atIndex];\n};\nDOMRange.prototype._memberIn = function (m) {\n  if (m instanceof DOMRange) m.parentRange = this;else if (m.nodeType === 1)\n    // DOM Element\n    m.$blaze_range = this;\n};\nDOMRange._destroy = function (m, _skipNodes) {\n  if (m instanceof DOMRange) {\n    if (m.view) Blaze._destroyView(m.view, _skipNodes);\n  } else if (!_skipNodes && m.nodeType === 1) {\n    // DOM Element\n    if (m.$blaze_range) {\n      Blaze._destroyNode(m);\n      m.$blaze_range = null;\n    }\n  }\n};\nDOMRange.prototype._memberOut = DOMRange._destroy;\n\n// Tear down, but don't remove, the members.  Used when chunks\n// of DOM are being torn down or replaced.\nDOMRange.prototype.destroyMembers = function (_skipNodes) {\n  const members = this.members;\n  for (let i = 0; i < members.length; i++) this._memberOut(members[i], _skipNodes);\n};\nDOMRange.prototype.destroy = function (_skipNodes) {\n  DOMRange._destroy(this, _skipNodes);\n};\nDOMRange.prototype.containsElement = function (elem, selector, event) {\n  var _this$view;\n  const templateName = (_this$view = this.view) !== null && _this$view !== void 0 && _this$view.name ? this.view.name.split('.')[1] : 'unknown template';\n  if (!this.attached) throw new Error(\"\".concat(event, \" event triggered with \").concat(selector, \" on \").concat(templateName, \" but associated view is not be found.\\n    Make sure the event doesn't destroy the view.\"));\n\n  // An element is contained in this DOMRange if it's possible to\n  // reach it by walking parent pointers, first through the DOM and\n  // then parentRange pointers.  In other words, the element or some\n  // ancestor of it is at our level of the DOM (a child of our\n  // parentElement), and this element is one of our members or\n  // is a member of a descendant Range.\n\n  // First check that elem is a descendant of this.parentElement,\n  // according to the DOM.\n  if (!Blaze._elementContains(this.parentElement, elem)) return false;\n\n  // If elem is not an immediate child of this.parentElement,\n  // walk up to its ancestor that is.\n  while (elem.parentNode !== this.parentElement) elem = elem.parentNode;\n  let range = elem.$blaze_range;\n  while (range && range !== this) range = range.parentRange;\n  return range === this;\n};\nDOMRange.prototype.containsRange = function (range) {\n  if (!this.attached) throw new Error(\"Must be attached\");\n  if (!range.attached) return false;\n\n  // A DOMRange is contained in this DOMRange if it's possible\n  // to reach this range by following parent pointers.  If the\n  // DOMRange has the same parentElement, then it should be\n  // a member, or a member of a member etc.  Otherwise, we must\n  // contain its parentElement.\n\n  if (range.parentElement !== this.parentElement) return this.containsElement(range.parentElement);\n  if (range === this) return false; // don't contain self\n\n  while (range && range !== this) range = range.parentRange;\n  return range === this;\n};\nDOMRange.prototype.onAttached = function (attached) {\n  this.onAttachedDetached({\n    attached: attached\n  });\n};\n\n// callbacks are `attached(range, element)` and\n// `detached(range, element)`, and they may\n// access the `callbacks` object in `this`.\n// The arguments to `detached` are the same\n// range and element that were passed to `attached`.\nDOMRange.prototype.onAttachedDetached = function (callbacks) {\n  if (this.attachedCallbacks === _emptyArray) this.attachedCallbacks = [];\n  this.attachedCallbacks.push(callbacks);\n};\nDOMRange.prototype.$ = function (selector) {\n  const self = this;\n  const parentNode = this.parentElement;\n  if (!parentNode) throw new Error(\"Can't select in removed DomRange\");\n\n  // Strategy: Find all selector matches under parentNode,\n  // then filter out the ones that aren't in this DomRange\n  // using `DOMRange#containsElement`.  This is\n  // asymptotically slow in the presence of O(N) sibling\n  // content that is under parentNode but not in our range,\n  // so if performance is an issue, the selector should be\n  // run on a child element.\n\n  // Since jQuery can't run selectors on a DocumentFragment,\n  // we don't expect findBySelector to work.\n  if (parentNode.nodeType === 11 /* DocumentFragment */) throw new Error(\"Can't use $ on an offscreen range\");\n  let results = Blaze._DOMBackend.findBySelector(selector, parentNode);\n\n  // We don't assume `results` has jQuery API; a plain array\n  // should do just as well.  However, if we do have a jQuery\n  // array, we want to end up with one also, so we use\n  // `.filter`.\n\n  // Function that selects only elements that are actually\n  // in this DomRange, rather than simply descending from\n  // `parentNode`.\n  const filterFunc = function (elem) {\n    // handle jQuery's arguments to filter, where the node\n    // is in `this` and the index is the first argument.\n    if (typeof elem === 'number') elem = this;\n    return self.containsElement(elem);\n  };\n  if (!results.filter) {\n    // not a jQuery array, and not a browser with\n    // Array.prototype.filter (e.g. IE <9)\n    const newResults = [];\n    for (let i = 0; i < results.length; i++) {\n      const x = results[i];\n      if (filterFunc(x)) newResults.push(x);\n    }\n    results = newResults;\n  } else {\n    // `results.filter` is either jQuery's or ECMAScript's `filter`\n    results = results.filter(filterFunc);\n  }\n  return results;\n};\n\n// Returns true if element a contains node b and is not node b.\n//\n// The restriction that `a` be an element (not a document fragment,\n// say) is based on what's easy to implement cross-browser.\nBlaze._elementContains = function (a, b) {\n  if (a.nodeType !== 1)\n    // ELEMENT\n    return false;\n  if (a === b) return false;\n  if (a.compareDocumentPosition) {\n    return a.compareDocumentPosition(b) & 0x10;\n  } else {\n    // Should be only old IE and maybe other old browsers here.\n    // Modern Safari has both functions but seems to get contains() wrong.\n    // IE can't handle b being a text node.  We work around this\n    // by doing a direct parent test now.\n    b = b.parentNode;\n    if (!(b && b.nodeType === 1))\n      // ELEMENT\n      return false;\n    if (a === b) return true;\n    return a.contains(b);\n  }\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"events.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/events.js                                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet has;\nmodule.link(\"lodash.has\", {\n  default(v) {\n    has = v;\n  }\n}, 0);\nconst EventSupport = Blaze._EventSupport = {};\nconst DOMBackend = Blaze._DOMBackend;\n\n// List of events to always delegate, never capture.\n// Since jQuery fakes bubbling for certain events in\n// certain browsers (like `submit`), we don't want to\n// get in its way.\n//\n// We could list all known bubbling\n// events here to avoid creating speculative capturers\n// for them, but it would only be an optimization.\nconst eventsToDelegate = EventSupport.eventsToDelegate = {\n  blur: 1,\n  change: 1,\n  click: 1,\n  focus: 1,\n  focusin: 1,\n  focusout: 1,\n  reset: 1,\n  submit: 1\n};\nconst EVENT_MODE = EventSupport.EVENT_MODE = {\n  TBD: 0,\n  BUBBLING: 1,\n  CAPTURING: 2\n};\nlet NEXT_HANDLERREC_ID = 1;\nconst HandlerRec = function (elem, type, selector, handler, recipient) {\n  this.elem = elem;\n  this.type = type;\n  this.selector = selector;\n  this.handler = handler;\n  this.recipient = recipient;\n  this.id = NEXT_HANDLERREC_ID++;\n  this.mode = EVENT_MODE.TBD;\n\n  // It's important that delegatedHandler be a different\n  // instance for each handlerRecord, because its identity\n  // is used to remove it.\n  //\n  // It's also important that the closure have access to\n  // `this` when it is not called with it set.\n  this.delegatedHandler = function (h) {\n    return function (evt) {\n      if (!h.selector && evt.currentTarget !== evt.target)\n        // no selector means only fire on target\n        return;\n      return h.handler.apply(h.recipient, arguments);\n    };\n  }(this);\n\n  // WHY CAPTURE AND DELEGATE: jQuery can't delegate\n  // non-bubbling events, because\n  // event capture doesn't work in IE 8.  However, there\n  // are all sorts of new-fangled non-bubbling events\n  // like \"play\" and \"touchenter\".  We delegate these\n  // events using capture in all browsers except IE 8.\n  // IE 8 doesn't support these events anyway.\n\n  const tryCapturing = elem.addEventListener && !has(eventsToDelegate, DOMBackend.Events.parseEventType(type));\n  if (tryCapturing) {\n    this.capturingHandler = function (h) {\n      return function (evt) {\n        if (h.mode === EVENT_MODE.TBD) {\n          // must be first time we're called.\n          if (evt.bubbles) {\n            // this type of event bubbles, so don't\n            // get called again.\n            h.mode = EVENT_MODE.BUBBLING;\n            DOMBackend.Events.unbindEventCapturer(h.elem, h.type, h.capturingHandler);\n            return;\n          } else {\n            // this type of event doesn't bubble,\n            // so unbind the delegation, preventing\n            // it from ever firing.\n            h.mode = EVENT_MODE.CAPTURING;\n            DOMBackend.Events.undelegateEvents(h.elem, h.type, h.delegatedHandler);\n          }\n        }\n        h.delegatedHandler(evt);\n      };\n    }(this);\n  } else {\n    this.mode = EVENT_MODE.BUBBLING;\n  }\n};\nEventSupport.HandlerRec = HandlerRec;\nHandlerRec.prototype.bind = function () {\n  // `this.mode` may be EVENT_MODE_TBD, in which case we bind both. in\n  // this case, 'capturingHandler' is in charge of detecting the\n  // correct mode and turning off one or the other handlers.\n  if (this.mode !== EVENT_MODE.BUBBLING) {\n    DOMBackend.Events.bindEventCapturer(this.elem, this.type, this.selector || '*', this.capturingHandler);\n  }\n  if (this.mode !== EVENT_MODE.CAPTURING) DOMBackend.Events.delegateEvents(this.elem, this.type, this.selector || '*', this.delegatedHandler);\n};\nHandlerRec.prototype.unbind = function () {\n  if (this.mode !== EVENT_MODE.BUBBLING) DOMBackend.Events.unbindEventCapturer(this.elem, this.type, this.capturingHandler);\n  if (this.mode !== EVENT_MODE.CAPTURING) DOMBackend.Events.undelegateEvents(this.elem, this.type, this.delegatedHandler);\n};\nEventSupport.listen = function (element, events, selector, handler, recipient, getParentRecipient) {\n  // Prevent this method from being JITed by Safari.  Due to a\n  // presumed JIT bug in Safari -- observed in Version 7.0.6\n  // (9537.78.2) -- this method may crash the Safari render process if\n  // it is JITed.\n  // Repro: https://github.com/dgreensp/public/tree/master/safari-crash\n  try {\n    element = element;\n  } finally {}\n  const eventTypes = [];\n  events.replace(/[^ /]+/g, function (e) {\n    eventTypes.push(e);\n  });\n  const newHandlerRecs = [];\n  for (let i = 0, N = eventTypes.length; i < N; i++) {\n    const type = eventTypes[i];\n    let eventDict = element.$blaze_events;\n    if (!eventDict) eventDict = element.$blaze_events = {};\n    let info = eventDict[type];\n    if (!info) {\n      info = eventDict[type] = {};\n      info.handlers = [];\n    }\n    const handlerList = info.handlers;\n    const handlerRec = new HandlerRec(element, type, selector, handler, recipient);\n    newHandlerRecs.push(handlerRec);\n    handlerRec.bind();\n    handlerList.push(handlerRec);\n    // Move handlers of enclosing ranges to end, by unbinding and rebinding\n    // them.  In jQuery (or other DOMBackend) this causes them to fire\n    // later when the backend dispatches event handlers.\n    if (getParentRecipient) {\n      for (let r = getParentRecipient(recipient); r; r = getParentRecipient(r)) {\n        // r is an enclosing range (recipient)\n        for (let j = 0, Nj = handlerList.length; j < Nj; j++) {\n          const h = handlerList[j];\n          if (h.recipient === r) {\n            h.unbind();\n            h.bind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n            handlerList.push(h);\n            j--; // account for removed handler\n            Nj--; // don't visit appended handlers\n          }\n        }\n      }\n    }\n  }\n  return {\n    // closes over just `element` and `newHandlerRecs`\n    stop: function () {\n      const eventDict = element.$blaze_events;\n      if (!eventDict) return;\n      // newHandlerRecs has only one item unless you specify multiple\n      // event types.  If this code is slow, it's because we have to\n      // iterate over handlerList here.  Clearing a whole handlerList\n      // via stop() methods is O(N^2) in the number of handlers on\n      // an element.\n      for (let i = 0; i < newHandlerRecs.length; i++) {\n        const handlerToRemove = newHandlerRecs[i];\n        const info = eventDict[handlerToRemove.type];\n        if (!info) continue;\n        const handlerList = info.handlers;\n        for (let j = handlerList.length - 1; j >= 0; j--) {\n          if (handlerList[j] === handlerToRemove) {\n            handlerToRemove.unbind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n          }\n        }\n      }\n      newHandlerRecs.length = 0;\n    }\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"attrs.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/attrs.js                                                                                             //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet has;\nmodule.link(\"lodash.has\", {\n  default(v) {\n    has = v;\n  }\n}, 0);\nlet OrderedDict;\nmodule.link(\"meteor/ordered-dict\", {\n  OrderedDict(v) {\n    OrderedDict = v;\n  }\n}, 1);\nlet jsUrlsAllowed = false;\nBlaze._allowJavascriptUrls = function () {\n  jsUrlsAllowed = true;\n};\nBlaze._javascriptUrlsAllowed = function () {\n  return jsUrlsAllowed;\n};\n\n// An AttributeHandler object is responsible for updating a particular attribute\n// of a particular element.  AttributeHandler subclasses implement\n// browser-specific logic for dealing with particular attributes across\n// different browsers.\n//\n// To define a new type of AttributeHandler, use\n// `var FooHandler = AttributeHandler.extend({ update: function ... })`\n// where the `update` function takes arguments `(element, oldValue, value)`.\n// The `element` argument is always the same between calls to `update` on\n// the same instance.  `oldValue` and `value` are each either `null` or\n// a Unicode string of the type that might be passed to the value argument\n// of `setAttribute` (i.e. not an HTML string with character references).\n// When an AttributeHandler is installed, an initial call to `update` is\n// always made with `oldValue = null`.  The `update` method can access\n// `this.name` if the AttributeHandler class is a generic one that applies\n// to multiple attribute names.\n//\n// AttributeHandlers can store custom properties on `this`, as long as they\n// don't use the names `element`, `name`, `value`, and `oldValue`.\n//\n// AttributeHandlers can't influence how attributes appear in rendered HTML,\n// only how they are updated after materialization as DOM.\n\nAttributeHandler = function (name, value) {\n  this.name = name;\n  this.value = value;\n};\nBlaze._AttributeHandler = AttributeHandler;\nAttributeHandler.prototype.update = function (element, oldValue, value) {\n  if (value === null) {\n    if (oldValue !== null) element.removeAttribute(this.name);\n  } else {\n    element.setAttribute(this.name, value);\n  }\n};\nAttributeHandler.extend = function (options) {\n  const curType = this;\n  const subType = function AttributeHandlerSubtype(/*arguments*/\n  ) {\n    AttributeHandler.apply(this, arguments);\n  };\n  subType.prototype = new curType();\n  subType.extend = curType.extend;\n  if (options) {\n    Object.assign(subType.prototype, options);\n  }\n  return subType;\n};\n\n/// Apply the diff between the attributes of \"oldValue\" and \"value\" to \"element.\"\n//\n// Each subclass must implement a parseValue method which takes a string\n// as an input and returns an ordered dict of attributes. The keys of the dict\n// are unique identifiers (ie. css properties in the case of styles), and the\n// values are the entire attribute which will be injected into the element.\n//\n// Extended below to support classes, SVG elements and styles.\n\nBlaze._DiffingAttributeHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    if (!this.getCurrentValue || !this.setValue || !this.parseValue || !this.joinValues) throw new Error(\"Missing methods in subclass of 'DiffingAttributeHandler'\");\n    const oldAttrsMap = oldValue ? this.parseValue(oldValue) : new OrderedDict();\n    const attrsMap = value ? this.parseValue(value) : new OrderedDict();\n\n    // the current attributes on the element, which we will mutate.\n\n    const currentAttrString = this.getCurrentValue(element);\n    const currentAttrsMap = currentAttrString ? this.parseValue(currentAttrString) : new OrderedDict();\n\n    // Any outside changes to attributes we add at the end.\n    currentAttrsMap.forEach(function (value, key, i) {\n      // If the key already exists, we do not use the current value, but the new value.\n      if (attrsMap.has(key)) {\n        return;\n      }\n\n      // Key does not already exist, but it existed before. Which means it was explicitly\n      // removed, so we do not add it.\n      if (oldAttrsMap.has(key)) {\n        return;\n      }\n      attrsMap.append(key, value);\n    });\n    const values = [];\n    attrsMap.forEach(function (value, key, i) {\n      values.push(value);\n    });\n    this.setValue(element, this.joinValues(values));\n  }\n});\nconst ClassHandler = Blaze._DiffingAttributeHandler.extend({\n  // @param rawValue {String}\n  getCurrentValue: function (element) {\n    return element.className;\n  },\n  setValue: function (element, className) {\n    element.className = className;\n  },\n  parseValue: function (attrString) {\n    const tokens = new OrderedDict();\n    attrString.split(' ').forEach(function (token) {\n      if (token) {\n        // Ordered dict requires unique keys.\n        if (!tokens.has(token)) {\n          tokens.append(token, token);\n        }\n      }\n    });\n    return tokens;\n  },\n  joinValues: function (values) {\n    return values.join(' ');\n  }\n});\nconst SVGClassHandler = ClassHandler.extend({\n  getCurrentValue: function (element) {\n    return element.className.baseVal;\n  },\n  setValue: function (element, className) {\n    element.setAttribute('class', className);\n  }\n});\nconst StyleHandler = Blaze._DiffingAttributeHandler.extend({\n  getCurrentValue: function (element) {\n    return element.getAttribute('style');\n  },\n  setValue: function (element, style) {\n    if (style === '') {\n      element.removeAttribute('style');\n    } else {\n      element.setAttribute('style', style);\n    }\n  },\n  // Parse a string to produce a map from property to attribute string.\n  //\n  // Example:\n  // \"color:red; foo:12px\" produces a token {color: \"color:red\", foo:\"foo:12px\"}\n  parseValue: function (attrString) {\n    const tokens = new OrderedDict();\n\n    // Regex for parsing a css attribute declaration, taken from css-parse:\n    // https://github.com/reworkcss/css-parse/blob/7cef3658d0bba872cde05a85339034b187cb3397/index.js#L219\n    const regex = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*(?:\\'(?:\\\\\\'|.)*?\\'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+[;\\s]*/g;\n    let match = regex.exec(attrString);\n    while (match) {\n      // match[0] = entire matching string\n      // match[1] = css property\n      // Prefix the token to prevent conflicts with existing properties.\n\n      // We use the last value for the same key.\n      if (tokens.has(match[1])) {\n        tokens.remove(match[1]);\n      }\n      tokens.append(match[1], match[0].trim());\n      match = regex.exec(attrString);\n    }\n    return tokens;\n  },\n  joinValues: function (values) {\n    // TODO: Assure that there is always ; between values. But what is an example where it breaks?\n    return values.join(' ');\n  }\n});\nconst BooleanHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const name = this.name;\n    if (value == null) {\n      if (oldValue != null) element[name] = false;\n    } else {\n      element[name] = true;\n    }\n  }\n});\nconst DOMPropertyHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const name = this.name;\n    if (value !== element[name]) element[name] = value;\n  }\n});\n\n// attributes of the type 'xlink:something' should be set using\n// the correct namespace in order to work\nconst XlinkHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const NS = 'http://www.w3.org/1999/xlink';\n    if (value === null) {\n      if (oldValue !== null) element.removeAttributeNS(NS, this.name);\n    } else {\n      element.setAttributeNS(NS, this.name, this.value);\n    }\n  }\n});\n\n// cross-browser version of `instanceof SVGElement`\nconst isSVGElement = function (elem) {\n  return 'ownerSVGElement' in elem;\n};\nconst isUrlAttribute = function (tagName, attrName) {\n  // Compiled from http://www.w3.org/TR/REC-html40/index/attributes.html\n  // and\n  // http://www.w3.org/html/wg/drafts/html/master/index.html#attributes-1\n  const urlAttrs = {\n    FORM: ['action'],\n    BODY: ['background'],\n    BLOCKQUOTE: ['cite'],\n    Q: ['cite'],\n    DEL: ['cite'],\n    INS: ['cite'],\n    OBJECT: ['classid', 'codebase', 'data', 'usemap'],\n    APPLET: ['codebase'],\n    A: ['href'],\n    AREA: ['href'],\n    LINK: ['href'],\n    IMG: ['longdesc', 'src', 'usemap'],\n    FRAME: ['longdesc', 'src'],\n    IFRAME: ['longdesc', 'src'],\n    HEAD: ['profile'],\n    SCRIPT: ['src'],\n    INPUT: ['src', 'usemap', 'formaction'],\n    BUTTON: ['formaction'],\n    BASE: ['href'],\n    MENUITEM: ['icon'],\n    HTML: ['manifest'],\n    VIDEO: ['poster']\n  };\n  if (attrName === 'itemid') {\n    return true;\n  }\n  const urlAttrNames = urlAttrs[tagName] || [];\n  return urlAttrNames.includes(attrName);\n};\n\n// To get the protocol for a URL, we let the browser normalize it for\n// us, by setting it as the href for an anchor tag and then reading out\n// the 'protocol' property.\nlet anchorForNormalization;\nif (Meteor.isClient) {\n  anchorForNormalization = document.createElement('A');\n}\nconst getUrlProtocol = function (url) {\n  if (Meteor.isClient) {\n    anchorForNormalization.href = url;\n    return (anchorForNormalization.protocol || \"\").toLowerCase();\n  } else {\n    throw new Error('getUrlProtocol not implemented on the server');\n  }\n};\n\n// UrlHandler is an attribute handler for all HTML attributes that take\n// URL values. It disallows javascript: URLs, unless\n// Blaze._allowJavascriptUrls() has been called. To detect javascript:\n// urls, we set the attribute on a dummy anchor element and then read\n// out the 'protocol' property of the attribute.\nconst origUpdate = AttributeHandler.prototype.update;\nconst UrlHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const self = this;\n    const args = arguments;\n    if (Blaze._javascriptUrlsAllowed()) {\n      origUpdate.apply(self, args);\n    } else {\n      const isJavascriptProtocol = getUrlProtocol(value) === \"javascript:\";\n      const isVBScriptProtocol = getUrlProtocol(value) === \"vbscript:\";\n      if (isJavascriptProtocol || isVBScriptProtocol) {\n        Blaze._warn(\"URLs that use the 'javascript:' or 'vbscript:' protocol are not \" + \"allowed in URL attribute values. \" + \"Call Blaze._allowJavascriptUrls() \" + \"to enable them.\");\n        origUpdate.apply(self, [element, oldValue, null]);\n      } else {\n        origUpdate.apply(self, args);\n      }\n    }\n  }\n});\n\n// XXX make it possible for users to register attribute handlers!\nBlaze._makeAttributeHandler = function (elem, name, value) {\n  // generally, use setAttribute but certain attributes need to be set\n  // by directly setting a JavaScript property on the DOM element.\n  if (name === 'class') {\n    if (isSVGElement(elem)) {\n      return new SVGClassHandler(name, value);\n    } else {\n      return new ClassHandler(name, value);\n    }\n  } else if (name === 'style') {\n    return new StyleHandler(name, value);\n  } else if (elem.tagName === 'OPTION' && name === 'selected' || elem.tagName === 'INPUT' && name === 'checked' || elem.tagName === 'VIDEO' && name === 'muted') {\n    return new BooleanHandler(name, value);\n  } else if ((elem.tagName === 'TEXTAREA' || elem.tagName === 'INPUT') && name === 'value') {\n    // internally, TEXTAREAs tracks their value in the 'value'\n    // attribute just like INPUTs.\n    return new DOMPropertyHandler(name, value);\n  } else if (name.substring(0, 6) === 'xlink:') {\n    return new XlinkHandler(name.substring(6), value);\n  } else if (isUrlAttribute(elem.tagName, name)) {\n    return new UrlHandler(name, value);\n  } else {\n    return new AttributeHandler(name, value);\n  }\n};\nElementAttributesUpdater = function (elem) {\n  this.elem = elem;\n  this.handlers = {};\n};\n\n// Update attributes on `elem` to the dictionary `attrs`, whose\n// values are strings.\nElementAttributesUpdater.prototype.update = function (newAttrs) {\n  const elem = this.elem;\n  const handlers = this.handlers;\n  Object.getOwnPropertyNames(handlers).forEach(k => {\n    if (!has(newAttrs, k)) {\n      // remove attributes (and handlers) for attribute names\n      // that don't exist as keys of `newAttrs` and so won't\n      // be visited when traversing it.  (Attributes that\n      // exist in the `newAttrs` object but are `null`\n      // are handled later.)\n      const handler = handlers[k];\n      const oldValue = handler.value;\n      handler.value = null;\n      handler.update(elem, oldValue, null);\n      delete handlers[k];\n    }\n  });\n  Object.getOwnPropertyNames(newAttrs).forEach(k => {\n    let handler = null;\n    let oldValue = null;\n    const value = newAttrs[k];\n    if (!has(handlers, k)) {\n      if (value !== null) {\n        // make new handler\n        handler = Blaze._makeAttributeHandler(elem, k, value);\n        handlers[k] = handler;\n      }\n    } else {\n      handler = handlers[k];\n      oldValue = handler.value;\n    }\n    if (oldValue !== value) {\n      handler.value = value;\n      handler.update(elem, oldValue, value);\n      if (value === null) delete handlers[k];\n    }\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"materializer.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/materializer.js                                                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n// Turns HTMLjs into DOM nodes and DOMRanges.\n//\n// - `htmljs`: the value to materialize, which may be any of the htmljs\n//   types (Tag, CharRef, Comment, Raw, array, string, boolean, number,\n//   null, or undefined) or a View or Template (which will be used to\n//   construct a View).\n// - `intoArray`: the array of DOM nodes and DOMRanges to push the output\n//   into (required)\n// - `parentView`: the View we are materializing content for (optional)\n// - `_existingWorkStack`: optional argument, only used for recursive\n//   calls when there is some other _materializeDOM on the call stack.\n//   If _materializeDOM called your function and passed in a workStack,\n//   pass it back when you call _materializeDOM (such as from a workStack\n//   task).\n//\n// Returns `intoArray`, which is especially useful if you pass in `[]`.\nBlaze._materializeDOM = function (htmljs, intoArray, parentView, _existingWorkStack) {\n  // In order to use fewer stack frames, materializeDOMInner can push\n  // tasks onto `workStack`, and they will be popped off\n  // and run, last first, after materializeDOMInner returns.  The\n  // reason we use a stack instead of a queue is so that we recurse\n  // depth-first, doing newer tasks first.\n  const workStack = _existingWorkStack || [];\n  materializeDOMInner(htmljs, intoArray, parentView, workStack);\n  if (!_existingWorkStack) {\n    // We created the work stack, so we are responsible for finishing\n    // the work.  Call each \"task\" function, starting with the top\n    // of the stack.\n    while (workStack.length) {\n      // Note that running task() may push new items onto workStack.\n      const task = workStack.pop();\n      task();\n    }\n  }\n  return intoArray;\n};\nconst materializeDOMInner = function (htmljs, intoArray, parentView, workStack) {\n  if (htmljs == null) {\n    // null or undefined\n    return;\n  }\n  switch (typeof htmljs) {\n    case 'string':\n    case 'boolean':\n    case 'number':\n      intoArray.push(document.createTextNode(String(htmljs)));\n      return;\n    case 'object':\n      if (htmljs.htmljsType) {\n        switch (htmljs.htmljsType) {\n          case HTML.Tag.htmljsType:\n            intoArray.push(materializeTag(htmljs, parentView, workStack));\n            return;\n          case HTML.CharRef.htmljsType:\n            intoArray.push(document.createTextNode(htmljs.str));\n            return;\n          case HTML.Comment.htmljsType:\n            intoArray.push(document.createComment(htmljs.sanitizedValue));\n            return;\n          case HTML.Raw.htmljsType:\n            // Get an array of DOM nodes by using the browser's HTML parser\n            // (like innerHTML).\n            const nodes = Blaze._DOMBackend.parseHTML(htmljs.value);\n            for (let i = 0; i < nodes.length; i++) intoArray.push(nodes[i]);\n            return;\n        }\n      } else if (HTML.isArray(htmljs)) {\n        for (let i = htmljs.length - 1; i >= 0; i--) {\n          workStack.push(Blaze._bind(Blaze._materializeDOM, null, htmljs[i], intoArray, parentView, workStack));\n        }\n        return;\n      } else {\n        // Try to construct a `Blaze.View` out of the object. If it works...\n        if (isPromiseLike(htmljs)) {\n          htmljs = Blaze._Await(htmljs);\n        } else if (htmljs instanceof Blaze.Template) {\n          htmljs = htmljs.constructView();\n        }\n\n        // ...materialize it.\n        if (htmljs instanceof Blaze.View) {\n          Blaze._materializeView(htmljs, parentView, workStack, intoArray);\n          return;\n        }\n      }\n  }\n  throw new Error(\"Unexpected object in htmljs: \" + htmljs);\n};\nconst isPromiseLike = x => !!x && typeof x.then === 'function';\nfunction then(maybePromise, fn) {\n  if (isPromiseLike(maybePromise)) {\n    maybePromise.then(fn, Blaze._reportException);\n  } else {\n    fn(maybePromise);\n  }\n}\nfunction waitForAllAttributes(attrs) {\n  // Non-object attrs (e.g., `null`) are ignored.\n  if (!attrs || attrs !== Object(attrs)) {\n    return {};\n  }\n\n  // Combined attributes, e.g., `<img {{x}} {{y}}>`.\n  if (Array.isArray(attrs)) {\n    const mapped = attrs.map(waitForAllAttributes);\n    return mapped.some(isPromiseLike) ? Promise.all(mapped) : mapped;\n  }\n\n  // Singular async attributes, e.g., `<img {{x}}>`.\n  if (isPromiseLike(attrs)) {\n    return attrs.then(waitForAllAttributes, Blaze._reportExceptionAndThrow);\n  }\n\n  // Singular sync attributes, with potentially async properties.\n  const promises = [];\n  for (const [key, value] of Object.entries(attrs)) {\n    if (isPromiseLike(value)) {\n      promises.push(value.then(value => {\n        attrs[key] = value;\n      }, Blaze._reportExceptionAndThrow));\n    } else if (Array.isArray(value)) {\n      value.forEach((element, index) => {\n        if (isPromiseLike(element)) {\n          promises.push(element.then(element => {\n            value[index] = element;\n          }, Blaze._reportExceptionAndThrow));\n        }\n      });\n    }\n  }\n\n  // If any of the properties were async, lift the `Promise`.\n  return promises.length ? Promise.all(promises).then(() => attrs, Blaze._reportExceptionAndThrow) : attrs;\n}\nconst materializeTag = function (tag, parentView, workStack) {\n  const tagName = tag.tagName;\n  let elem;\n  if ((HTML.isKnownSVGElement(tagName) || isSVGAnchor(tag)) && document.createElementNS) {\n    // inline SVG\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  } else {\n    // normal elements\n    elem = document.createElement(tagName);\n  }\n  let rawAttrs = tag.attrs;\n  let children = tag.children;\n  if (tagName === 'textarea' && tag.children.length && !(rawAttrs && 'value' in rawAttrs)) {\n    // Provide very limited support for TEXTAREA tags with children\n    // rather than a \"value\" attribute.\n    // Reactivity in the form of Views nested in the tag's children\n    // won't work.  Compilers should compile textarea contents into\n    // the \"value\" attribute of the tag, wrapped in a function if there\n    // is reactivity.\n    if (typeof rawAttrs === 'function' || HTML.isArray(rawAttrs)) {\n      throw new Error(\"Can't have reactive children of TEXTAREA node; \" + \"use the 'value' attribute instead.\");\n    }\n    rawAttrs = Object.assign({}, rawAttrs || null);\n    rawAttrs.value = Blaze._expand(children, parentView);\n    children = [];\n  }\n  if (rawAttrs) {\n    const attrUpdater = new ElementAttributesUpdater(elem);\n    const updateAttributes = function () {\n      const expandedAttrs = Blaze._expandAttributes(rawAttrs, parentView);\n      then(waitForAllAttributes(expandedAttrs), awaitedAttrs => {\n        const flattenedAttrs = HTML.flattenAttributes(awaitedAttrs);\n        const stringAttrs = {};\n        Object.keys(flattenedAttrs).forEach(attrName => {\n          // map `null`, `undefined`, and `false` to null, which is important\n          // so that attributes with nully values are considered absent.\n          // stringify anything else (e.g. strings, booleans, numbers including 0).\n          if (flattenedAttrs[attrName] == null || flattenedAttrs[attrName] === false) stringAttrs[attrName] = null;else stringAttrs[attrName] = Blaze._toText(flattenedAttrs[attrName], parentView, HTML.TEXTMODE.STRING);\n        });\n        attrUpdater.update(stringAttrs);\n      });\n    };\n    let updaterComputation;\n    if (parentView) {\n      updaterComputation = parentView.autorun(updateAttributes, undefined, 'updater');\n    } else {\n      updaterComputation = Tracker.nonreactive(function () {\n        return Tracker.autorun(function () {\n          Tracker._withCurrentView(parentView, updateAttributes);\n        });\n      });\n    }\n    Blaze._DOMBackend.Teardown.onElementTeardown(elem, function attrTeardown() {\n      updaterComputation.stop();\n    });\n  }\n  if (children.length) {\n    const childNodesAndRanges = [];\n    // push this function first so that it's done last\n    workStack.push(function () {\n      for (let i = 0; i < childNodesAndRanges.length; i++) {\n        const x = childNodesAndRanges[i];\n        if (x instanceof Blaze._DOMRange) x.attach(elem);else elem.appendChild(x);\n      }\n    });\n    // now push the task that calculates childNodesAndRanges\n    workStack.push(Blaze._bind(Blaze._materializeDOM, null, children, childNodesAndRanges, parentView, workStack));\n  }\n  return elem;\n};\nconst isSVGAnchor = function (node) {\n  // We generally aren't able to detect SVG <a> elements because\n  // if \"A\" were in our list of known svg element names, then all\n  // <a> nodes would be created using\n  // `document.createElementNS`. But in the special case of <a\n  // xlink:href=\"...\">, we can at least detect that attribute and\n  // create an SVG <a> tag in that case.\n  //\n  // However, we still have a general problem of knowing when to\n  // use document.createElementNS and when to use\n  // document.createElement; for example, font tags will always\n  // be created as SVG elements which can cause other\n  // problems. #1977\n  return node.tagName === \"a\" && node.attrs && node.attrs[\"xlink:href\"] !== undefined;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"exceptions.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/exceptions.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet debugFunc;\n\n// We call into user code in many places, and it's nice to catch exceptions\n// propagated from user code immediately so that the whole system doesn't just\n// break.  Catching exceptions is easy; reporting them is hard.  This helper\n// reports exceptions.\n//\n// Usage:\n//\n// ```\n// try {\n//   // ... someStuff ...\n// } catch (e) {\n//   reportUIException(e);\n// }\n// ```\n//\n// An optional second argument overrides the default message.\n\n// Set this to `true` to cause `reportException` to throw\n// the next exception rather than reporting it.  This is\n// useful in unit tests that test error messages.\nBlaze._throwNextException = false;\nBlaze._reportException = function (e, msg) {\n  if (Blaze._throwNextException) {\n    Blaze._throwNextException = false;\n    throw e;\n  }\n  if (!debugFunc)\n    // adapted from Tracker\n    debugFunc = function () {\n      return typeof Meteor !== \"undefined\" ? Meteor._debug : typeof console !== \"undefined\" && console.log ? console.log : function () {};\n    };\n\n  // In Chrome, `e.stack` is a multiline string that starts with the message\n  // and contains a stack trace.  Furthermore, `console.log` makes it clickable.\n  // `console.log` supplies the space between the two arguments.\n  debugFunc()(msg || 'Exception caught in template:', e.stack || e.message || e);\n};\n\n// It's meant to be used in `Promise` chains to report the error while not\n// \"swallowing\" it (i.e., the chain will still reject).\nBlaze._reportExceptionAndThrow = function (error) {\n  Blaze._reportException(error);\n  throw error;\n};\nBlaze._wrapCatchingExceptions = function (f, where) {\n  if (typeof f !== 'function') return f;\n  return function () {\n    try {\n      for (var _len = arguments.length, _arguments = new Array(_len), _key = 0; _key < _len; _key++) {\n        _arguments[_key] = arguments[_key];\n      }\n      return f.apply(this, _arguments);\n    } catch (e) {\n      Blaze._reportException(e, 'Exception in ' + where + ':');\n    }\n  };\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"view.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/view.js                                                                                              //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet HTML;\nmodule.link(\"meteor/htmljs\", {\n  HTML(v) {\n    HTML = v;\n  }\n}, 0);\n/**\n * A binding is either `undefined` (pending), `{ error }` (rejected), or\n * `{ value }` (resolved). Synchronous values are immediately resolved (i.e.,\n * `{ value }` is used). The other states are reserved for asynchronous bindings\n * (i.e., values wrapped with `Promise`s).\n * @typedef {{ error: unknown } | { value: unknown } | undefined} Binding\n */\n\n/**\n * @class\n * @summary Constructor for a View, which represents a reactive region of DOM.\n * @locus Client\n * @param {String} [name] Optional.  A name for this type of View.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  In this function, `this` is bound to the View.\n */\nBlaze.View = function (name, render) {\n  if (!(this instanceof Blaze.View))\n    // called without `new`\n    return new Blaze.View(name, render);\n  if (typeof name === 'function') {\n    // omitted \"name\" argument\n    render = name;\n    name = '';\n  }\n  this.name = name;\n  this._render = render;\n  this._callbacks = {\n    created: null,\n    rendered: null,\n    destroyed: null\n  };\n\n  // Setting all properties here is good for readability,\n  // and also may help Chrome optimize the code by keeping\n  // the View object from changing shape too much.\n  this.isCreated = false;\n  this._isCreatedForExpansion = false;\n  this.isRendered = false;\n  this._isAttached = false;\n  this.isDestroyed = false;\n  this._isInRender = false;\n  this.parentView = null;\n  this._domrange = null;\n  // This flag is normally set to false except for the cases when view's parent\n  // was generated as part of expanding some syntactic sugar expressions or\n  // methods.\n  // Ex.: Blaze.renderWithData is an equivalent to creating a view with regular\n  // Blaze.render and wrapping it into {{#with data}}{{/with}} view. Since the\n  // users don't know anything about these generated parent views, Blaze needs\n  // this information to be available on views to make smarter decisions. For\n  // example: removing the generated parent view with the view on Blaze.remove.\n  this._hasGeneratedParent = false;\n  // Bindings accessible to children views (via view.lookup('name')) within the\n  // closest template view.\n  /** @type {Record<string, ReactiveVar<Binding>>} */\n  this._scopeBindings = {};\n  this.renderCount = 0;\n};\nBlaze.View.prototype._render = function () {\n  return null;\n};\nBlaze.View.prototype.onViewCreated = function (cb) {\n  this._callbacks.created = this._callbacks.created || [];\n  this._callbacks.created.push(cb);\n};\nBlaze.View.prototype._onViewRendered = function (cb) {\n  this._callbacks.rendered = this._callbacks.rendered || [];\n  this._callbacks.rendered.push(cb);\n};\nBlaze.View.prototype.onViewReady = function (cb) {\n  const self = this;\n  const fire = function () {\n    Tracker.afterFlush(function () {\n      if (!self.isDestroyed) {\n        Blaze._withCurrentView(self, function () {\n          cb.call(self);\n        });\n      }\n    });\n  };\n  self._onViewRendered(function onViewRendered() {\n    if (self.isDestroyed) return;\n    if (!self._domrange.attached) self._domrange.onAttached(fire);else fire();\n  });\n};\nBlaze.View.prototype.onViewDestroyed = function (cb) {\n  this._callbacks.destroyed = this._callbacks.destroyed || [];\n  this._callbacks.destroyed.push(cb);\n};\nBlaze.View.prototype.removeViewDestroyedListener = function (cb) {\n  const destroyed = this._callbacks.destroyed;\n  if (!destroyed) return;\n  const index = destroyed.lastIndexOf(cb);\n  if (index !== -1) {\n    // XXX You'd think the right thing to do would be splice, but _fireCallbacks\n    // gets sad if you remove callbacks while iterating over the list.  Should\n    // change this to use callback-hook or EventEmitter or something else that\n    // properly supports removal.\n    destroyed[index] = null;\n  }\n};\n\n/// View#autorun(func)\n///\n/// Sets up a Tracker autorun that is \"scoped\" to this View in two\n/// important ways: 1) Blaze.currentView is automatically set\n/// on every re-run, and 2) the autorun is stopped when the\n/// View is destroyed.  As with Tracker.autorun, the first run of\n/// the function is immediate, and a Computation object that can\n/// be used to stop the autorun is returned.\n///\n/// View#autorun is meant to be called from View callbacks like\n/// onViewCreated, or from outside the rendering process.  It may not\n/// be called before the onViewCreated callbacks are fired (too early),\n/// or from a render() method (too confusing).\n///\n/// Typically, autoruns that update the state\n/// of the View (as in Blaze.With) should be started from an onViewCreated\n/// callback.  Autoruns that update the DOM should be started\n/// from either onViewCreated (guarded against the absence of\n/// view._domrange), or onViewReady.\nBlaze.View.prototype.autorun = function (f, _inViewScope, displayName) {\n  const self = this;\n\n  // The restrictions on when View#autorun can be called are in order\n  // to avoid bad patterns, like creating a Blaze.View and immediately\n  // calling autorun on it.  A freshly created View is not ready to\n  // have logic run on it; it doesn't have a parentView, for example.\n  // It's when the View is materialized or expanded that the onViewCreated\n  // handlers are fired and the View starts up.\n  //\n  // Letting the render() method call `this.autorun()` is problematic\n  // because of re-render.  The best we can do is to stop the old\n  // autorun and start a new one for each render, but that's a pattern\n  // we try to avoid internally because it leads to helpers being\n  // called extra times, in the case where the autorun causes the\n  // view to re-render (and thus the autorun to be torn down and a\n  // new one established).\n  //\n  // We could lift these restrictions in various ways.  One interesting\n  // idea is to allow you to call `view.autorun` after instantiating\n  // `view`, and automatically wrap it in `view.onViewCreated`, deferring\n  // the autorun so that it starts at an appropriate time.  However,\n  // then we can't return the Computation object to the caller, because\n  // it doesn't exist yet.\n  if (!self.isCreated) {\n    throw new Error(\"View#autorun must be called from the created callback at the earliest\");\n  }\n  if (this._isInRender) {\n    throw new Error(\"Can't call View#autorun from inside render(); try calling it from the created or rendered callback\");\n  }\n  const templateInstanceFunc = Blaze.Template._currentTemplateInstanceFunc;\n  const func = function viewAutorun(c) {\n    return Blaze._withCurrentView(_inViewScope || self, function () {\n      return Blaze.Template._withTemplateInstanceFunc(templateInstanceFunc, function () {\n        return f.call(self, c);\n      });\n    });\n  };\n\n  // Give the autorun function a better name for debugging and profiling.\n  // The `displayName` property is not part of the spec but browsers like Chrome\n  // and Firefox prefer it in debuggers over the name function was declared by.\n  func.displayName = (self.name || 'anonymous') + ':' + (displayName || 'anonymous');\n  const comp = Tracker.autorun(func);\n  const stopComputation = function () {\n    comp.stop();\n  };\n  self.onViewDestroyed(stopComputation);\n  comp.onStop(function () {\n    self.removeViewDestroyedListener(stopComputation);\n  });\n  return comp;\n};\nBlaze.View.prototype._errorIfShouldntCallSubscribe = function () {\n  const self = this;\n  if (!self.isCreated) {\n    throw new Error(\"View#subscribe must be called from the created callback at the earliest\");\n  }\n  if (self._isInRender) {\n    throw new Error(\"Can't call View#subscribe from inside render(); try calling it from the created or rendered callback\");\n  }\n  if (self.isDestroyed) {\n    throw new Error(\"Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.\");\n  }\n};\n\n/**\n * Just like Blaze.View#autorun, but with Meteor.subscribe instead of\n * Tracker.autorun. Stop the subscription when the view is destroyed.\n * @return {SubscriptionHandle} A handle to the subscription so that you can\n * see if it is ready, or stop it manually\n */\nBlaze.View.prototype.subscribe = function (args, options) {\n  const self = this;\n  options = options || {};\n  self._errorIfShouldntCallSubscribe();\n  let subHandle;\n  if (options.connection) {\n    subHandle = options.connection.subscribe.apply(options.connection, args);\n  } else {\n    subHandle = Meteor.subscribe.apply(Meteor, args);\n  }\n  self.onViewDestroyed(function () {\n    subHandle.stop();\n  });\n  return subHandle;\n};\nBlaze.View.prototype.firstNode = function () {\n  if (!this._isAttached) throw new Error(\"View must be attached before accessing its DOM\");\n  return this._domrange.firstNode();\n};\nBlaze.View.prototype.lastNode = function () {\n  if (!this._isAttached) throw new Error(\"View must be attached before accessing its DOM\");\n  return this._domrange.lastNode();\n};\nBlaze._fireCallbacks = function (view, which) {\n  Blaze._withCurrentView(view, function () {\n    Tracker.nonreactive(function fireCallbacks() {\n      const cbs = view._callbacks[which];\n      for (let i = 0, N = cbs && cbs.length; i < N; i++) cbs[i] && cbs[i].call(view);\n    });\n  });\n};\nBlaze._createView = function (view, parentView, forExpansion) {\n  if (view.isCreated) throw new Error(\"Can't render the same View twice\");\n  view.parentView = parentView || null;\n  view.isCreated = true;\n  if (forExpansion) view._isCreatedForExpansion = true;\n  Blaze._fireCallbacks(view, 'created');\n};\nconst doFirstRender = function (view, initialContent) {\n  const domrange = new Blaze._DOMRange(initialContent);\n  view._domrange = domrange;\n  domrange.view = view;\n  view.isRendered = true;\n  Blaze._fireCallbacks(view, 'rendered');\n  let teardownHook = null;\n  domrange.onAttached(function attached(range, element) {\n    view._isAttached = true;\n    teardownHook = Blaze._DOMBackend.Teardown.onElementTeardown(element, function teardown() {\n      Blaze._destroyView(view, true /* _skipNodes */);\n    });\n  });\n\n  // tear down the teardown hook\n  view.onViewDestroyed(function () {\n    if (teardownHook) teardownHook.stop();\n    teardownHook = null;\n  });\n  return domrange;\n};\n\n// Take an uncreated View `view` and create and render it to DOM,\n// setting up the autorun that updates the View.  Returns a new\n// DOMRange, which has been associated with the View.\n//\n// The private arguments `_workStack` and `_intoArray` are passed in\n// by Blaze._materializeDOM and are only present for recursive calls\n// (when there is some other _materializeView on the stack).  If\n// provided, then we avoid the mutual recursion of calling back into\n// Blaze._materializeDOM so that deep View hierarchies don't blow the\n// stack.  Instead, we push tasks onto workStack for the initial\n// rendering and subsequent setup of the View, and they are done after\n// we return.  When there is a _workStack, we do not return the new\n// DOMRange, but instead push it into _intoArray from a _workStack\n// task.\nBlaze._materializeView = function (view, parentView, _workStack, _intoArray) {\n  Blaze._createView(view, parentView);\n  let domrange;\n  let lastHtmljs;\n  // We don't expect to be called in a Computation, but just in case,\n  // wrap in Tracker.nonreactive.\n  Tracker.nonreactive(function () {\n    view.autorun(function doRender(c) {\n      // `view.autorun` sets the current view.\n      view.renderCount = view.renderCount + 1;\n      view._isInRender = true;\n      // Any dependencies that should invalidate this Computation come\n      // from this line:\n      const htmljs = view._render();\n      view._isInRender = false;\n      if (!c.firstRun && !Blaze._isContentEqual(lastHtmljs, htmljs)) {\n        Tracker.nonreactive(function doMaterialize() {\n          // re-render\n          const rangesAndNodes = Blaze._materializeDOM(htmljs, [], view);\n          domrange.setMembers(rangesAndNodes);\n          Blaze._fireCallbacks(view, 'rendered');\n        });\n      }\n      lastHtmljs = htmljs;\n\n      // Causes any nested views to stop immediately, not when we call\n      // `setMembers` the next time around the autorun.  Otherwise,\n      // helpers in the DOM tree to be replaced might be scheduled\n      // to re-run before we have a chance to stop them.\n      Tracker.onInvalidate(function () {\n        if (domrange) {\n          domrange.destroyMembers();\n        }\n      });\n    }, undefined, 'materialize');\n\n    // first render.  lastHtmljs is the first htmljs.\n    let initialContents;\n    if (!_workStack) {\n      initialContents = Blaze._materializeDOM(lastHtmljs, [], view);\n      domrange = doFirstRender(view, initialContents);\n      initialContents = null; // help GC because we close over this scope a lot\n    } else {\n      // We're being called from Blaze._materializeDOM, so to avoid\n      // recursion and save stack space, provide a description of the\n      // work to be done instead of doing it.  Tasks pushed onto\n      // _workStack will be done in LIFO order after we return.\n      // The work will still be done within a Tracker.nonreactive,\n      // because it will be done by some call to Blaze._materializeDOM\n      // (which is always called in a Tracker.nonreactive).\n      initialContents = [];\n      // push this function first so that it happens last\n      _workStack.push(function () {\n        domrange = doFirstRender(view, initialContents);\n        initialContents = null; // help GC because of all the closures here\n        _intoArray.push(domrange);\n      });\n      // now push the task that calculates initialContents\n      _workStack.push(Blaze._bind(Blaze._materializeDOM, null, lastHtmljs, initialContents, view, _workStack));\n    }\n  });\n  if (!_workStack) {\n    return domrange;\n  } else {\n    return null;\n  }\n};\n\n// Expands a View to HTMLjs, calling `render` recursively on all\n// Views and evaluating any dynamic attributes.  Calls the `created`\n// callback, but not the `materialized` or `rendered` callbacks.\n// Destroys the view immediately, unless called in a Tracker Computation,\n// in which case the view will be destroyed when the Computation is\n// invalidated.  If called in a Tracker Computation, the result is a\n// reactive string; that is, the Computation will be invalidated\n// if any changes are made to the view or subviews that might affect\n// the HTML.\nBlaze._expandView = function (view, parentView) {\n  Blaze._createView(view, parentView, true /*forExpansion*/);\n  view._isInRender = true;\n  const htmljs = Blaze._withCurrentView(view, function () {\n    return view._render();\n  });\n  view._isInRender = false;\n  const result = Blaze._expand(htmljs, view);\n  if (Tracker.active) {\n    Tracker.onInvalidate(function () {\n      Blaze._destroyView(view);\n    });\n  } else {\n    Blaze._destroyView(view);\n  }\n  return result;\n};\n\n// Options: `parentView`\nBlaze._HTMLJSExpander = HTML.TransformingVisitor.extend();\nBlaze._HTMLJSExpander.def({\n  visitObject: function (x) {\n    if (x instanceof Blaze.Template) x = x.constructView();\n    if (x instanceof Blaze.View) return Blaze._expandView(x, this.parentView);\n\n    // this will throw an error; other objects are not allowed!\n    return HTML.TransformingVisitor.prototype.visitObject.call(this, x);\n  },\n  visitAttributes: function (attrs) {\n    // expand dynamic attributes\n    if (typeof attrs === 'function') attrs = Blaze._withCurrentView(this.parentView, attrs);\n\n    // call super (e.g. for case where `attrs` is an array)\n    return HTML.TransformingVisitor.prototype.visitAttributes.call(this, attrs);\n  },\n  visitAttribute: function (name, value, tag) {\n    // expand attribute values that are functions.  Any attribute value\n    // that contains Views must be wrapped in a function.\n    if (typeof value === 'function') value = Blaze._withCurrentView(this.parentView, value);\n    return HTML.TransformingVisitor.prototype.visitAttribute.call(this, name, value, tag);\n  }\n});\n\n// Return Blaze.currentView, but only if it is being rendered\n// (i.e. we are in its render() method).\nconst currentViewIfRendering = function () {\n  const view = Blaze.currentView;\n  return view && view._isInRender ? view : null;\n};\nBlaze._expand = function (htmljs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return new Blaze._HTMLJSExpander({\n    parentView: parentView\n  }).visit(htmljs);\n};\nBlaze._expandAttributes = function (attrs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  const expanded = new Blaze._HTMLJSExpander({\n    parentView: parentView\n  }).visitAttributes(attrs);\n  return expanded || {};\n};\nBlaze._destroyView = function (view, _skipNodes) {\n  if (view.isDestroyed) return;\n  view.isDestroyed = true;\n\n  // Destroy views and elements recursively.  If _skipNodes,\n  // only recurse up to views, not elements, for the case where\n  // the backend (jQuery) is recursing over the elements already.\n\n  if (view._domrange) view._domrange.destroyMembers(_skipNodes);\n\n  // XXX: fire callbacks after potential members are destroyed\n  // otherwise it's tracker.flush will cause the above line will\n  // not be called and their views won't be destroyed\n  // Involved issues: DOMRange \"Must be attached\" error, mem leak\n\n  Blaze._fireCallbacks(view, 'destroyed');\n};\nBlaze._destroyNode = function (node) {\n  if (node.nodeType === 1) Blaze._DOMBackend.Teardown.tearDownElement(node);\n};\n\n// Are the HTMLjs entities `a` and `b` the same?  We could be\n// more elaborate here but the point is to catch the most basic\n// cases.\nBlaze._isContentEqual = function (a, b) {\n  if (a instanceof HTML.Raw) {\n    return b instanceof HTML.Raw && a.value === b.value;\n  } else if (a == null) {\n    return b == null;\n  } else {\n    return a === b && (typeof a === 'number' || typeof a === 'boolean' || typeof a === 'string');\n  }\n};\n\n/**\n * @summary The View corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @type {Blaze.View}\n */\nBlaze.currentView = null;\n\n/**\n * @template T\n * @param {Blaze.View} view\n * @param {function(): T} func\n * @returns {T}\n */\nBlaze._withCurrentView = function (view, func) {\n  const oldView = Blaze.currentView;\n  try {\n    Blaze.currentView = view;\n    return func();\n  } finally {\n    Blaze.currentView = oldView;\n  }\n};\n\n// Blaze.render publicly takes a View or a Template.\n// Privately, it takes any HTMLJS (extended with Views and Templates)\n// except null or undefined, or a function that returns any extended\n// HTMLJS.\nconst checkRenderContent = function (content) {\n  if (content === null) throw new Error(\"Can't render null\");\n  if (typeof content === 'undefined') throw new Error(\"Can't render undefined\");\n  if (content instanceof Blaze.View || content instanceof Blaze.Template || typeof content === 'function') return;\n  try {\n    // Throw if content doesn't look like HTMLJS at the top level\n    // (i.e. verify that this is an HTML.Tag, or an array,\n    // or a primitive, etc.)\n    new HTML.Visitor().visit(content);\n  } catch (e) {\n    // Make error message suitable for public API\n    throw new Error(\"Expected Template or View\");\n  }\n};\n\n// For Blaze.render and Blaze.toHTML, take content and\n// wrap it in a View, unless it's a single View or\n// Template already.\nconst contentAsView = function (content) {\n  checkRenderContent(content);\n  if (content instanceof Blaze.Template) {\n    return content.constructView();\n  } else if (content instanceof Blaze.View) {\n    return content;\n  } else {\n    let func = content;\n    if (typeof func !== 'function') {\n      func = function () {\n        return content;\n      };\n    }\n    return Blaze.View('render', func);\n  }\n};\n\n// For Blaze.renderWithData and Blaze.toHTMLWithData, wrap content\n// in a function, if necessary, so it can be a content arg to\n// a Blaze.With.\nconst contentAsFunc = function (content) {\n  checkRenderContent(content);\n  if (typeof content !== 'function') {\n    return function () {\n      return content;\n    };\n  } else {\n    return content;\n  }\n};\nBlaze.__rootViews = [];\n\n/**\n * @summary Renders a template or View to DOM nodes and inserts it into the DOM, returning a rendered [View](#Blaze-View) which can be passed to [`Blaze.remove`](#Blaze-remove).\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.  If a template, a View object is [constructed](#template_constructview).  If a View, it must be an unrendered View, which becomes a rendered View and is returned.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.render = function (content, parentElement, nextNode, parentView) {\n  if (!parentElement) {\n    Blaze._warn(\"Blaze.render without a parent element is deprecated. \" + \"You must specify where to insert the rendered content.\");\n  }\n  if (nextNode instanceof Blaze.View) {\n    // handle omitted nextNode\n    parentView = nextNode;\n    nextNode = null;\n  }\n\n  // parentElement must be a DOM node. in particular, can't be the\n  // result of a call to `$`. Can't check if `parentElement instanceof\n  // Node` since 'Node' is undefined in IE8.\n  if (parentElement && typeof parentElement.nodeType !== 'number') throw new Error(\"'parentElement' must be a DOM node\");\n  if (nextNode && typeof nextNode.nodeType !== 'number')\n    // 'nextNode' is optional\n    throw new Error(\"'nextNode' must be a DOM node\");\n  parentView = parentView || currentViewIfRendering();\n  const view = contentAsView(content);\n\n  // TODO: this is only needed in development\n  if (!parentView) {\n    view.onViewCreated(function () {\n      Blaze.__rootViews.push(view);\n    });\n    view.onViewDestroyed(function () {\n      let index = Blaze.__rootViews.indexOf(view);\n      if (index > -1) {\n        Blaze.__rootViews.splice(index, 1);\n      }\n    });\n  }\n  Blaze._materializeView(view, parentView);\n  if (parentElement) {\n    view._domrange.attach(parentElement, nextNode);\n  }\n  return view;\n};\nBlaze.insert = function (view, parentElement, nextNode) {\n  Blaze._warn(\"Blaze.insert has been deprecated.  Specify where to insert the \" + \"rendered content in the call to Blaze.render.\");\n  if (!(view && view._domrange instanceof Blaze._DOMRange)) throw new Error(\"Expected template rendered with Blaze.render\");\n  view._domrange.attach(parentElement, nextNode);\n};\n\n/**\n * @summary Renders a template or View to DOM nodes with a data context.  Otherwise identical to `Blaze.render`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.\n * @param {Object|Function} data The data context to use, or a function returning a data context.  If a function is provided, it will be reactively re-run.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.renderWithData = function (content, data, parentElement, nextNode, parentView) {\n  // We defer the handling of optional arguments to Blaze.render.  At this point,\n  // `nextNode` may actually be `parentView`.\n  return Blaze.render(Blaze._TemplateWith(data, contentAsFunc(content)), parentElement, nextNode, parentView);\n};\n\n/**\n * @summary Removes a rendered View from the DOM, stopping all reactive updates and event listeners on it. Also destroys the Blaze.Template instance associated with the view.\n * @locus Client\n * @param {Blaze.View} renderedView The return value from `Blaze.render` or `Blaze.renderWithData`, or the `view` property of a Blaze.Template instance. Calling `Blaze.remove(Template.instance().view)` from within a template event handler will destroy the view as well as that template and trigger the template's `onDestroyed` handlers.\n */\nBlaze.remove = function (view) {\n  if (!(view && view._domrange instanceof Blaze._DOMRange)) throw new Error(\"Expected template rendered with Blaze.render\");\n  while (view) {\n    if (!view.isDestroyed) {\n      const range = view._domrange;\n      range.destroy();\n      if (range.attached && !range.parentRange) {\n        range.detach();\n      }\n    }\n    view = view._hasGeneratedParent && view.parentView;\n  }\n};\n\n/**\n * @summary Renders a template or View to a string of HTML.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n */\nBlaze.toHTML = function (content, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return HTML.toHTML(Blaze._expandView(contentAsView(content), parentView));\n};\n\n/**\n * @summary Renders a template or View to HTML with a data context.  Otherwise identical to `Blaze.toHTML`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n * @param {Object|Function} data The data context to use, or a function returning a data context.\n */\nBlaze.toHTMLWithData = function (content, data, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return HTML.toHTML(Blaze._expandView(Blaze._TemplateWith(data, contentAsFunc(content)), parentView));\n};\nBlaze._toText = function (htmljs, parentView, textMode) {\n  if (typeof htmljs === 'function') throw new Error(\"Blaze._toText doesn't take a function, just HTMLjs\");\n  if (parentView != null && !(parentView instanceof Blaze.View)) {\n    // omitted parentView argument\n    textMode = parentView;\n    parentView = null;\n  }\n  parentView = parentView || currentViewIfRendering();\n  if (!textMode) throw new Error(\"textMode required\");\n  if (!(textMode === HTML.TEXTMODE.STRING || textMode === HTML.TEXTMODE.RCDATA || textMode === HTML.TEXTMODE.ATTRIBUTE)) throw new Error(\"Unknown textMode: \" + textMode);\n  return HTML.toText(Blaze._expand(htmljs, parentView), textMode);\n};\n\n/**\n * @summary Returns the current data context, or the data context that was used when rendering a particular DOM element or View from a Meteor template.\n * @locus Client\n * @param {DOMElement|Blaze.View} [elementOrView] Optional.  An element that was rendered by a Meteor, or a View.\n */\nBlaze.getData = function (elementOrView) {\n  var _theWith$dataVar$get;\n  let theWith;\n  if (!elementOrView) {\n    theWith = Blaze.getView('with');\n  } else if (elementOrView instanceof Blaze.View) {\n    const view = elementOrView;\n    theWith = view.name === 'with' ? view : Blaze.getView(view, 'with');\n  } else if (typeof elementOrView.nodeType === 'number') {\n    if (elementOrView.nodeType !== 1) throw new Error(\"Expected DOM element\");\n    theWith = Blaze.getView(elementOrView, 'with');\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n  return theWith ? (_theWith$dataVar$get = theWith.dataVar.get()) === null || _theWith$dataVar$get === void 0 ? void 0 : _theWith$dataVar$get.value : null;\n};\n\n// For back-compat\nBlaze.getElementData = function (element) {\n  Blaze._warn(\"Blaze.getElementData has been deprecated.  Use \" + \"Blaze.getData(element) instead.\");\n  if (element.nodeType !== 1) throw new Error(\"Expected DOM element\");\n  return Blaze.getData(element);\n};\n\n// Both arguments are optional.\n\n/**\n * @summary Gets either the current View, or the View enclosing the given DOM element.\n * @locus Client\n * @param {DOMElement} [element] Optional.  If specified, the View enclosing `element` is returned.\n */\nBlaze.getView = function (elementOrView, _viewName) {\n  let viewName = _viewName;\n  if (typeof elementOrView === 'string') {\n    // omitted elementOrView; viewName present\n    viewName = elementOrView;\n    elementOrView = null;\n  }\n\n  // We could eventually shorten the code by folding the logic\n  // from the other methods into this method.\n  if (!elementOrView) {\n    return Blaze._getCurrentView(viewName);\n  } else if (elementOrView instanceof Blaze.View) {\n    return Blaze._getParentView(elementOrView, viewName);\n  } else if (typeof elementOrView.nodeType === 'number') {\n    return Blaze._getElementView(elementOrView, viewName);\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n};\n\n// Gets the current view or its nearest ancestor of name\n// `name`.\nBlaze._getCurrentView = function (name) {\n  let view = Blaze.currentView;\n  // Better to fail in cases where it doesn't make sense\n  // to use Blaze._getCurrentView().  There will be a current\n  // view anywhere it does.  You can check Blaze.currentView\n  // if you want to know whether there is one or not.\n  if (!view) throw new Error(\"There is no current view\");\n  if (name) {\n    while (view && view.name !== name) view = view.parentView;\n    return view || null;\n  } else {\n    // Blaze._getCurrentView() with no arguments just returns\n    // Blaze.currentView.\n    return view;\n  }\n};\nBlaze._getParentView = function (view, name) {\n  let v = view.parentView;\n  if (name) {\n    while (v && v.name !== name) v = v.parentView;\n  }\n  return v || null;\n};\nBlaze._getElementView = function (elem, name) {\n  let range = Blaze._DOMRange.forElement(elem);\n  let view = null;\n  while (range && !view) {\n    view = range.view || null;\n    if (!view) {\n      if (range.parentRange) range = range.parentRange;else range = Blaze._DOMRange.forElement(range.parentElement);\n    }\n  }\n  if (name) {\n    while (view && view.name !== name) view = view.parentView;\n    return view || null;\n  } else {\n    return view;\n  }\n};\nBlaze._addEventMap = function (view, eventMap, thisInHandler) {\n  thisInHandler = thisInHandler || null;\n  const handles = [];\n  if (!view._domrange) throw new Error(\"View must have a DOMRange\");\n  view._domrange.onAttached(function attached_eventMaps(range, element) {\n    Object.keys(eventMap).forEach(function (spec) {\n      let handler = eventMap[spec];\n      const clauses = spec.split(/,\\s+/);\n      // iterate over clauses of spec, e.g. ['click .foo', 'click .bar']\n      clauses.forEach(function (clause) {\n        const parts = clause.split(/\\s+/);\n        if (parts.length === 0) return;\n        const newEvents = parts.shift();\n        const selector = parts.join(' ');\n        handles.push(Blaze._EventSupport.listen(element, newEvents, selector, function (evt) {\n          if (!range.containsElement(evt.currentTarget, selector, newEvents)) return null;\n          const handlerThis = thisInHandler || this;\n          const handlerArgs = arguments;\n          return Blaze._withCurrentView(view, function () {\n            return handler.apply(handlerThis, handlerArgs);\n          });\n        }, range, function (r) {\n          return r.parentRange;\n        }));\n      });\n    });\n  });\n  view.onViewDestroyed(function () {\n    handles.forEach(function (h) {\n      h.stop();\n    });\n    handles.length = 0;\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"builtins.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/builtins.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet has;\nmodule.link(\"lodash.has\", {\n  default(v) {\n    has = v;\n  }\n}, 0);\nlet isObject;\nmodule.link(\"lodash.isobject\", {\n  default(v) {\n    isObject = v;\n  }\n}, 1);\nBlaze._calculateCondition = function (cond) {\n  if (HTML.isArray(cond) && cond.length === 0) return false;\n  return !!cond;\n};\n\n/**\n * @summary Constructs a View that renders content with a data context.\n * @locus Client\n * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a\n *   function is provided, it will be reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.With = function (data, contentFunc) {\n  const view = Blaze.View('with', contentFunc);\n  view.dataVar = null;\n  view.onViewCreated(() => {\n    view.dataVar = _createBinding(view, data, 'setData');\n  });\n  return view;\n};\n\n/**\n * @summary Shallow compare of two bindings.\n * @param {Binding} x\n * @param {Binding} y\n */\nfunction _isEqualBinding(x, y) {\n  if (typeof x === 'object' && typeof y === 'object') {\n    return x.error === y.error && ReactiveVar._isEqual(x.value, y.value);\n  } else {\n    return ReactiveVar._isEqual(x, y);\n  }\n}\n\n/**\n * @template T\n * @param {T} x\n * @returns {T}\n */\nfunction _identity(x) {\n  return x;\n}\n\n/**\n * Attaches a single binding to the instantiated view.\n * @template T, U\n * @param {ReactiveVar<U>} reactiveVar Target view.\n * @param {Promise<T> | T} value Bound value.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n */\nfunction _setBindingValue(reactiveVar, value) {\n  let mapper = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _identity;\n  if (value && typeof value.then === 'function') {\n    value.then(value => reactiveVar.set({\n      value: mapper(value)\n    }), error => reactiveVar.set({\n      error\n    }));\n  } else {\n    reactiveVar.set({\n      value: mapper(value)\n    });\n  }\n}\n\n/**\n * @template T, U\n * @param {Blaze.View} view Target view.\n * @param {Promise<T> | T | function(): (Promise<T> | T)} binding Binding value or its getter.\n * @param {string} [displayName] Autorun's display name.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n * @returns {ReactiveVar<U>}\n */\nfunction _createBinding(view, binding, displayName, mapper) {\n  const reactiveVar = new ReactiveVar(undefined, _isEqualBinding);\n  if (typeof binding === 'function') {\n    view.autorun(() => _setBindingValue(reactiveVar, binding(), mapper), view.parentView, displayName);\n  } else {\n    _setBindingValue(reactiveVar, binding, mapper);\n  }\n  return reactiveVar;\n}\n\n/**\n * Attaches bindings to the instantiated view.\n * @param {Object} bindings A dictionary of bindings, each binding name\n * corresponds to a value or a function that will be reactively re-run.\n * @param {Blaze.View} view The target.\n */\nBlaze._attachBindingsToView = function (bindings, view) {\n  view.onViewCreated(function () {\n    Object.entries(bindings).forEach(function (_ref) {\n      let [name, binding] = _ref;\n      view._scopeBindings[name] = _createBinding(view, binding);\n    });\n  });\n};\n\n/**\n * @summary Constructs a View setting the local lexical scope in the block.\n * @param {Function} bindings Dictionary mapping names of bindings to\n * values or computations to reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.Let = function (bindings, contentFunc) {\n  var view = Blaze.View('let', contentFunc);\n  Blaze._attachBindingsToView(bindings, view);\n  return view;\n};\n\n/**\n * @summary Constructs a View that renders content conditionally.\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines\n *   whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n  const view = Blaze.View(_not ? 'unless' : 'if', function () {\n    // Render only if the binding has a value, i.e., it's either synchronous or\n    // has resolved. Rejected `Promise`s are NOT rendered.\n    const condition = view.__conditionVar.get();\n    if (condition && 'value' in condition) {\n      return condition.value ? contentFunc() : elseFunc ? elseFunc() : null;\n    }\n    return null;\n  });\n  view.__conditionVar = null;\n  view.onViewCreated(() => {\n    view.__conditionVar = _createBinding(view, conditionFunc, 'condition',\n    // Store only the actual condition.\n    value => !Blaze._calculateCondition(value) !== !_not);\n  });\n  return view;\n};\n\n/**\n * @summary An inverted [`Blaze.If`](#Blaze-If).\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown,\n *   otherwise `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n  return Blaze.If(conditionFunc, contentFunc, elseFunc, true /*_not*/);\n};\n\n/**\n * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n * @locus Client\n * @param {Function} argFunc A function to reactively re-run. The function can\n * return one of two options:\n *\n * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n *   Each body you will be able to get the current item from the sequence using\n *   the name specified in the '_variable' field.\n *\n * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n *   object. Inside the Each body, the current item will be set as the data\n *   context.\n * @param {Function} contentFunc A Function that returns  [*renderable\n * content*](#Renderable-Content).\n * @param {Function} [elseFunc] A Function that returns [*renderable\n * content*](#Renderable-Content) to display in the case when there are no items\n * in the sequence.\n */\nBlaze.Each = function (argFunc, contentFunc, elseFunc) {\n  const eachView = Blaze.View('each', function () {\n    const subviews = this.initialSubviews;\n    this.initialSubviews = null;\n    if (this._isCreatedForExpansion) {\n      this.expandedValueDep = new Tracker.Dependency();\n      this.expandedValueDep.depend();\n    }\n    return subviews;\n  });\n  eachView.initialSubviews = [];\n  eachView.numItems = 0;\n  eachView.inElseMode = false;\n  eachView.stopHandle = null;\n  eachView.contentFunc = contentFunc;\n  eachView.elseFunc = elseFunc;\n  eachView.argVar = undefined;\n  eachView.variableName = null;\n\n  // update the @index value in the scope of all subviews in the range\n  const updateIndices = function (from, to) {\n    if (to === undefined) {\n      to = eachView.numItems - 1;\n    }\n    for (let i = from; i <= to; i++) {\n      const view = eachView._domrange.members[i].view;\n      view._scopeBindings['@index'].set({\n        value: i\n      });\n    }\n  };\n  eachView.onViewCreated(function () {\n    // We evaluate `argFunc` in `Tracker.autorun` to ensure `Blaze.currentView`\n    // is always set when it runs.\n    eachView.argVar = _createBinding(eachView,\n    // Unwrap a sequence reactively (`{{#each x in xs}}`).\n    () => {\n      let maybeSequence = argFunc();\n      if (isObject(maybeSequence) && has(maybeSequence, '_sequence')) {\n        eachView.variableName = maybeSequence._variable || null;\n        maybeSequence = maybeSequence._sequence;\n      }\n      return maybeSequence;\n    }, 'collection');\n    eachView.stopHandle = ObserveSequence.observe(function () {\n      var _eachView$argVar$get;\n      return (_eachView$argVar$get = eachView.argVar.get()) === null || _eachView$argVar$get === void 0 ? void 0 : _eachView$argVar$get.value;\n    }, {\n      addedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          let newItemView;\n          if (eachView.variableName) {\n            // new-style #each (as in {{#each item in items}})\n            // doesn't create a new data context\n            newItemView = Blaze.View('item', eachView.contentFunc);\n          } else {\n            newItemView = Blaze.With(item, eachView.contentFunc);\n          }\n          eachView.numItems++;\n          const bindings = {};\n          bindings['@index'] = index;\n          if (eachView.variableName) {\n            bindings[eachView.variableName] = item;\n          }\n          Blaze._attachBindingsToView(bindings, newItemView);\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            if (eachView.inElseMode) {\n              eachView._domrange.removeMember(0);\n              eachView.inElseMode = false;\n            }\n            const range = Blaze._materializeView(newItemView, eachView);\n            eachView._domrange.addMember(range, index);\n            updateIndices(index);\n          } else {\n            eachView.initialSubviews.splice(index, 0, newItemView);\n          }\n        });\n      },\n      removedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          eachView.numItems--;\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.removeMember(index);\n            updateIndices(index);\n            if (eachView.elseFunc && eachView.numItems === 0) {\n              eachView.inElseMode = true;\n              eachView._domrange.addMember(Blaze._materializeView(Blaze.View('each_else', eachView.elseFunc), eachView), 0);\n            }\n          } else {\n            eachView.initialSubviews.splice(index, 1);\n          }\n        });\n      },\n      changedAt: function (id, newItem, oldItem, index) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else {\n            let itemView;\n            if (eachView._domrange) {\n              itemView = eachView._domrange.getMember(index).view;\n            } else {\n              itemView = eachView.initialSubviews[index];\n            }\n            if (eachView.variableName) {\n              itemView._scopeBindings[eachView.variableName].set({\n                value: newItem\n              });\n            } else {\n              itemView.dataVar.set({\n                value: newItem\n              });\n            }\n          }\n        });\n      },\n      movedTo: function (id, item, fromIndex, toIndex) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.moveMember(fromIndex, toIndex);\n            updateIndices(Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n          } else {\n            const subviews = eachView.initialSubviews;\n            const itemView = subviews[fromIndex];\n            subviews.splice(fromIndex, 1);\n            subviews.splice(toIndex, 0, itemView);\n          }\n        });\n      }\n    });\n    if (eachView.elseFunc && eachView.numItems === 0) {\n      eachView.inElseMode = true;\n      eachView.initialSubviews[0] = Blaze.View('each_else', eachView.elseFunc);\n    }\n  });\n  eachView.onViewDestroyed(function () {\n    if (eachView.stopHandle) eachView.stopHandle.stop();\n  });\n  return eachView;\n};\n\n/**\n * Create a new `Blaze.Let` view that unwraps the given value.\n * @param {unknown} value\n * @returns {Blaze.View}\n */\nBlaze._Await = function (value) {\n  return Blaze.Let({\n    value\n  }, Blaze._AwaitContent);\n};\nBlaze._AwaitContent = function () {\n  var _Blaze$currentView$_s;\n  return (_Blaze$currentView$_s = Blaze.currentView._scopeBindings.value.get()) === null || _Blaze$currentView$_s === void 0 ? void 0 : _Blaze$currentView$_s.value;\n};\nBlaze._TemplateWith = function (arg, contentFunc) {\n  let w;\n  let argFunc = arg;\n  if (typeof arg !== 'function') {\n    argFunc = function () {\n      return arg;\n    };\n  }\n\n  // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n  // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n  // parent Views in the current template.  However, when there's an argument\n  // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n  // in the original scope.  There's no good order to nest\n  // Blaze._InOuterTemplateScope and Blaze._TemplateWith to achieve this,\n  // so we wrap argFunc to run it in the \"original parentView\" of the\n  // Blaze._InOuterTemplateScope.\n  //\n  // To make this better, reconsider _InOuterTemplateScope as a primitive.\n  // Longer term, evaluate expressions in the proper lexical scope.\n  const wrappedArgFunc = function () {\n    let viewToEvaluateArg = null;\n    if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n      viewToEvaluateArg = w.parentView.originalParentView;\n    }\n    if (viewToEvaluateArg) {\n      return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n    } else {\n      return argFunc();\n    }\n  };\n  const wrappedContentFunc = function () {\n    let content = contentFunc.call(this);\n\n    // Since we are generating the Blaze._TemplateWith view for the\n    // user, set the flag on the child view.  If `content` is a template,\n    // construct the View so that we can set the flag.\n    if (content instanceof Blaze.Template) {\n      content = content.constructView();\n    }\n    if (content instanceof Blaze.View) {\n      content._hasGeneratedParent = true;\n    }\n    return content;\n  };\n  w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n  w.__isTemplateWith = true;\n  return w;\n};\nBlaze._InOuterTemplateScope = function (templateView, contentFunc) {\n  const view = Blaze.View('InOuterTemplateScope', contentFunc);\n  let parentView = templateView.parentView;\n\n  // Hack so that if you call `{{> foo bar}}` and it expands into\n  // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n  // that inserts `{{> Template.contentBlock}}`, the data context for\n  // `Template.contentBlock` is not `bar` but the one enclosing that.\n  if (parentView.__isTemplateWith) parentView = parentView.parentView;\n  view.onViewCreated(function () {\n    this.originalParentView = this.parentView;\n    this.parentView = parentView;\n    this.__childDoesntStartNewLexicalScope = true;\n  });\n  return view;\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"lookup.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/lookup.js                                                                                            //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet has;\nmodule.link(\"lodash.has\", {\n  default(v) {\n    has = v;\n  }\n}, 0);\n/** @param {function(Binding): boolean} fn */\nfunction _createBindingsHelper(fn) {\n  /** @param {string[]} names */\n  return function () {\n    for (var _len = arguments.length, names = new Array(_len), _key = 0; _key < _len; _key++) {\n      names[_key] = arguments[_key];\n    }\n    const view = Blaze.currentView;\n\n    // There's either zero arguments (i.e., check all bindings) or an additional\n    // \"hash\" argument that we have to ignore.\n    names = names.length === 0\n    // TODO: Should we walk up the bindings here?\n    ? Object.keys(view._scopeBindings) : names.slice(0, -1);\n    return names.some(name => {\n      const binding = _lexicalBindingLookup(view, name);\n      if (!binding) {\n        throw new Error(\"Binding for \\\"\".concat(name, \"\\\" was not found.\"));\n      }\n      return fn(binding.get());\n    });\n  };\n}\nBlaze._globalHelpers = {\n  /** @summary Check whether any of the given bindings (or all if none given) is still pending. */\n  '@pending': _createBindingsHelper(binding => binding === undefined),\n  /** @summary Check whether any of the given bindings (or all if none given) has rejected. */\n  '@rejected': _createBindingsHelper(binding => !!binding && 'error' in binding),\n  /** @summary Check whether any of the given bindings (or all if none given) has resolved. */\n  '@resolved': _createBindingsHelper(binding => !!binding && 'value' in binding)\n};\n\n// Documented as Template.registerHelper.\n// This definition also provides back-compat for `UI.registerHelper`.\nBlaze.registerHelper = function (name, func) {\n  Blaze._globalHelpers[name] = func;\n};\n\n// Also documented as Template.deregisterHelper\nBlaze.deregisterHelper = function (name) {\n  delete Blaze._globalHelpers[name];\n};\nconst bindIfIsFunction = function (x, target) {\n  if (typeof x !== 'function') return x;\n  return Blaze._bind(x, target);\n};\n\n// If `x` is a function, binds the value of `this` for that function\n// to the current data context.\nconst bindDataContext = function (x) {\n  if (typeof x === 'function') {\n    return function () {\n      let data = Blaze.getData();\n      if (data == null) data = {};\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return x.apply(data, args);\n    };\n  }\n  return x;\n};\nBlaze._OLDSTYLE_HELPER = {};\nBlaze._getTemplateHelper = function (template, name, tmplInstanceFunc) {\n  // XXX COMPAT WITH 0.9.3\n  let isKnownOldStyleHelper = false;\n  if (template.__helpers.has(name)) {\n    const helper = template.__helpers.get(name);\n    if (helper === Blaze._OLDSTYLE_HELPER) {\n      isKnownOldStyleHelper = true;\n    } else if (helper != null) {\n      const printName = \"\".concat(template.viewName, \" \").concat(name);\n      return wrapHelper(bindDataContext(helper), tmplInstanceFunc, printName);\n    } else {\n      return null;\n    }\n  }\n\n  // old-style helper\n  if (name in template) {\n    // Only warn once per helper\n    if (!isKnownOldStyleHelper) {\n      template.__helpers.set(name, Blaze._OLDSTYLE_HELPER);\n      if (!template._NOWARN_OLDSTYLE_HELPERS) {\n        Blaze._warn('Assigning helper with `' + template.viewName + '.' + name + ' = ...` is deprecated.  Use `' + template.viewName + '.helpers(...)` instead.');\n      }\n    }\n    if (template[name] != null) {\n      return wrapHelper(bindDataContext(template[name]), tmplInstanceFunc);\n    }\n  }\n  return null;\n};\nconst wrapHelper = function (f, templateFunc) {\n  let name = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'template helper';\n  if (typeof f !== \"function\") {\n    return f;\n  }\n  return function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n    const self = this;\n    return Blaze.Template._withTemplateInstanceFunc(templateFunc, function () {\n      return Blaze._wrapCatchingExceptions(f, name).apply(self, args);\n    });\n  };\n};\nfunction _lexicalKeepGoing(currentView) {\n  if (!currentView.parentView) {\n    return undefined;\n  }\n  if (!currentView.__startsNewLexicalScope) {\n    return currentView.parentView;\n  }\n  if (currentView.parentView.__childDoesntStartNewLexicalScope) {\n    return currentView.parentView;\n  }\n\n  // in the case of {{> Template.contentBlock data}} the contentBlock loses the lexical scope of it's parent, wheras {{> Template.contentBlock}} it does not\n  // this is because a #with sits between the include InOuterTemplateScope\n  if (currentView.parentView.name === \"with\" && currentView.parentView.parentView && currentView.parentView.parentView.__childDoesntStartNewLexicalScope) {\n    return currentView.parentView;\n  }\n  return undefined;\n}\nfunction _lexicalBindingLookup(view, name) {\n  let currentView = view;\n\n  // walk up the views stopping at a Spacebars.include or Template view that\n  // doesn't have an InOuterTemplateScope view as a parent\n  do {\n    // skip block helpers views\n    // if we found the binding on the scope, return it\n    if (has(currentView._scopeBindings, name)) {\n      return currentView._scopeBindings[name];\n    }\n  } while (currentView = _lexicalKeepGoing(currentView));\n  return null;\n}\nBlaze._lexicalBindingLookup = function (view, name) {\n  const binding = _lexicalBindingLookup(view, name);\n  return binding && (() => {\n    var _binding$get;\n    return (_binding$get = binding.get()) === null || _binding$get === void 0 ? void 0 : _binding$get.value;\n  });\n};\n\n// templateInstance argument is provided to be available for possible\n// alternative implementations of this function by 3rd party packages.\nBlaze._getTemplate = function (name, templateInstance) {\n  if (name in Blaze.Template && Blaze.Template[name] instanceof Blaze.Template) {\n    return Blaze.Template[name];\n  }\n  return null;\n};\nBlaze._getGlobalHelper = function (name, templateInstance) {\n  if (Blaze._globalHelpers[name] != null) {\n    const printName = \"global helper \".concat(name);\n    return wrapHelper(bindDataContext(Blaze._globalHelpers[name]), templateInstance, printName);\n  }\n  return null;\n};\n\n// Looks up a name, like \"foo\" or \"..\", as a helper of the\n// current template; the name of a template; a global helper;\n// or a property of the data context.  Called on the View of\n// a template (i.e. a View with a `.template` property,\n// where the helpers are).  Used for the first name in a\n// \"path\" in a template tag, like \"foo\" in `{{foo.bar}}` or\n// \"..\" in `{{frobulate ../blah}}`.\n//\n// Returns a function, a non-function value, or null.  If\n// a function is found, it is bound appropriately.\n//\n// NOTE: This function must not establish any reactive\n// dependencies itself.  If there is any reactivity in the\n// value, lookup should return a function.\nBlaze.View.prototype.lookup = function (name, _options) {\n  const template = this.template;\n  const lookupTemplate = _options && _options.template;\n  let helper;\n  let binding;\n  let boundTmplInstance;\n  let foundTemplate;\n  if (this.templateInstance) {\n    boundTmplInstance = Blaze._bind(this.templateInstance, this);\n  }\n\n  // 0. looking up the parent data context with the special \"../\" syntax\n  if (/^\\./.test(name)) {\n    // starts with a dot. must be a series of dots which maps to an\n    // ancestor of the appropriate height.\n    if (!/^(\\.)+$/.test(name)) throw new Error(\"id starting with dot must be a series of dots\");\n    return Blaze._parentData(name.length - 1, true /*_functionWrapped*/);\n  }\n\n  // 1. look up a helper on the current template\n  if (template && (helper = Blaze._getTemplateHelper(template, name, boundTmplInstance)) != null) {\n    return helper;\n  }\n\n  // 2. look up a binding by traversing the lexical view hierarchy inside the\n  // current template\n  if (template && (binding = Blaze._lexicalBindingLookup(Blaze.currentView, name)) != null) {\n    return binding;\n  }\n\n  // 3. look up a template by name\n  if (lookupTemplate && (foundTemplate = Blaze._getTemplate(name, boundTmplInstance)) != null) {\n    return foundTemplate;\n  }\n\n  // 4. look up a global helper\n  helper = Blaze._getGlobalHelper(name, boundTmplInstance);\n  if (helper != null) {\n    return helper;\n  }\n\n  // 5. look up in a data context\n  return function () {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n    const isCalledAsFunction = args.length > 0;\n    const data = Blaze.getData();\n    const x = data && data[name];\n    if (!x) {\n      if (lookupTemplate) {\n        throw new Error(\"No such template: \" + name);\n      } else if (isCalledAsFunction) {\n        throw new Error(\"No such function: \" + name);\n      } else if (name.charAt(0) === '@' && (x === null || x === undefined)) {\n        // Throw an error if the user tries to use a `@directive`\n        // that doesn't exist.  We don't implement all directives\n        // from Handlebars, so there's a potential for confusion\n        // if we fail silently.  On the other hand, we want to\n        // throw late in case some app or package wants to provide\n        // a missing directive.\n        throw new Error(\"Unsupported directive: \" + name);\n      }\n    }\n    if (!data) {\n      return null;\n    }\n    if (typeof x !== 'function') {\n      if (isCalledAsFunction) {\n        throw new Error(\"Can't call non-function: \" + x);\n      }\n      return x;\n    }\n    return x.apply(data, args);\n  };\n};\n\n// Implement Spacebars' {{../..}}.\n// @param height {Number} The number of '..'s\nBlaze._parentData = function (height, _functionWrapped) {\n  var _theWith$dataVar$get2;\n  // If height is null or undefined, we default to 1, the first parent.\n  if (height == null) {\n    height = 1;\n  }\n  let theWith = Blaze.getView('with');\n  for (let i = 0; i < height && theWith; i++) {\n    theWith = Blaze.getView(theWith, 'with');\n  }\n  if (!theWith) return null;\n  if (_functionWrapped) return function () {\n    var _theWith$dataVar$get;\n    return (_theWith$dataVar$get = theWith.dataVar.get()) === null || _theWith$dataVar$get === void 0 ? void 0 : _theWith$dataVar$get.value;\n  };\n  return (_theWith$dataVar$get2 = theWith.dataVar.get()) === null || _theWith$dataVar$get2 === void 0 ? void 0 : _theWith$dataVar$get2.value;\n};\nBlaze.View.prototype.lookupTemplate = function (name) {\n  return this.lookup(name, {\n    template: true\n  });\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"template.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/template.js                                                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nlet isObject;\nmodule.link(\"lodash.isobject\", {\n  default(v) {\n    isObject = v;\n  }\n}, 0);\nlet isFunction;\nmodule.link(\"lodash.isfunction\", {\n  default(v) {\n    isFunction = v;\n  }\n}, 1);\nlet has;\nmodule.link(\"lodash.has\", {\n  default(v) {\n    has = v;\n  }\n}, 2);\nlet isEmpty;\nmodule.link(\"lodash.isempty\", {\n  default(v) {\n    isEmpty = v;\n  }\n}, 3);\n// [new] Blaze.Template([viewName], renderFunction)\n//\n// `Blaze.Template` is the class of templates, like `Template.foo` in\n// Meteor, which is `instanceof Template`.\n//\n// `viewKind` is a string that looks like \"Template.foo\" for templates\n// defined by the compiler.\n\n/**\n * @class\n * @summary Constructor for a Template, which is used to construct Views with particular name and content.\n * @locus Client\n * @param {String} [viewName] Optional.  A name for Views constructed by this Template.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  This function is used as the `renderFunction` for Views constructed by this Template.\n */\nBlaze.Template = function (viewName, renderFunction) {\n  if (!(this instanceof Blaze.Template))\n    // called without `new`\n    return new Blaze.Template(viewName, renderFunction);\n  if (typeof viewName === 'function') {\n    // omitted \"viewName\" argument\n    renderFunction = viewName;\n    viewName = '';\n  }\n  if (typeof viewName !== 'string') throw new Error(\"viewName must be a String (or omitted)\");\n  if (typeof renderFunction !== 'function') throw new Error(\"renderFunction must be a function\");\n  this.viewName = viewName;\n  this.renderFunction = renderFunction;\n  this.__helpers = new HelperMap();\n  this.__eventMaps = [];\n  this._callbacks = {\n    created: [],\n    rendered: [],\n    destroyed: []\n  };\n};\nconst Template = Blaze.Template;\nconst HelperMap = function () {};\nHelperMap.prototype.get = function (name) {\n  return this[' ' + name];\n};\nHelperMap.prototype.set = function (name, helper) {\n  this[' ' + name] = helper;\n};\nHelperMap.prototype.has = function (name) {\n  return typeof this[' ' + name] !== 'undefined';\n};\n\n/**\n * @summary Returns true if `value` is a template object like `Template.myTemplate`.\n * @locus Client\n * @param {Any} value The value to test.\n */\nBlaze.isTemplate = function (t) {\n  return t instanceof Blaze.Template;\n};\n\n/**\n * @name  onCreated\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is created.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onCreated = function (cb) {\n  this._callbacks.created.push(cb);\n};\n\n/**\n * @name  onRendered\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is inserted into the DOM.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onRendered = function (cb) {\n  this._callbacks.rendered.push(cb);\n};\n\n/**\n * @name  onDestroyed\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is removed from the DOM and destroyed.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onDestroyed = function (cb) {\n  this._callbacks.destroyed.push(cb);\n};\nTemplate.prototype._getCallbacks = function (which) {\n  const self = this;\n  let callbacks = self[which] ? [self[which]] : [];\n  // Fire all callbacks added with the new API (Template.onRendered())\n  // as well as the old-style callback (e.g. Template.rendered) for\n  // backwards-compatibility.\n  callbacks = callbacks.concat(self._callbacks[which]);\n  return callbacks;\n};\nconst fireCallbacks = function (callbacks, template) {\n  Template._withTemplateInstanceFunc(function () {\n    return template;\n  }, function () {\n    for (let i = 0, N = callbacks.length; i < N; i++) {\n      callbacks[i].call(template);\n    }\n  });\n};\nTemplate.prototype.constructView = function (contentFunc, elseFunc) {\n  const self = this;\n  const view = Blaze.View(self.viewName, self.renderFunction);\n  view.template = self;\n  view.templateContentBlock = contentFunc ? new Template('(contentBlock)', contentFunc) : null;\n  view.templateElseBlock = elseFunc ? new Template('(elseBlock)', elseFunc) : null;\n  if (self.__eventMaps || typeof self.events === 'object') {\n    view._onViewRendered(function () {\n      if (view.renderCount !== 1) return;\n      if (!self.__eventMaps.length && typeof self.events === \"object\") {\n        // Provide limited back-compat support for `.events = {...}`\n        // syntax.  Pass `template.events` to the original `.events(...)`\n        // function.  This code must run only once per template, in\n        // order to not bind the handlers more than once, which is\n        // ensured by the fact that we only do this when `__eventMaps`\n        // is falsy, and we cause it to be set now.\n        Template.prototype.events.call(self, self.events);\n      }\n      self.__eventMaps.forEach(function (m) {\n        Blaze._addEventMap(view, m, view);\n      });\n    });\n  }\n  view._templateInstance = new Blaze.TemplateInstance(view);\n  view.templateInstance = function () {\n    // Update data, firstNode, and lastNode, and return the TemplateInstance\n    // object.\n    const inst = view._templateInstance;\n\n    /**\n     * @instance\n     * @memberOf Blaze.TemplateInstance\n     * @name  data\n     * @summary The data context of this instance's latest invocation.\n     * @locus Client\n     */\n    inst.data = Blaze.getData(view);\n    if (view._domrange && !view.isDestroyed) {\n      inst.firstNode = view._domrange.firstNode();\n      inst.lastNode = view._domrange.lastNode();\n    } else {\n      // on 'created' or 'destroyed' callbacks we don't have a DomRange\n      inst.firstNode = null;\n      inst.lastNode = null;\n    }\n    return inst;\n  };\n\n  /**\n   * @name  created\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is created.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  // To avoid situations when new callbacks are added in between view\n  // instantiation and event being fired, decide on all callbacks to fire\n  // immediately and then fire them on the event.\n  const createdCallbacks = self._getCallbacks('created');\n  view.onViewCreated(function () {\n    fireCallbacks(createdCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  rendered\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is rendered.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  const renderedCallbacks = self._getCallbacks('rendered');\n  view.onViewReady(function () {\n    fireCallbacks(renderedCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  destroyed\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is destroyed.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  const destroyedCallbacks = self._getCallbacks('destroyed');\n  view.onViewDestroyed(function () {\n    fireCallbacks(destroyedCallbacks, view.templateInstance());\n  });\n  return view;\n};\n\n/**\n * @class\n * @summary The class for template instances\n * @param {Blaze.View} view\n * @instanceName template\n */\nBlaze.TemplateInstance = function (view) {\n  if (!(this instanceof Blaze.TemplateInstance))\n    // called without `new`\n    return new Blaze.TemplateInstance(view);\n  if (!(view instanceof Blaze.View)) throw new Error(\"View required\");\n  view._templateInstance = this;\n\n  /**\n   * @name view\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The [View](../api/blaze.html#Blaze-View) object for this invocation of the template.\n   * @locus Client\n   * @type {Blaze.View}\n   */\n  this.view = view;\n  this.data = null;\n\n  /**\n   * @name firstNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The first top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.firstNode = null;\n\n  /**\n   * @name lastNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The last top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.lastNode = null;\n\n  // This dependency is used to identify state transitions in\n  // _subscriptionHandles which could cause the result of\n  // TemplateInstance#subscriptionsReady to change. Basically this is triggered\n  // whenever a new subscription handle is added or when a subscription handle\n  // is removed and they are not ready.\n  this._allSubsReadyDep = new Tracker.Dependency();\n  this._allSubsReady = false;\n  this._subscriptionHandles = {};\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance, and return them as a JQuery object.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMNode[]}\n */\nBlaze.TemplateInstance.prototype.$ = function (selector) {\n  const view = this.view;\n  if (!view._domrange) throw new Error(\"Can't use $ on template instance with no DOM\");\n  return view._domrange.$(selector);\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement[]}\n */\nBlaze.TemplateInstance.prototype.findAll = function (selector) {\n  return Array.prototype.slice.call(this.$(selector));\n};\n\n/**\n * @summary Find one element matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement}\n */\nBlaze.TemplateInstance.prototype.find = function (selector) {\n  const result = this.$(selector);\n  return result[0] || null;\n};\n\n/**\n * @summary A version of [Tracker.autorun](https://docs.meteor.com/api/tracker.html#Tracker-autorun) that is stopped when the template is destroyed.\n * @locus Client\n * @param {Function} runFunc The function to run. It receives one argument: a Tracker.Computation object.\n */\nBlaze.TemplateInstance.prototype.autorun = function (f) {\n  return this.view.autorun(f);\n};\n\n/**\n * @summary A version of [Meteor.subscribe](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe) that is stopped\n * when the template is destroyed.\n * @return {SubscriptionHandle} The subscription handle to the newly made\n * subscription. Call `handle.stop()` to manually stop the subscription, or\n * `handle.ready()` to find out if this particular subscription has loaded all\n * of its inital data.\n * @locus Client\n * @param {String} name Name of the subscription.  Matches the name of the\n * server's `publish()` call.\n * @param {Any} [arg1,arg2...] Optional arguments passed to publisher function\n * on server.\n * @param {Function|Object} [options] If a function is passed instead of an\n * object, it is interpreted as an `onReady` callback.\n * @param {Function} [options.onReady] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {Function} [options.onStop] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {DDP.Connection} [options.connection] The connection on which to make the\n * subscription.\n */\nBlaze.TemplateInstance.prototype.subscribe = function () {\n  const self = this;\n  const subHandles = self._subscriptionHandles;\n\n  // Duplicate logic from Meteor.subscribe\n  let options = {};\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n  if (args.length) {\n    const lastParam = args[args.length - 1];\n\n    // Match pattern to check if the last arg is an options argument\n    const lastParamOptionsPattern = {\n      onReady: Match.Optional(Function),\n      // XXX COMPAT WITH 1.0.3.1 onError used to exist, but now we use\n      // onStop with an error callback instead.\n      onError: Match.Optional(Function),\n      onStop: Match.Optional(Function),\n      connection: Match.Optional(Match.Any)\n    };\n    if (isFunction(lastParam)) {\n      options.onReady = args.pop();\n    } else if (lastParam && !isEmpty(lastParam) && Match.test(lastParam, lastParamOptionsPattern)) {\n      options = args.pop();\n    }\n  }\n  let subHandle;\n  const oldStopped = options.onStop;\n  options.onStop = function (error) {\n    // When the subscription is stopped, remove it from the set of tracked\n    // subscriptions to avoid this list growing without bound\n    delete subHandles[subHandle.subscriptionId];\n\n    // Removing a subscription can only change the result of subscriptionsReady\n    // if we are not ready (that subscription could be the one blocking us being\n    // ready).\n    if (!self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n    if (oldStopped) {\n      oldStopped(error);\n    }\n  };\n  const {\n    onReady,\n    onError,\n    onStop,\n    connection\n  } = options;\n  const callbacks = {\n    onReady,\n    onError,\n    onStop\n  };\n\n  // The callbacks are passed as the last item in the arguments array passed to\n  // View#subscribe\n  args.push(callbacks);\n\n  // View#subscribe takes the connection as one of the options in the last\n  // argument\n  subHandle = self.view.subscribe.call(self.view, args, {\n    connection: connection\n  });\n  if (!has(subHandles, subHandle.subscriptionId)) {\n    subHandles[subHandle.subscriptionId] = subHandle;\n\n    // Adding a new subscription will always cause us to transition from ready\n    // to not ready, but if we are already not ready then this can't make us\n    // ready.\n    if (self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n  }\n  return subHandle;\n};\n\n/**\n * @summary A reactive function that returns true when all of the subscriptions\n * called with [this.subscribe](#TemplateInstance-subscribe) are ready.\n * @return {Boolean} True if all subscriptions on this template instance are\n * ready.\n */\nBlaze.TemplateInstance.prototype.subscriptionsReady = function () {\n  this._allSubsReadyDep.depend();\n  this._allSubsReady = Object.values(this._subscriptionHandles).every(handle => {\n    return handle.ready();\n  });\n  return this._allSubsReady;\n};\n\n/**\n * @summary Specify template helpers available to this template.\n * @locus Client\n * @param {Object} helpers Dictionary of helper functions by name.\n * @importFromPackage templating\n */\nTemplate.prototype.helpers = function (dict) {\n  if (!isObject(dict)) {\n    throw new Error(\"Helpers dictionary has to be an object\");\n  }\n  for (let k in dict) this.__helpers.set(k, dict[k]);\n};\nconst canUseGetters = function () {\n  if (Object.defineProperty) {\n    let obj = {};\n    try {\n      Object.defineProperty(obj, \"self\", {\n        get: function () {\n          return obj;\n        }\n      });\n    } catch (e) {\n      return false;\n    }\n    return obj.self === obj;\n  }\n  return false;\n}();\nif (canUseGetters) {\n  // Like Blaze.currentView but for the template instance. A function\n  // rather than a value so that not all helpers are implicitly dependent\n  // on the current template instance's `data` property, which would make\n  // them dependent on the data context of the template inclusion.\n  let currentTemplateInstanceFunc = null;\n\n  // If getters are supported, define this property with a getter function\n  // to make it effectively read-only, and to work around this bizarre JSC\n  // bug: https://github.com/meteor/meteor/issues/9926\n  Object.defineProperty(Template, \"_currentTemplateInstanceFunc\", {\n    get: function () {\n      return currentTemplateInstanceFunc;\n    }\n  });\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    const oldTmplInstanceFunc = currentTemplateInstanceFunc;\n    try {\n      currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n} else {\n  // If getters are not supported, just use a normal property.\n  Template._currentTemplateInstanceFunc = null;\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    const oldTmplInstanceFunc = Template._currentTemplateInstanceFunc;\n    try {\n      Template._currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      Template._currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n}\n\n/**\n * @summary Specify event handlers for this template.\n * @locus Client\n * @param {EventMap} eventMap Event handlers to associate with this template.\n * @importFromPackage templating\n */\nTemplate.prototype.events = function (eventMap) {\n  if (!isObject(eventMap)) {\n    throw new Error(\"Event map has to be an object\");\n  }\n  const template = this;\n  let eventMap2 = {};\n  for (let k in eventMap) {\n    eventMap2[k] = function (k, v) {\n      return function (event /*, ...*/) {\n        const view = this; // passed by EventAugmenter\n        const args = Array.prototype.slice.call(arguments);\n        // Exiting the current computation to avoid creating unnecessary\n        // and unexpected reactive dependencies with Templates data\n        // or any other reactive dependencies defined in event handlers\n        return Tracker.nonreactive(function () {\n          let data = Blaze.getData(event.currentTarget);\n          if (data == null) data = {};\n          const tmplInstanceFunc = Blaze._bind(view.templateInstance, view);\n          args.splice(1, 0, tmplInstanceFunc());\n          return Template._withTemplateInstanceFunc(tmplInstanceFunc, function () {\n            return v.apply(data, args);\n          });\n        });\n      };\n    }(k, eventMap[k]);\n  }\n  template.__eventMaps.push(eventMap2);\n};\n\n/**\n * @function\n * @name instance\n * @memberOf Template\n * @summary The [template instance](#Template-instances) corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @returns {Blaze.TemplateInstance}\n * @importFromPackage templating\n */\nTemplate.instance = function () {\n  return Template._currentTemplateInstanceFunc && Template._currentTemplateInstanceFunc();\n};\n\n// Note: Template.currentData() is documented to take zero arguments,\n// while Blaze.getData takes up to one.\n\n/**\n * @summary\n *\n * - Inside an `onCreated`, `onRendered`, or `onDestroyed` callback, returns\n * the data context of the template.\n * - Inside an event handler, returns the data context of the template on which\n * this event handler was defined.\n * - Inside a helper, returns the data context of the DOM node where the helper\n * was used.\n *\n * Establishes a reactive dependency on the result.\n * @locus Client\n * @function\n * @importFromPackage templating\n */\nTemplate.currentData = Blaze.getData;\n\n/**\n * @summary Accesses other data contexts that enclose the current data context.\n * @locus Client\n * @function\n * @param {Integer} [numLevels] The number of levels beyond the current data context to look. Defaults to 1.\n * @importFromPackage templating\n */\nTemplate.parentData = Blaze._parentData;\n\n/**\n * @summary Defines a [helper function](#Template-helpers) which can be used from all templates.\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @param {Function} function The helper function itself.\n * @importFromPackage templating\n */\nTemplate.registerHelper = Blaze.registerHelper;\n\n/**\n * @summary Removes a global [helper function](#Template-helpers).\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @importFromPackage templating\n */\nTemplate.deregisterHelper = Blaze.deregisterHelper;\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"backcompat.js\":function module(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/blaze/backcompat.js                                                                                        //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nUI = Blaze;\nBlaze.ReactiveVar = ReactiveVar;\nUI._templateInstance = Blaze.Template.instance;\nHandlebars = {};\nHandlebars.registerHelper = Blaze.registerHelper;\nHandlebars._escape = Blaze._escape;\n\n// Return these from {{...}} helpers to achieve the same as returning\n// strings from {{{...}}} helpers\nHandlebars.SafeString = function (string) {\n  this.string = string;\n};\nHandlebars.SafeString.prototype.toString = function () {\n  return this.string.toString();\n};\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"node_modules\":{\"lodash.has\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.has/package.json                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.has\",\n  \"version\": \"4.5.2\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.has/index.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    symbolTag = '[object Symbol]';\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/,\n    reLeadingDot = /^\\./,\n    rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value) {\n  return isArray(value) ? value : stringToPath(value);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = isKey(path, object) ? [path] : castPath(path);\n\n  var result,\n      index = -1,\n      length = path.length;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result) {\n    return result;\n  }\n  var length = object ? object.length : 0;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoize(function(string) {\n  string = toString(string);\n\n  var result = [];\n  if (reLeadingDot.test(string)) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, string) {\n    result.push(quote ? string.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result);\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Assign cache to `_.memoize`.\nmemoize.Cache = MapCache;\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isobject\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isobject/package.json                                                 //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isobject\",\n  \"version\": \"3.0.2\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isobject/index.js                                                     //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash 3.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isfunction\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isfunction/package.json                                               //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isfunction\",\n  \"version\": \"3.0.9\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isfunction/index.js                                                   //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    nullTag = '[object Null]',\n    proxyTag = '[object Proxy]',\n    undefinedTag = '[object Undefined]';\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar Symbol = root.Symbol,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isFunction;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"lodash.isempty\":{\"package.json\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isempty/package.json                                                  //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\nmodule.exports = {\n  \"name\": \"lodash.isempty\",\n  \"version\": \"4.4.0\"\n};\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"index.js\":function module(require,exports,module){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// node_modules/meteor/blaze/node_modules/lodash.isempty/index.js                                                      //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap');\n\n/** Detect if properties shadowing those on `Object.prototype` are non-enumerable. */\nvar nonEnumShadows = !propertyIsEnumerable.call({ 'valueOf': 1 }, 'valueOf');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' ||\n        typeof value.splice == 'function' || isBuffer(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (nonEnumShadows || isPrototype(value)) {\n    return !nativeKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEmpty;\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\n\n/* Exports */\nreturn {\n  export: function () { return {\n      Blaze: Blaze,\n      UI: UI,\n      Handlebars: Handlebars\n    };},\n  require: require,\n  eagerModulePaths: [\n    \"/node_modules/meteor/blaze/preamble.js\",\n    \"/node_modules/meteor/blaze/dombackend.js\",\n    \"/node_modules/meteor/blaze/domrange.js\",\n    \"/node_modules/meteor/blaze/events.js\",\n    \"/node_modules/meteor/blaze/attrs.js\",\n    \"/node_modules/meteor/blaze/materializer.js\",\n    \"/node_modules/meteor/blaze/exceptions.js\",\n    \"/node_modules/meteor/blaze/view.js\",\n    \"/node_modules/meteor/blaze/builtins.js\",\n    \"/node_modules/meteor/blaze/lookup.js\",\n    \"/node_modules/meteor/blaze/template.js\",\n    \"/node_modules/meteor/blaze/backcompat.js\"\n  ]\n}});\n","servePath":"/packages/blaze.js","sourceMap":{"version":3,"sources":["packages/blaze/preamble.js","packages/blaze/dombackend.js","packages/blaze/domrange.js","packages/blaze/events.js","packages/blaze/attrs.js","packages/blaze/materializer.js","packages/blaze/exceptions.js","packages/blaze/view.js","packages/blaze/builtins.js","packages/blaze/lookup.js","packages/blaze/template.js","packages/blaze/backcompat.js"],"names":["Blaze","_escape","escape_map","escape_one","c","x","replace","_warn","msg","console","warn","nativeBind","Function","prototype","bind","_bind","func","obj","_len","arguments","length","rest","Array","_key","call","args","apply","objA","objB","DOMBackend","_DOMBackend","$jq","jQuery","Package","jquery","Error","_$jq","getContext","_context","support","createHTMLDocument","document","implementation","base","createElement","href","location","head","appendChild","parseHTML","html","Events","delegateEvents","elem","type","selector","handler","on","undelegateEvents","off","bindEventCapturer","$elem","wrapper","event","fix","currentTarget","target","$target","is","find","_meteorui_wrapper","parseEventType","addEventListener","unbindEventCapturer","removeEventListener","dotLoc","indexOf","slice","NOOP","TeardownCallback","next","prev","linkBefore","oldElt","unlink","go","stop","Teardown","_JQUERY_EVENT_NAME","_CB_PROP","onElementTeardown","elt","propName","tearDownElement","elems","nodeList","getElementsByTagName","i","push","cleanData","special","setup","teardown","callbacks","findBySelector","context","_emptyArray","Object","freeze","_DOMRange","nodeAndRangeArray","DOMRange","members","_memberIn","emptyRangePlaceholder","attached","parentElement","parentRange","attachedCallbacks","_USE_COMMENT_PLACEHOLDERS","result","textNode","createTextNode","someProp","e","_insert","rangeOrNode","nextNode","_isMove","m","attach","_moveNodeWithHooks","_insertNodeWithHooks","_remove","detach","_removeNodeWithHooks","n","parentNode","nodeType","_uihooks","removeElement","removeChild","parent","insertElement","insertBefore","moveElement","forElement","range","$blaze_range","_isReplace","placeholder","createComment","setMembers","newNodeAndRangeArray","newMembers","oldMembers","_memberOut","lastNode","nextSibling","firstNode","oldParentElement","detached","addMember","newMember","atIndex","splice","removeMember","oldMember","moveMember","oldIndex","newIndex","member","getMember","_destroy","_skipNodes","view","_destroyView","_destroyNode","destroyMembers","destroy","containsElement","_this$view","templateName","name","split","concat","_elementContains","containsRange","onAttached","onAttachedDetached","$","self","results","filterFunc","filter","newResults","a","b","compareDocumentPosition","contains","has","module","link","default","v","EventSupport","_EventSupport","eventsToDelegate","blur","change","click","focus","focusin","focusout","reset","submit","EVENT_MODE","TBD","BUBBLING","CAPTURING","NEXT_HANDLERREC_ID","HandlerRec","recipient","id","mode","delegatedHandler","h","evt","tryCapturing","capturingHandler","bubbles","unbind","listen","element","events","getParentRecipient","eventTypes","newHandlerRecs","N","eventDict","$blaze_events","info","handlers","handlerList","handlerRec","r","j","Nj","handlerToRemove","OrderedDict","jsUrlsAllowed","_allowJavascriptUrls","_javascriptUrlsAllowed","AttributeHandler","value","_AttributeHandler","update","oldValue","removeAttribute","setAttribute","extend","options","curType","subType","AttributeHandlerSubtype","assign","_DiffingAttributeHandler","getCurrentValue","setValue","parseValue","joinValues","oldAttrsMap","attrsMap","currentAttrString","currentAttrsMap","forEach","key","append","values","ClassHandler","className","attrString","tokens","token","join","SVGClassHandler","baseVal","StyleHandler","getAttribute","style","regex","match","exec","remove","trim","BooleanHandler","DOMPropertyHandler","XlinkHandler","NS","removeAttributeNS","setAttributeNS","isSVGElement","isUrlAttribute","tagName","attrName","urlAttrs","FORM","BODY","BLOCKQUOTE","Q","DEL","INS","OBJECT","APPLET","A","AREA","LINK","IMG","FRAME","IFRAME","HEAD","SCRIPT","INPUT","BUTTON","BASE","MENUITEM","HTML","VIDEO","urlAttrNames","includes","anchorForNormalization","Meteor","isClient","getUrlProtocol","url","protocol","toLowerCase","origUpdate","UrlHandler","isJavascriptProtocol","isVBScriptProtocol","_makeAttributeHandler","substring","ElementAttributesUpdater","newAttrs","getOwnPropertyNames","k","_materializeDOM","htmljs","intoArray","parentView","_existingWorkStack","workStack","materializeDOMInner","task","pop","String","htmljsType","Tag","materializeTag","CharRef","str","Comment","sanitizedValue","Raw","nodes","isArray","isPromiseLike","_Await","Template","constructView","View","_materializeView","then","maybePromise","fn","_reportException","waitForAllAttributes","attrs","mapped","map","some","Promise","all","_reportExceptionAndThrow","promises","entries","index","tag","isKnownSVGElement","isSVGAnchor","createElementNS","rawAttrs","children","_expand","attrUpdater","updateAttributes","expandedAttrs","_expandAttributes","awaitedAttrs","flattenedAttrs","flattenAttributes","stringAttrs","keys","_toText","TEXTMODE","STRING","updaterComputation","autorun","undefined","Tracker","nonreactive","_withCurrentView","attrTeardown","childNodesAndRanges","node","debugFunc","_throwNextException","_debug","log","stack","message","error","_wrapCatchingExceptions","f","where","render","_render","_callbacks","created","rendered","destroyed","isCreated","_isCreatedForExpansion","isRendered","_isAttached","isDestroyed","_isInRender","_domrange","_hasGeneratedParent","_scopeBindings","renderCount","onViewCreated","cb","_onViewRendered","onViewReady","fire","afterFlush","onViewRendered","onViewDestroyed","removeViewDestroyedListener","lastIndexOf","_inViewScope","displayName","templateInstanceFunc","_currentTemplateInstanceFunc","viewAutorun","_withTemplateInstanceFunc","comp","stopComputation","onStop","_errorIfShouldntCallSubscribe","subscribe","subHandle","connection","_fireCallbacks","which","fireCallbacks","cbs","_createView","forExpansion","doFirstRender","initialContent","domrange","teardownHook","_workStack","_intoArray","lastHtmljs","doRender","firstRun","_isContentEqual","doMaterialize","rangesAndNodes","onInvalidate","initialContents","_expandView","active","_HTMLJSExpander","TransformingVisitor","def","visitObject","visitAttributes","visitAttribute","currentViewIfRendering","currentView","visit","expanded","oldView","checkRenderContent","content","Visitor","contentAsView","contentAsFunc","__rootViews","insert","renderWithData","data","_TemplateWith","toHTML","toHTMLWithData","textMode","RCDATA","ATTRIBUTE","toText","getData","elementOrView","_theWith$dataVar$get","theWith","getView","dataVar","get","getElementData","_viewName","viewName","_getCurrentView","_getParentView","_getElementView","_addEventMap","eventMap","thisInHandler","handles","attached_eventMaps","spec","clauses","clause","parts","newEvents","shift","handlerThis","handlerArgs","isObject","_calculateCondition","cond","With","contentFunc","_createBinding","_isEqualBinding","y","ReactiveVar","_isEqual","_identity","_setBindingValue","reactiveVar","mapper","set","binding","_attachBindingsToView","bindings","_ref","Let","If","conditionFunc","elseFunc","_not","condition","__conditionVar","Unless","Each","argFunc","eachView","subviews","initialSubviews","expandedValueDep","Dependency","depend","numItems","inElseMode","stopHandle","argVar","variableName","updateIndices","from","to","maybeSequence","_variable","_sequence","ObserveSequence","observe","_eachView$argVar$get","addedAt","item","newItemView","changed","removedAt","changedAt","newItem","oldItem","itemView","movedTo","fromIndex","toIndex","Math","min","max","_AwaitContent","_Blaze$currentView$_s","arg","w","wrappedArgFunc","viewToEvaluateArg","originalParentView","wrappedContentFunc","__isTemplateWith","_InOuterTemplateScope","templateView","__childDoesntStartNewLexicalScope","_createBindingsHelper","names","_lexicalBindingLookup","_globalHelpers","registerHelper","deregisterHelper","bindIfIsFunction","bindDataContext","_len2","_key2","_OLDSTYLE_HELPER","_getTemplateHelper","template","tmplInstanceFunc","isKnownOldStyleHelper","__helpers","helper","printName","wrapHelper","_NOWARN_OLDSTYLE_HELPERS","templateFunc","_len3","_key3","_lexicalKeepGoing","__startsNewLexicalScope","_binding$get","_getTemplate","templateInstance","_getGlobalHelper","lookup","_options","lookupTemplate","boundTmplInstance","foundTemplate","test","_parentData","_len4","_key4","isCalledAsFunction","charAt","height","_functionWrapped","_theWith$dataVar$get2","isFunction","isEmpty","renderFunction","HelperMap","__eventMaps","isTemplate","t","onCreated","onRendered","onDestroyed","_getCallbacks","templateContentBlock","templateElseBlock","_templateInstance","TemplateInstance","inst","createdCallbacks","renderedCallbacks","destroyedCallbacks","_allSubsReadyDep","_allSubsReady","_subscriptionHandles","findAll","subHandles","lastParam","lastParamOptionsPattern","onReady","Match","Optional","onError","Any","oldStopped","subscriptionId","subscriptionsReady","every","handle","ready","helpers","dict","canUseGetters","defineProperty","currentTemplateInstanceFunc","oldTmplInstanceFunc","eventMap2","instance","currentData","parentData","UI","Handlebars","SafeString","string","toString"],"mappings":"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","file":"/packages/blaze.js","sourcesContent":["/**\n * @namespace Blaze\n * @summary The namespace for all Blaze-related methods and classes.\n */\nBlaze = {};\n\n// Utility to HTML-escape a string.  Included for legacy reasons.\n// TODO: Should be replaced with _.escape once underscore is upgraded to a newer\n//       version which escapes ` (backtick) as well. Underscore 1.5.2 does not.\nBlaze._escape = (function() {\n  const escape_map = {\n    \"<\": \"&lt;\",\n    \">\": \"&gt;\",\n    '\"': \"&quot;\",\n    \"'\": \"&#x27;\",\n    \"/\": \"&#x2F;\",\n    \"`\": \"&#x60;\", /* IE allows backtick-delimited attributes?? */\n    \"&\": \"&amp;\"\n  };\n  const escape_one = function(c) {\n    return escape_map[c];\n  };\n\n  return function (x) {\n    return x.replace(/[&<>\"'`]/g, escape_one);\n  };\n})();\n\nBlaze._warn = function (msg) {\n  msg = 'Warning: ' + msg;\n\n  if ((typeof console !== 'undefined') && console.warn) {\n    console.warn(msg);\n  }\n};\n\nconst nativeBind = Function.prototype.bind;\n\n// An implementation of _.bind which allows better optimization.\n// See: https://github.com/petkaantonov/bluebird/wiki/Optimization-killers#3-managing-arguments\nif (nativeBind) {\n  Blaze._bind = function (func, obj, ...rest) {\n    if (arguments.length === 2) {\n      return nativeBind.call(func, obj);\n    }\n\n    const args = [obj, ...rest];\n\n    return nativeBind.apply(func, args);\n  };\n}\nelse {\n  // A slower but backwards compatible version.\n  Blaze._bind = function(objA, objB) {\n    objA.bind(objB);\n  };\n}\n","const DOMBackend = {};\nBlaze._DOMBackend = DOMBackend;\n\nconst $jq = (typeof jQuery !== 'undefined' ? jQuery :\n           (typeof Package !== 'undefined' ?\n            Package.jquery && Package.jquery.jQuery : null));\nif (! $jq)\n  throw new Error(\"jQuery not found\");\n\nDOMBackend._$jq = $jq;\n\n\nDOMBackend.getContext = function() {\n  if (DOMBackend._context) {\n    return DOMBackend._context;\n  }\n  if ( DOMBackend._$jq.support.createHTMLDocument ) {\n    DOMBackend._context = document.implementation.createHTMLDocument( \"\" );\n\n    // Set the base href for the created document\n    // so any parsed elements with URLs\n    // are based on the document's URL (gh-2965)\n    const base = DOMBackend._context.createElement( \"base\" );\n    base.href = document.location.href;\n    DOMBackend._context.head.appendChild( base );\n  } else {\n    DOMBackend._context = document;\n  }\n  return DOMBackend._context;\n}\nDOMBackend.parseHTML = function (html) {\n  // Return an array of nodes.\n  //\n  // jQuery does fancy stuff like creating an appropriate\n  // container element and setting innerHTML on it, as well\n  // as working around various IE quirks.\n  return $jq.parseHTML(html, DOMBackend.getContext()) || [];\n};\n\nDOMBackend.Events = {\n  // `selector` is non-null.  `type` is one type (but\n  // may be in backend-specific form, e.g. have namespaces).\n  // Order fired must be order bound.\n  delegateEvents: function (elem, type, selector, handler) {\n    $jq(elem).on(type, selector, handler);\n  },\n\n  undelegateEvents: function (elem, type, handler) {\n    $jq(elem).off(type, '**', handler);\n  },\n\n  bindEventCapturer: function (elem, type, selector, handler) {\n    const $elem = $jq(elem);\n\n    const wrapper = function (event) {\n      event = $jq.event.fix(event);\n      event.currentTarget = event.target;\n\n      // Note: It might improve jQuery interop if we called into jQuery\n      // here somehow.  Since we don't use jQuery to dispatch the event,\n      // we don't fire any of jQuery's event hooks or anything.  However,\n      // since jQuery can't bind capturing handlers, it's not clear\n      // where we would hook in.  Internal jQuery functions like `dispatch`\n      // are too high-level.\n      const $target = $jq(event.currentTarget);\n      if ($target.is($elem.find(selector)))\n        handler.call(elem, event);\n    };\n\n    handler._meteorui_wrapper = wrapper;\n\n    type = DOMBackend.Events.parseEventType(type);\n    // add *capturing* event listener\n    elem.addEventListener(type, wrapper, true);\n  },\n\n  unbindEventCapturer: function (elem, type, handler) {\n    type = DOMBackend.Events.parseEventType(type);\n    elem.removeEventListener(type, handler._meteorui_wrapper, true);\n  },\n\n  parseEventType: function (type) {\n    // strip off namespaces\n    const dotLoc = type.indexOf('.');\n    if (dotLoc >= 0)\n      return type.slice(0, dotLoc);\n    return type;\n  }\n};\n\n\n///// Removal detection and interoperability.\n\n// For an explanation of this technique, see:\n// http://bugs.jquery.com/ticket/12213#comment:23 .\n//\n// In short, an element is considered \"removed\" when jQuery\n// cleans up its *private* userdata on the element,\n// which we can detect using a custom event with a teardown\n// hook.\n\nconst NOOP = function () {};\n\n// Circular doubly-linked list\nconst TeardownCallback = function (func) {\n  this.next = this;\n  this.prev = this;\n  this.func = func;\n};\n\n// Insert newElt before oldElt in the circular list\nTeardownCallback.prototype.linkBefore = function(oldElt) {\n  this.prev = oldElt.prev;\n  this.next = oldElt;\n  oldElt.prev.next = this;\n  oldElt.prev = this;\n};\n\nTeardownCallback.prototype.unlink = function () {\n  this.prev.next = this.next;\n  this.next.prev = this.prev;\n};\n\nTeardownCallback.prototype.go = function () {\n  const func = this.func;\n  func && func();\n};\n\nTeardownCallback.prototype.stop = TeardownCallback.prototype.unlink;\n\nDOMBackend.Teardown = {\n  _JQUERY_EVENT_NAME: 'blaze_teardown_watcher',\n  _CB_PROP: '$blaze_teardown_callbacks',\n  // Registers a callback function to be called when the given element or\n  // one of its ancestors is removed from the DOM via the backend library.\n  // The callback function is called at most once, and it receives the element\n  // in question as an argument.\n  onElementTeardown: function (elem, func) {\n    const elt = new TeardownCallback(func);\n\n    const propName = DOMBackend.Teardown._CB_PROP;\n    if (! elem[propName]) {\n      // create an empty node that is never unlinked\n      elem[propName] = new TeardownCallback;\n\n      // Set up the event, only the first time.\n      $jq(elem).on(DOMBackend.Teardown._JQUERY_EVENT_NAME, NOOP);\n    }\n\n    elt.linkBefore(elem[propName]);\n\n    return elt; // so caller can call stop()\n  },\n  // Recursively call all teardown hooks, in the backend and registered\n  // through DOMBackend.onElementTeardown.\n  tearDownElement: function (elem) {\n    const elems = [];\n    // Array.prototype.slice.call doesn't work when given a NodeList in\n    // IE8 (\"JScript object expected\").\n    const nodeList = elem.getElementsByTagName('*');\n    for (let i = 0; i < nodeList.length; i++) {\n      elems.push(nodeList[i]);\n    }\n    elems.push(elem);\n    $jq.cleanData(elems);\n  }\n};\n\n$jq.event.special[DOMBackend.Teardown._JQUERY_EVENT_NAME] = {\n  setup: function () {\n    // This \"setup\" callback is important even though it is empty!\n    // Without it, jQuery will call addEventListener, which is a\n    // performance hit, especially with Chrome's async stack trace\n    // feature enabled.\n  },\n  teardown: function() {\n    const elem = this;\n    const callbacks = elem[DOMBackend.Teardown._CB_PROP];\n    if (callbacks) {\n      let elt = callbacks.next;\n      while (elt !== callbacks) {\n        elt.go();\n        elt = elt.next;\n      }\n      callbacks.go();\n\n      elem[DOMBackend.Teardown._CB_PROP] = null;\n    }\n  }\n};\n\n\n// Must use jQuery semantics for `context`, not\n// querySelectorAll's.  In other words, all the parts\n// of `selector` must be found under `context`.\nDOMBackend.findBySelector = function (selector, context) {\n  return $jq(selector, context);\n};\n","\n// A constant empty array (frozen if the JS engine supports it).\nconst _emptyArray = Object.freeze ? Object.freeze([]) : [];\n\n// `[new] Blaze._DOMRange([nodeAndRangeArray])`\n//\n// A DOMRange consists of an array of consecutive nodes and DOMRanges,\n// which may be replaced at any time with a new array.  If the DOMRange\n// has been attached to the DOM at some location, then updating\n// the array will cause the DOM to be updated at that location.\nBlaze._DOMRange = function (nodeAndRangeArray) {\n  if (! (this instanceof DOMRange))\n    // called without `new`\n    return new DOMRange(nodeAndRangeArray);\n\n  const members = (nodeAndRangeArray || _emptyArray);\n  if (! (members && (typeof members.length) === 'number'))\n    throw new Error(\"Expected array\");\n\n  for (let i = 0; i < members.length; i++)\n    this._memberIn(members[i]);\n\n  this.members = members;\n  this.emptyRangePlaceholder = null;\n  this.attached = false;\n  this.parentElement = null;\n  this.parentRange = null;\n  this.attachedCallbacks = _emptyArray;\n};\nconst DOMRange = Blaze._DOMRange;\n\n// In IE 8, don't use empty text nodes as placeholders\n// in empty DOMRanges, use comment nodes instead.  Using\n// empty text nodes in modern browsers is great because\n// it doesn't clutter the web inspector.  In IE 8, however,\n// it seems to lead in some roundabout way to the OAuth\n// pop-up crashing the browser completely.  In the past,\n// we didn't use empty text nodes on IE 8 because they\n// don't accept JS properties, so just use the same logic\n// even though we don't need to set properties on the\n// placeholder anymore.\nDOMRange._USE_COMMENT_PLACEHOLDERS = (function () {\n  let result = false;\n  const textNode = document.createTextNode(\"\");\n  try {\n    textNode.someProp = true;\n  } catch (e) {\n    // IE 8\n    result = true;\n  }\n  return result;\n})();\n\n// static methods\nDOMRange._insert = function (rangeOrNode, parentElement, nextNode, _isMove) {\n  const m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.attach(parentElement, nextNode, _isMove);\n  } else {\n    if (_isMove)\n      DOMRange._moveNodeWithHooks(m, parentElement, nextNode);\n    else\n      DOMRange._insertNodeWithHooks(m, parentElement, nextNode);\n  }\n};\n\nDOMRange._remove = function (rangeOrNode) {\n  const m = rangeOrNode;\n  if (m instanceof DOMRange) {\n    m.detach();\n  } else {\n    DOMRange._removeNodeWithHooks(m);\n  }\n};\n\nDOMRange._removeNodeWithHooks = function (n) {\n  if (! n.parentNode)\n    return;\n  if (n.nodeType === 1 &&\n      n.parentNode._uihooks && n.parentNode._uihooks.removeElement) {\n    n.parentNode._uihooks.removeElement(n);\n  } else {\n    n.parentNode.removeChild(n);\n  }\n};\n\nDOMRange._insertNodeWithHooks = function (n, parent, next) {\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 &&\n      parent._uihooks && parent._uihooks.insertElement) {\n    parent._uihooks.insertElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange._moveNodeWithHooks = function (n, parent, next) {\n  if (n.parentNode !== parent)\n    return;\n  // `|| null` because IE throws an error if 'next' is undefined\n  next = next || null;\n  if (n.nodeType === 1 &&\n      parent._uihooks && parent._uihooks.moveElement) {\n    parent._uihooks.moveElement(n, next);\n  } else {\n    parent.insertBefore(n, next);\n  }\n};\n\nDOMRange.forElement = function (elem) {\n  if (elem.nodeType !== 1)\n    throw new Error(\"Expected element, found: \" + elem);\n  let range = null;\n  while (elem && ! range) {\n    range = (elem.$blaze_range || null);\n    if (! range)\n      elem = elem.parentNode;\n  }\n  return range;\n};\n\nDOMRange.prototype.attach = function (parentElement, nextNode, _isMove, _isReplace) {\n  // This method is called to insert the DOMRange into the DOM for\n  // the first time, but it's also used internally when\n  // updating the DOM.\n  //\n  // If _isMove is true, move this attached range to a different\n  // location under the same parentElement.\n  if (_isMove || _isReplace) {\n    if (! (this.parentElement === parentElement &&\n           this.attached))\n      throw new Error(\"Can only move or replace an attached DOMRange, and only under the same parent element\");\n  }\n\n  const members = this.members;\n  if (members.length) {\n    this.emptyRangePlaceholder = null;\n    for (let i = 0; i < members.length; i++) {\n      DOMRange._insert(members[i], parentElement, nextNode, _isMove);\n    }\n  } else {\n    const placeholder = (\n      DOMRange._USE_COMMENT_PLACEHOLDERS ?\n        document.createComment(\"\") :\n        document.createTextNode(\"\"));\n    this.emptyRangePlaceholder = placeholder;\n    parentElement.insertBefore(placeholder, nextNode || null);\n  }\n  this.attached = true;\n  this.parentElement = parentElement;\n\n  if (! (_isMove || _isReplace)) {\n    for(let i = 0; i < this.attachedCallbacks.length; i++) {\n      const obj = this.attachedCallbacks[i];\n      obj.attached && obj.attached(this, parentElement);\n    }\n  }\n};\n\nDOMRange.prototype.setMembers = function (newNodeAndRangeArray) {\n  const newMembers = newNodeAndRangeArray;\n  if (! (newMembers && (typeof newMembers.length) === 'number'))\n    throw new Error(\"Expected array\");\n\n  const oldMembers = this.members;\n\n  for (let i = 0; i < oldMembers.length; i++)\n    this._memberOut(oldMembers[i]);\n  for (let i = 0; i < newMembers.length; i++)\n    this._memberIn(newMembers[i]);\n\n  if (! this.attached) {\n    this.members = newMembers;\n  } else {\n    // don't do anything if we're going from empty to empty\n    if (newMembers.length || oldMembers.length) {\n      // detach the old members and insert the new members\n      const nextNode = this.lastNode().nextSibling;\n      const parentElement = this.parentElement;\n      // Use detach/attach, but don't fire attached/detached hooks\n      this.detach(true /*_isReplace*/);\n      this.members = newMembers;\n      this.attach(parentElement, nextNode, false, true /*_isReplace*/);\n    }\n  }\n};\n\nDOMRange.prototype.firstNode = function () {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! this.members.length)\n    return this.emptyRangePlaceholder;\n\n  const m = this.members[0];\n  return (m instanceof DOMRange) ? m.firstNode() : m;\n};\n\nDOMRange.prototype.lastNode = function () {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! this.members.length)\n    return this.emptyRangePlaceholder;\n\n  const m = this.members[this.members.length - 1];\n  return (m instanceof DOMRange) ? m.lastNode() : m;\n};\n\nDOMRange.prototype.detach = function (_isReplace) {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  const oldParentElement = this.parentElement;\n  const members = this.members;\n  if (members.length) {\n    for (let i = 0; i < members.length; i++) {\n      DOMRange._remove(members[i]);\n    }\n  } else {\n    const placeholder = this.emptyRangePlaceholder;\n    this.parentElement.removeChild(placeholder);\n    this.emptyRangePlaceholder = null;\n  }\n\n  if (! _isReplace) {\n    this.attached = false;\n    this.parentElement = null;\n\n    for(let i = 0; i < this.attachedCallbacks.length; i++) {\n      const obj = this.attachedCallbacks[i];\n      obj.detached && obj.detached(this, oldParentElement);\n    }\n  }\n};\n\nDOMRange.prototype.addMember = function (newMember, atIndex, _isMove) {\n  const members = this.members;\n  if (! (atIndex >= 0 && atIndex <= members.length))\n    throw new Error(\"Bad index in range.addMember: \" + atIndex);\n\n  if (! _isMove)\n    this._memberIn(newMember);\n\n  if (! this.attached) {\n    // currently detached; just updated members\n    members.splice(atIndex, 0, newMember);\n  } else if (members.length === 0) {\n    // empty; use the empty-to-nonempty handling of setMembers\n    this.setMembers([newMember]);\n  } else {\n    let nextNode;\n    if (atIndex === members.length) {\n      // insert at end\n      nextNode = this.lastNode().nextSibling;\n    } else {\n      const m = members[atIndex];\n      nextNode = (m instanceof DOMRange) ? m.firstNode() : m;\n    }\n    members.splice(atIndex, 0, newMember);\n    DOMRange._insert(newMember, this.parentElement, nextNode, _isMove);\n  }\n};\n\nDOMRange.prototype.removeMember = function (atIndex, _isMove) {\n  const members = this.members;\n  if (! (atIndex >= 0 && atIndex < members.length))\n    throw new Error(\"Bad index in range.removeMember: \" + atIndex);\n\n  if (_isMove) {\n    members.splice(atIndex, 1);\n  } else {\n    const oldMember = members[atIndex];\n    this._memberOut(oldMember);\n\n    if (members.length === 1) {\n      // becoming empty; use the logic in setMembers\n      this.setMembers(_emptyArray);\n    } else {\n      members.splice(atIndex, 1);\n      if (this.attached)\n        DOMRange._remove(oldMember);\n    }\n  }\n};\n\nDOMRange.prototype.moveMember = function (oldIndex, newIndex) {\n  const member = this.members[oldIndex];\n  this.removeMember(oldIndex, true /*_isMove*/);\n  this.addMember(member, newIndex, true /*_isMove*/);\n};\n\nDOMRange.prototype.getMember = function (atIndex) {\n  const members = this.members;\n  if (! (atIndex >= 0 && atIndex < members.length))\n    throw new Error(\"Bad index in range.getMember: \" + atIndex);\n  return this.members[atIndex];\n};\n\nDOMRange.prototype._memberIn = function (m) {\n  if (m instanceof DOMRange)\n    m.parentRange = this;\n  else if (m.nodeType === 1) // DOM Element\n    m.$blaze_range = this;\n};\n\nDOMRange._destroy = function (m, _skipNodes) {\n  if (m instanceof DOMRange) {\n    if (m.view)\n      Blaze._destroyView(m.view, _skipNodes);\n  } else if ((! _skipNodes) && m.nodeType === 1) {\n    // DOM Element\n    if (m.$blaze_range) {\n      Blaze._destroyNode(m);\n      m.$blaze_range = null;\n    }\n  }\n};\n\nDOMRange.prototype._memberOut = DOMRange._destroy;\n\n// Tear down, but don't remove, the members.  Used when chunks\n// of DOM are being torn down or replaced.\nDOMRange.prototype.destroyMembers = function (_skipNodes) {\n  const members = this.members;\n  for (let i = 0; i < members.length; i++)\n    this._memberOut(members[i], _skipNodes);\n};\n\nDOMRange.prototype.destroy = function (_skipNodes) {\n  DOMRange._destroy(this, _skipNodes);\n};\n\nDOMRange.prototype.containsElement = function (elem, selector, event) {\n  const templateName = this.view?.name\n  ? this.view.name.split('.')[1]\n  : 'unknown template';\n  if (! this.attached)\n    throw new Error(`${event} event triggered with ${selector} on ${templateName} but associated view is not be found.\n    Make sure the event doesn't destroy the view.`);\n\n  // An element is contained in this DOMRange if it's possible to\n  // reach it by walking parent pointers, first through the DOM and\n  // then parentRange pointers.  In other words, the element or some\n  // ancestor of it is at our level of the DOM (a child of our\n  // parentElement), and this element is one of our members or\n  // is a member of a descendant Range.\n\n  // First check that elem is a descendant of this.parentElement,\n  // according to the DOM.\n  if (! Blaze._elementContains(this.parentElement, elem))\n    return false;\n\n  // If elem is not an immediate child of this.parentElement,\n  // walk up to its ancestor that is.\n  while (elem.parentNode !== this.parentElement)\n    elem = elem.parentNode;\n\n  let range = elem.$blaze_range;\n  while (range && range !== this)\n    range = range.parentRange;\n\n  return range === this;\n};\n\nDOMRange.prototype.containsRange = function (range) {\n  if (! this.attached)\n    throw new Error(\"Must be attached\");\n\n  if (! range.attached)\n    return false;\n\n  // A DOMRange is contained in this DOMRange if it's possible\n  // to reach this range by following parent pointers.  If the\n  // DOMRange has the same parentElement, then it should be\n  // a member, or a member of a member etc.  Otherwise, we must\n  // contain its parentElement.\n\n  if (range.parentElement !== this.parentElement)\n    return this.containsElement(range.parentElement);\n\n  if (range === this)\n    return false; // don't contain self\n\n  while (range && range !== this)\n    range = range.parentRange;\n\n  return range === this;\n};\n\nDOMRange.prototype.onAttached = function (attached) {\n  this.onAttachedDetached({ attached: attached });\n};\n\n// callbacks are `attached(range, element)` and\n// `detached(range, element)`, and they may\n// access the `callbacks` object in `this`.\n// The arguments to `detached` are the same\n// range and element that were passed to `attached`.\nDOMRange.prototype.onAttachedDetached = function (callbacks) {\n  if (this.attachedCallbacks === _emptyArray)\n    this.attachedCallbacks = [];\n  this.attachedCallbacks.push(callbacks);\n};\n\nDOMRange.prototype.$ = function (selector) {\n  const self = this;\n\n  const parentNode = this.parentElement;\n  if (! parentNode)\n    throw new Error(\"Can't select in removed DomRange\");\n\n  // Strategy: Find all selector matches under parentNode,\n  // then filter out the ones that aren't in this DomRange\n  // using `DOMRange#containsElement`.  This is\n  // asymptotically slow in the presence of O(N) sibling\n  // content that is under parentNode but not in our range,\n  // so if performance is an issue, the selector should be\n  // run on a child element.\n\n  // Since jQuery can't run selectors on a DocumentFragment,\n  // we don't expect findBySelector to work.\n  if (parentNode.nodeType === 11 /* DocumentFragment */)\n    throw new Error(\"Can't use $ on an offscreen range\");\n\n  let results = Blaze._DOMBackend.findBySelector(selector, parentNode);\n\n  // We don't assume `results` has jQuery API; a plain array\n  // should do just as well.  However, if we do have a jQuery\n  // array, we want to end up with one also, so we use\n  // `.filter`.\n\n  // Function that selects only elements that are actually\n  // in this DomRange, rather than simply descending from\n  // `parentNode`.\n  const filterFunc = function (elem) {\n    // handle jQuery's arguments to filter, where the node\n    // is in `this` and the index is the first argument.\n    if (typeof elem === 'number')\n      elem = this;\n\n    return self.containsElement(elem);\n  };\n\n  if (! results.filter) {\n    // not a jQuery array, and not a browser with\n    // Array.prototype.filter (e.g. IE <9)\n    const newResults = [];\n    for (let i = 0; i < results.length; i++) {\n      const x = results[i];\n      if (filterFunc(x))\n        newResults.push(x);\n    }\n    results = newResults;\n  } else {\n    // `results.filter` is either jQuery's or ECMAScript's `filter`\n    results = results.filter(filterFunc);\n  }\n\n  return results;\n};\n\n// Returns true if element a contains node b and is not node b.\n//\n// The restriction that `a` be an element (not a document fragment,\n// say) is based on what's easy to implement cross-browser.\nBlaze._elementContains = function (a, b) {\n  if (a.nodeType !== 1) // ELEMENT\n    return false;\n  if (a === b)\n    return false;\n\n  if (a.compareDocumentPosition) {\n    return a.compareDocumentPosition(b) & 0x10;\n  } else {\n    // Should be only old IE and maybe other old browsers here.\n    // Modern Safari has both functions but seems to get contains() wrong.\n    // IE can't handle b being a text node.  We work around this\n    // by doing a direct parent test now.\n    b = b.parentNode;\n    if (! (b && b.nodeType === 1)) // ELEMENT\n      return false;\n    if (a === b)\n      return true;\n\n    return a.contains(b);\n  }\n};\n","import has from 'lodash.has';\n\nconst EventSupport = Blaze._EventSupport = {};\n\nconst DOMBackend = Blaze._DOMBackend;\n\n// List of events to always delegate, never capture.\n// Since jQuery fakes bubbling for certain events in\n// certain browsers (like `submit`), we don't want to\n// get in its way.\n//\n// We could list all known bubbling\n// events here to avoid creating speculative capturers\n// for them, but it would only be an optimization.\nconst eventsToDelegate = EventSupport.eventsToDelegate = {\n  blur: 1,\n  change: 1,\n  click: 1,\n  focus: 1,\n  focusin: 1,\n  focusout: 1,\n  reset: 1,\n  submit: 1\n};\n\nconst EVENT_MODE = EventSupport.EVENT_MODE = {\n  TBD: 0,\n  BUBBLING: 1,\n  CAPTURING: 2\n};\n\nlet NEXT_HANDLERREC_ID = 1;\n\nconst HandlerRec = function (elem, type, selector, handler, recipient) {\n  this.elem = elem;\n  this.type = type;\n  this.selector = selector;\n  this.handler = handler;\n  this.recipient = recipient;\n  this.id = (NEXT_HANDLERREC_ID++);\n\n  this.mode = EVENT_MODE.TBD;\n\n  // It's important that delegatedHandler be a different\n  // instance for each handlerRecord, because its identity\n  // is used to remove it.\n  //\n  // It's also important that the closure have access to\n  // `this` when it is not called with it set.\n  this.delegatedHandler = (function (h) {\n    return function (evt) {\n      if ((! h.selector) && evt.currentTarget !== evt.target)\n        // no selector means only fire on target\n        return;\n      return h.handler.apply(h.recipient, arguments);\n    };\n  })(this);\n\n  // WHY CAPTURE AND DELEGATE: jQuery can't delegate\n  // non-bubbling events, because\n  // event capture doesn't work in IE 8.  However, there\n  // are all sorts of new-fangled non-bubbling events\n  // like \"play\" and \"touchenter\".  We delegate these\n  // events using capture in all browsers except IE 8.\n  // IE 8 doesn't support these events anyway.\n\n  const tryCapturing = elem.addEventListener &&\n        (!has(eventsToDelegate,\n                 DOMBackend.Events.parseEventType(type)));\n\n  if (tryCapturing) {\n    this.capturingHandler = (function (h) {\n      return function (evt) {\n        if (h.mode === EVENT_MODE.TBD) {\n          // must be first time we're called.\n          if (evt.bubbles) {\n            // this type of event bubbles, so don't\n            // get called again.\n            h.mode = EVENT_MODE.BUBBLING;\n            DOMBackend.Events.unbindEventCapturer(\n              h.elem, h.type, h.capturingHandler);\n            return;\n          } else {\n            // this type of event doesn't bubble,\n            // so unbind the delegation, preventing\n            // it from ever firing.\n            h.mode = EVENT_MODE.CAPTURING;\n            DOMBackend.Events.undelegateEvents(\n              h.elem, h.type, h.delegatedHandler);\n          }\n        }\n\n        h.delegatedHandler(evt);\n      };\n    })(this);\n\n  } else {\n    this.mode = EVENT_MODE.BUBBLING;\n  }\n};\nEventSupport.HandlerRec = HandlerRec;\n\nHandlerRec.prototype.bind = function () {\n  // `this.mode` may be EVENT_MODE_TBD, in which case we bind both. in\n  // this case, 'capturingHandler' is in charge of detecting the\n  // correct mode and turning off one or the other handlers.\n  if (this.mode !== EVENT_MODE.BUBBLING) {\n    DOMBackend.Events.bindEventCapturer(\n      this.elem, this.type, this.selector || '*',\n      this.capturingHandler);\n  }\n\n  if (this.mode !== EVENT_MODE.CAPTURING)\n    DOMBackend.Events.delegateEvents(\n      this.elem, this.type,\n      this.selector || '*', this.delegatedHandler);\n};\n\nHandlerRec.prototype.unbind = function () {\n  if (this.mode !== EVENT_MODE.BUBBLING)\n    DOMBackend.Events.unbindEventCapturer(this.elem, this.type,\n                                          this.capturingHandler);\n\n  if (this.mode !== EVENT_MODE.CAPTURING)\n    DOMBackend.Events.undelegateEvents(this.elem, this.type,\n                                       this.delegatedHandler);\n};\n\nEventSupport.listen = function (element, events, selector, handler, recipient, getParentRecipient) {\n\n  // Prevent this method from being JITed by Safari.  Due to a\n  // presumed JIT bug in Safari -- observed in Version 7.0.6\n  // (9537.78.2) -- this method may crash the Safari render process if\n  // it is JITed.\n  // Repro: https://github.com/dgreensp/public/tree/master/safari-crash\n  try { element = element; } finally {}\n\n  const eventTypes = [];\n  events.replace(/[^ /]+/g, function (e) {\n    eventTypes.push(e);\n  });\n\n  const newHandlerRecs = [];\n  for (let i = 0, N = eventTypes.length; i < N; i++) {\n    const type = eventTypes[i];\n\n    let eventDict = element.$blaze_events;\n    if (! eventDict)\n      eventDict = (element.$blaze_events = {});\n\n    let info = eventDict[type];\n    if (! info) {\n      info = eventDict[type] = {};\n      info.handlers = [];\n    }\n    const handlerList = info.handlers;\n    const handlerRec = new HandlerRec(\n      element, type, selector, handler, recipient);\n    newHandlerRecs.push(handlerRec);\n    handlerRec.bind();\n    handlerList.push(handlerRec);\n    // Move handlers of enclosing ranges to end, by unbinding and rebinding\n    // them.  In jQuery (or other DOMBackend) this causes them to fire\n    // later when the backend dispatches event handlers.\n    if (getParentRecipient) {\n      for (let r = getParentRecipient(recipient); r;\n           r = getParentRecipient(r)) {\n        // r is an enclosing range (recipient)\n        for (let j = 0, Nj = handlerList.length;\n             j < Nj; j++) {\n          const h = handlerList[j];\n          if (h.recipient === r) {\n            h.unbind();\n            h.bind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n            handlerList.push(h);\n            j--; // account for removed handler\n            Nj--; // don't visit appended handlers\n          }\n        }\n      }\n    }\n  }\n\n  return {\n    // closes over just `element` and `newHandlerRecs`\n    stop: function () {\n      const eventDict = element.$blaze_events;\n      if (! eventDict)\n        return;\n      // newHandlerRecs has only one item unless you specify multiple\n      // event types.  If this code is slow, it's because we have to\n      // iterate over handlerList here.  Clearing a whole handlerList\n      // via stop() methods is O(N^2) in the number of handlers on\n      // an element.\n      for (let i = 0; i < newHandlerRecs.length; i++) {\n        const handlerToRemove = newHandlerRecs[i];\n        const info = eventDict[handlerToRemove.type];\n        if (! info)\n          continue;\n        const handlerList = info.handlers;\n        for (let j = handlerList.length - 1; j >= 0; j--) {\n          if (handlerList[j] === handlerToRemove) {\n            handlerToRemove.unbind();\n            handlerList.splice(j, 1); // remove handlerList[j]\n          }\n        }\n      }\n      newHandlerRecs.length = 0;\n    }\n  };\n};\n","import has from 'lodash.has';\nimport { OrderedDict } from 'meteor/ordered-dict';\n\nlet jsUrlsAllowed = false;\nBlaze._allowJavascriptUrls = function () {\n  jsUrlsAllowed = true;\n};\nBlaze._javascriptUrlsAllowed = function () {\n  return jsUrlsAllowed;\n};\n\n// An AttributeHandler object is responsible for updating a particular attribute\n// of a particular element.  AttributeHandler subclasses implement\n// browser-specific logic for dealing with particular attributes across\n// different browsers.\n//\n// To define a new type of AttributeHandler, use\n// `var FooHandler = AttributeHandler.extend({ update: function ... })`\n// where the `update` function takes arguments `(element, oldValue, value)`.\n// The `element` argument is always the same between calls to `update` on\n// the same instance.  `oldValue` and `value` are each either `null` or\n// a Unicode string of the type that might be passed to the value argument\n// of `setAttribute` (i.e. not an HTML string with character references).\n// When an AttributeHandler is installed, an initial call to `update` is\n// always made with `oldValue = null`.  The `update` method can access\n// `this.name` if the AttributeHandler class is a generic one that applies\n// to multiple attribute names.\n//\n// AttributeHandlers can store custom properties on `this`, as long as they\n// don't use the names `element`, `name`, `value`, and `oldValue`.\n//\n// AttributeHandlers can't influence how attributes appear in rendered HTML,\n// only how they are updated after materialization as DOM.\n\nAttributeHandler = function (name, value) {\n  this.name = name;\n  this.value = value;\n};\nBlaze._AttributeHandler = AttributeHandler;\n\nAttributeHandler.prototype.update = function (element, oldValue, value) {\n  if (value === null) {\n    if (oldValue !== null)\n      element.removeAttribute(this.name);\n  } else {\n    element.setAttribute(this.name, value);\n  }\n};\n\nAttributeHandler.extend = function (options) {\n  const curType = this;\n  const subType = function AttributeHandlerSubtype(/*arguments*/) {\n    AttributeHandler.apply(this, arguments);\n  };\n  subType.prototype = new curType;\n  subType.extend = curType.extend;\n  if (options) {\n    Object.assign(subType.prototype, options);\n  }\n  return subType;\n};\n\n/// Apply the diff between the attributes of \"oldValue\" and \"value\" to \"element.\"\n//\n// Each subclass must implement a parseValue method which takes a string\n// as an input and returns an ordered dict of attributes. The keys of the dict\n// are unique identifiers (ie. css properties in the case of styles), and the\n// values are the entire attribute which will be injected into the element.\n//\n// Extended below to support classes, SVG elements and styles.\n\nBlaze._DiffingAttributeHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    if (!this.getCurrentValue || !this.setValue || !this.parseValue || !this.joinValues)\n      throw new Error(\"Missing methods in subclass of 'DiffingAttributeHandler'\");\n\n    const oldAttrsMap = oldValue ? this.parseValue(oldValue) : new OrderedDict();\n    const attrsMap = value ? this.parseValue(value) : new OrderedDict();\n\n    // the current attributes on the element, which we will mutate.\n\n    const currentAttrString = this.getCurrentValue(element);\n    const currentAttrsMap = currentAttrString ? this.parseValue(currentAttrString) : new OrderedDict();\n\n    // Any outside changes to attributes we add at the end.\n    currentAttrsMap.forEach(function (value, key, i) {\n      // If the key already exists, we do not use the current value, but the new value.\n      if (attrsMap.has(key)) {\n        return;\n      }\n\n      // Key does not already exist, but it existed before. Which means it was explicitly\n      // removed, so we do not add it.\n      if (oldAttrsMap.has(key)) {\n        return;\n      }\n\n      attrsMap.append(key, value);\n    });\n\n    const values = [];\n    attrsMap.forEach(function (value, key, i) {\n      values.push(value);\n    });\n\n    this.setValue(element, this.joinValues(values));\n  }\n});\n\nconst ClassHandler = Blaze._DiffingAttributeHandler.extend({\n  // @param rawValue {String}\n  getCurrentValue: function (element) {\n    return element.className;\n  },\n  setValue: function (element, className) {\n    element.className = className;\n  },\n  parseValue: function (attrString) {\n    const tokens = new OrderedDict();\n\n    attrString.split(' ').forEach(function (token) {\n      if (token) {\n        // Ordered dict requires unique keys.\n        if (! tokens.has(token)) {\n          tokens.append(token, token);\n        }\n      }\n    });\n    return tokens;\n  },\n  joinValues: function (values) {\n    return values.join(' ');\n  }\n});\n\nconst SVGClassHandler = ClassHandler.extend({\n  getCurrentValue: function (element) {\n    return element.className.baseVal;\n  },\n  setValue: function (element, className) {\n    element.setAttribute('class', className);\n  }\n});\n\nconst StyleHandler = Blaze._DiffingAttributeHandler.extend({\n  getCurrentValue: function (element) {\n    return element.getAttribute('style');\n  },\n  setValue: function (element, style) {\n    if (style === '') {\n      element.removeAttribute('style');\n    } else {\n      element.setAttribute('style', style);\n    }\n  },\n\n  // Parse a string to produce a map from property to attribute string.\n  //\n  // Example:\n  // \"color:red; foo:12px\" produces a token {color: \"color:red\", foo:\"foo:12px\"}\n  parseValue: function (attrString) {\n    const tokens = new OrderedDict();\n\n    // Regex for parsing a css attribute declaration, taken from css-parse:\n    // https://github.com/reworkcss/css-parse/blob/7cef3658d0bba872cde05a85339034b187cb3397/index.js#L219\n    const regex = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*(?:\\'(?:\\\\\\'|.)*?\\'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+[;\\s]*/g;\n    let match = regex.exec(attrString);\n    while (match) {\n      // match[0] = entire matching string\n      // match[1] = css property\n      // Prefix the token to prevent conflicts with existing properties.\n\n      // We use the last value for the same key.\n      if (tokens.has(match[1])) {\n        tokens.remove(match[1]);\n      }\n\n      tokens.append(match[1], match[0].trim());\n\n      match = regex.exec(attrString);\n    }\n\n    return tokens;\n  },\n\n  joinValues: function (values) {\n    // TODO: Assure that there is always ; between values. But what is an example where it breaks?\n    return values.join(' ');\n  }\n});\n\nconst BooleanHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const name = this.name;\n    if (value == null) {\n      if (oldValue != null)\n        element[name] = false;\n    } else {\n      element[name] = true;\n    }\n  }\n});\n\nconst DOMPropertyHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const name = this.name;\n    if (value !== element[name])\n      element[name] = value;\n  }\n});\n\n// attributes of the type 'xlink:something' should be set using\n// the correct namespace in order to work\nconst XlinkHandler = AttributeHandler.extend({\n  update: function(element, oldValue, value) {\n    const NS = 'http://www.w3.org/1999/xlink';\n    if (value === null) {\n      if (oldValue !== null)\n        element.removeAttributeNS(NS, this.name);\n    } else {\n      element.setAttributeNS(NS, this.name, this.value);\n    }\n  }\n});\n\n// cross-browser version of `instanceof SVGElement`\nconst isSVGElement = function (elem) {\n  return 'ownerSVGElement' in elem;\n};\n\nconst isUrlAttribute = function (tagName, attrName) {\n  // Compiled from http://www.w3.org/TR/REC-html40/index/attributes.html\n  // and\n  // http://www.w3.org/html/wg/drafts/html/master/index.html#attributes-1\n  const urlAttrs = {\n    FORM: ['action'],\n    BODY: ['background'],\n    BLOCKQUOTE: ['cite'],\n    Q: ['cite'],\n    DEL: ['cite'],\n    INS: ['cite'],\n    OBJECT: ['classid', 'codebase', 'data', 'usemap'],\n    APPLET: ['codebase'],\n    A: ['href'],\n    AREA: ['href'],\n    LINK: ['href'],\n    IMG: ['longdesc', 'src', 'usemap'],\n    FRAME: ['longdesc', 'src'],\n    IFRAME: ['longdesc', 'src'],\n    HEAD: ['profile'],\n    SCRIPT: ['src'],\n    INPUT: ['src', 'usemap', 'formaction'],\n    BUTTON: ['formaction'],\n    BASE: ['href'],\n    MENUITEM: ['icon'],\n    HTML: ['manifest'],\n    VIDEO: ['poster']\n  };\n\n  if (attrName === 'itemid') {\n    return true;\n  }\n\n  const urlAttrNames = urlAttrs[tagName] || [];\n  return urlAttrNames.includes(attrName);\n};\n\n// To get the protocol for a URL, we let the browser normalize it for\n// us, by setting it as the href for an anchor tag and then reading out\n// the 'protocol' property.\nlet anchorForNormalization\nif (Meteor.isClient) {\n  anchorForNormalization = document.createElement('A');\n}\n\nconst getUrlProtocol = function (url) {\n  if (Meteor.isClient) {\n    anchorForNormalization.href = url;\n    return (anchorForNormalization.protocol || \"\").toLowerCase();\n  } else {\n    throw new Error('getUrlProtocol not implemented on the server');\n  }\n};\n\n// UrlHandler is an attribute handler for all HTML attributes that take\n// URL values. It disallows javascript: URLs, unless\n// Blaze._allowJavascriptUrls() has been called. To detect javascript:\n// urls, we set the attribute on a dummy anchor element and then read\n// out the 'protocol' property of the attribute.\nconst origUpdate = AttributeHandler.prototype.update;\nconst UrlHandler = AttributeHandler.extend({\n  update: function (element, oldValue, value) {\n    const self = this;\n    const args = arguments;\n\n    if (Blaze._javascriptUrlsAllowed()) {\n      origUpdate.apply(self, args);\n    } else {\n      const isJavascriptProtocol = (getUrlProtocol(value) === \"javascript:\");\n      const isVBScriptProtocol   = (getUrlProtocol(value) === \"vbscript:\");\n      if (isJavascriptProtocol || isVBScriptProtocol) {\n        Blaze._warn(\"URLs that use the 'javascript:' or 'vbscript:' protocol are not \" +\n        \"allowed in URL attribute values. \" +\n        \"Call Blaze._allowJavascriptUrls() \" +\n        \"to enable them.\");\n        origUpdate.apply(self, [element, oldValue, null]);\n      } else {\n        origUpdate.apply(self, args);\n      }\n    }\n  }\n});\n\n// XXX make it possible for users to register attribute handlers!\nBlaze._makeAttributeHandler = function (elem, name, value) {\n  // generally, use setAttribute but certain attributes need to be set\n  // by directly setting a JavaScript property on the DOM element.\n  if (name === 'class') {\n    if (isSVGElement(elem)) {\n      return new SVGClassHandler(name, value);\n    } else {\n      return new ClassHandler(name, value);\n    }\n  } else if (name === 'style') {\n    return new StyleHandler(name, value);\n  } else if ((elem.tagName === 'OPTION' && name === 'selected') ||\n  (elem.tagName === 'INPUT' && name === 'checked') ||\n  (elem.tagName === 'VIDEO' && name === 'muted')) {\n    return new BooleanHandler(name, value);\n  } else if ((elem.tagName === 'TEXTAREA' || elem.tagName === 'INPUT')\n  && name === 'value') {\n    // internally, TEXTAREAs tracks their value in the 'value'\n    // attribute just like INPUTs.\n    return new DOMPropertyHandler(name, value);\n  } else if (name.substring(0,6) === 'xlink:') {\n    return new XlinkHandler(name.substring(6), value);\n  } else if (isUrlAttribute(elem.tagName, name)) {\n    return new UrlHandler(name, value);\n  } else {\n    return new AttributeHandler(name, value);\n  }\n};\n\nElementAttributesUpdater = function (elem) {\n  this.elem = elem;\n  this.handlers = {};\n};\n\n// Update attributes on `elem` to the dictionary `attrs`, whose\n// values are strings.\nElementAttributesUpdater.prototype.update = function(newAttrs) {\n  const elem = this.elem;\n  const handlers = this.handlers;\n\n  Object.getOwnPropertyNames(handlers).forEach((k) => {\n    if (!has(newAttrs, k)) {\n      // remove attributes (and handlers) for attribute names\n      // that don't exist as keys of `newAttrs` and so won't\n      // be visited when traversing it.  (Attributes that\n      // exist in the `newAttrs` object but are `null`\n      // are handled later.)\n      const handler = handlers[k];\n      const oldValue = handler.value;\n      handler.value = null;\n      handler.update(elem, oldValue, null);\n      delete handlers[k];\n    }\n  })\n\n  Object.getOwnPropertyNames(newAttrs).forEach((k) => {\n    let handler = null;\n    let oldValue = null;\n    const value = newAttrs[k];\n    if (!has(handlers, k)) {\n      if (value !== null) {\n        // make new handler\n        handler = Blaze._makeAttributeHandler(elem, k, value);\n        handlers[k] = handler;\n      }\n    } else {\n      handler = handlers[k];\n      oldValue = handler.value;\n    }\n    if (oldValue !== value) {\n      handler.value = value;\n      handler.update(elem, oldValue, value);\n      if (value === null)\n        delete handlers[k];\n    }\n  })\n};\n","// Turns HTMLjs into DOM nodes and DOMRanges.\n//\n// - `htmljs`: the value to materialize, which may be any of the htmljs\n//   types (Tag, CharRef, Comment, Raw, array, string, boolean, number,\n//   null, or undefined) or a View or Template (which will be used to\n//   construct a View).\n// - `intoArray`: the array of DOM nodes and DOMRanges to push the output\n//   into (required)\n// - `parentView`: the View we are materializing content for (optional)\n// - `_existingWorkStack`: optional argument, only used for recursive\n//   calls when there is some other _materializeDOM on the call stack.\n//   If _materializeDOM called your function and passed in a workStack,\n//   pass it back when you call _materializeDOM (such as from a workStack\n//   task).\n//\n// Returns `intoArray`, which is especially useful if you pass in `[]`.\nBlaze._materializeDOM = function (htmljs, intoArray, parentView,\n                                  _existingWorkStack) {\n  // In order to use fewer stack frames, materializeDOMInner can push\n  // tasks onto `workStack`, and they will be popped off\n  // and run, last first, after materializeDOMInner returns.  The\n  // reason we use a stack instead of a queue is so that we recurse\n  // depth-first, doing newer tasks first.\n  const workStack = (_existingWorkStack || []);\n  materializeDOMInner(htmljs, intoArray, parentView, workStack);\n\n  if (! _existingWorkStack) {\n    // We created the work stack, so we are responsible for finishing\n    // the work.  Call each \"task\" function, starting with the top\n    // of the stack.\n    while (workStack.length) {\n      // Note that running task() may push new items onto workStack.\n      const task = workStack.pop();\n      task();\n    }\n  }\n\n  return intoArray;\n};\n\nconst materializeDOMInner = function (htmljs, intoArray, parentView, workStack) {\n  if (htmljs == null) {\n    // null or undefined\n    return;\n  }\n\n  switch (typeof htmljs) {\n  case 'string': case 'boolean': case 'number':\n    intoArray.push(document.createTextNode(String(htmljs)));\n    return;\n  case 'object':\n    if (htmljs.htmljsType) {\n      switch (htmljs.htmljsType) {\n      case HTML.Tag.htmljsType:\n        intoArray.push(materializeTag(htmljs, parentView, workStack));\n        return;\n      case HTML.CharRef.htmljsType:\n        intoArray.push(document.createTextNode(htmljs.str));\n        return;\n      case HTML.Comment.htmljsType:\n        intoArray.push(document.createComment(htmljs.sanitizedValue));\n        return;\n      case HTML.Raw.htmljsType:\n        // Get an array of DOM nodes by using the browser's HTML parser\n        // (like innerHTML).\n        const nodes = Blaze._DOMBackend.parseHTML(htmljs.value);\n        for (let i = 0; i < nodes.length; i++)\n          intoArray.push(nodes[i]);\n        return;\n      }\n    } else if (HTML.isArray(htmljs)) {\n      for (let i = htmljs.length-1; i >= 0; i--) {\n        workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                              htmljs[i], intoArray, parentView, workStack));\n      }\n      return;\n    } else {\n      // Try to construct a `Blaze.View` out of the object. If it works...\n      if (isPromiseLike(htmljs)) {\n        htmljs = Blaze._Await(htmljs);\n      } else if (htmljs instanceof Blaze.Template) {\n        htmljs = htmljs.constructView();\n      }\n\n      // ...materialize it.\n      if (htmljs instanceof Blaze.View) {\n        Blaze._materializeView(htmljs, parentView, workStack, intoArray);\n        return;\n      }\n    }\n  }\n\n  throw new Error(\"Unexpected object in htmljs: \" + htmljs);\n};\n\nconst isPromiseLike = x => !!x && typeof x.then === 'function';\n\nfunction then(maybePromise, fn) {\n  if (isPromiseLike(maybePromise)) {\n    maybePromise.then(fn, Blaze._reportException);\n  } else {\n    fn(maybePromise);\n  }\n}\n\nfunction waitForAllAttributes(attrs) {\n  // Non-object attrs (e.g., `null`) are ignored.\n  if (!attrs || attrs !== Object(attrs)) {\n    return {};\n  }\n\n  // Combined attributes, e.g., `<img {{x}} {{y}}>`.\n  if (Array.isArray(attrs)) {\n    const mapped = attrs.map(waitForAllAttributes);\n    return mapped.some(isPromiseLike) ? Promise.all(mapped) : mapped;\n  }\n\n  // Singular async attributes, e.g., `<img {{x}}>`.\n  if (isPromiseLike(attrs)) {\n    return attrs.then(waitForAllAttributes, Blaze._reportExceptionAndThrow);\n  }\n\n  // Singular sync attributes, with potentially async properties.\n  const promises = [];\n  for (const [key, value] of Object.entries(attrs)) {\n    if (isPromiseLike(value)) {\n      promises.push(value.then(value => {\n        attrs[key] = value;\n      }, Blaze._reportExceptionAndThrow));\n    } else if (Array.isArray(value)) {\n      value.forEach((element, index) => {\n        if (isPromiseLike(element)) {\n          promises.push(element.then(element => {\n            value[index] = element;\n          }, Blaze._reportExceptionAndThrow));\n        }\n      });\n    }\n  }\n\n  // If any of the properties were async, lift the `Promise`.\n  return promises.length\n    ? Promise.all(promises).then(() => attrs, Blaze._reportExceptionAndThrow)\n    : attrs;\n}\n\nconst materializeTag = function (tag, parentView, workStack) {\n  const tagName = tag.tagName;\n  let elem;\n  if ((HTML.isKnownSVGElement(tagName) || isSVGAnchor(tag))\n      && document.createElementNS) {\n    // inline SVG\n    elem = document.createElementNS('http://www.w3.org/2000/svg', tagName);\n  } else {\n    // normal elements\n    elem = document.createElement(tagName);\n  }\n\n  let rawAttrs = tag.attrs;\n  let children = tag.children;\n  if (tagName === 'textarea' && tag.children.length &&\n      ! (rawAttrs && ('value' in rawAttrs))) {\n    // Provide very limited support for TEXTAREA tags with children\n    // rather than a \"value\" attribute.\n    // Reactivity in the form of Views nested in the tag's children\n    // won't work.  Compilers should compile textarea contents into\n    // the \"value\" attribute of the tag, wrapped in a function if there\n    // is reactivity.\n    if (typeof rawAttrs === 'function' ||\n        HTML.isArray(rawAttrs)) {\n      throw new Error(\"Can't have reactive children of TEXTAREA node; \" +\n                      \"use the 'value' attribute instead.\");\n    }\n    rawAttrs = Object.assign({}, rawAttrs || null);\n    rawAttrs.value = Blaze._expand(children, parentView);\n    children = [];\n  }\n\n  if (rawAttrs) {\n    const attrUpdater = new ElementAttributesUpdater(elem);\n    const updateAttributes = function () {\n      const expandedAttrs = Blaze._expandAttributes(rawAttrs, parentView);\n      then(waitForAllAttributes(expandedAttrs), awaitedAttrs => {\n        const flattenedAttrs = HTML.flattenAttributes(awaitedAttrs);\n        const stringAttrs = {};\n        Object.keys(flattenedAttrs).forEach((attrName) => {\n          // map `null`, `undefined`, and `false` to null, which is important\n          // so that attributes with nully values are considered absent.\n          // stringify anything else (e.g. strings, booleans, numbers including 0).\n          if (flattenedAttrs[attrName] == null || flattenedAttrs[attrName] === false)\n            stringAttrs[attrName] = null;\n          else\n            stringAttrs[attrName] = Blaze._toText(flattenedAttrs[attrName],\n                                                  parentView,\n                                                  HTML.TEXTMODE.STRING);\n        });\n        attrUpdater.update(stringAttrs);\n      });\n    };\n    let updaterComputation;\n    if (parentView) {\n      updaterComputation =\n        parentView.autorun(updateAttributes, undefined, 'updater');\n    } else {\n      updaterComputation = Tracker.nonreactive(function () {\n        return Tracker.autorun(function () {\n          Tracker._withCurrentView(parentView, updateAttributes);\n        });\n      });\n    }\n    Blaze._DOMBackend.Teardown.onElementTeardown(elem, function attrTeardown() {\n      updaterComputation.stop();\n    });\n  }\n\n  if (children.length) {\n    const childNodesAndRanges = [];\n    // push this function first so that it's done last\n    workStack.push(function () {\n      for (let i = 0; i < childNodesAndRanges.length; i++) {\n        const x = childNodesAndRanges[i];\n        if (x instanceof Blaze._DOMRange)\n          x.attach(elem);\n        else\n          elem.appendChild(x);\n      }\n    });\n    // now push the task that calculates childNodesAndRanges\n    workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                          children, childNodesAndRanges, parentView,\n                          workStack));\n  }\n\n  return elem;\n};\n\n\nconst isSVGAnchor = function (node) {\n  // We generally aren't able to detect SVG <a> elements because\n  // if \"A\" were in our list of known svg element names, then all\n  // <a> nodes would be created using\n  // `document.createElementNS`. But in the special case of <a\n  // xlink:href=\"...\">, we can at least detect that attribute and\n  // create an SVG <a> tag in that case.\n  //\n  // However, we still have a general problem of knowing when to\n  // use document.createElementNS and when to use\n  // document.createElement; for example, font tags will always\n  // be created as SVG elements which can cause other\n  // problems. #1977\n  return (node.tagName === \"a\" &&\n          node.attrs &&\n          node.attrs[\"xlink:href\"] !== undefined);\n};\n","let debugFunc;\n\n// We call into user code in many places, and it's nice to catch exceptions\n// propagated from user code immediately so that the whole system doesn't just\n// break.  Catching exceptions is easy; reporting them is hard.  This helper\n// reports exceptions.\n//\n// Usage:\n//\n// ```\n// try {\n//   // ... someStuff ...\n// } catch (e) {\n//   reportUIException(e);\n// }\n// ```\n//\n// An optional second argument overrides the default message.\n\n// Set this to `true` to cause `reportException` to throw\n// the next exception rather than reporting it.  This is\n// useful in unit tests that test error messages.\nBlaze._throwNextException = false;\n\nBlaze._reportException = function (e, msg) {\n  if (Blaze._throwNextException) {\n    Blaze._throwNextException = false;\n    throw e;\n  }\n\n  if (! debugFunc)\n    // adapted from Tracker\n    debugFunc = function () {\n      return (typeof Meteor !== \"undefined\" ? Meteor._debug :\n              ((typeof console !== \"undefined\") && console.log ? console.log :\n               function () {}));\n    };\n\n  // In Chrome, `e.stack` is a multiline string that starts with the message\n  // and contains a stack trace.  Furthermore, `console.log` makes it clickable.\n  // `console.log` supplies the space between the two arguments.\n  debugFunc()(msg || 'Exception caught in template:', e.stack || e.message || e);\n};\n\n// It's meant to be used in `Promise` chains to report the error while not\n// \"swallowing\" it (i.e., the chain will still reject).\nBlaze._reportExceptionAndThrow = function (error) {\n  Blaze._reportException(error);\n  throw error;\n};\n\nBlaze._wrapCatchingExceptions = function (f, where) {\n  if (typeof f !== 'function')\n    return f;\n\n  return function (...arguments) {\n    try {\n      return f.apply(this, arguments);\n    } catch (e) {\n      Blaze._reportException(e, 'Exception in ' + where + ':');\n    }\n  };\n};\n","/// [new] Blaze.View([name], renderMethod)\n///\n/// Blaze.View is the building block of reactive DOM.  Views have\n/// the following features:\n///\n/// * lifecycle callbacks - Views are created, rendered, and destroyed,\n///   and callbacks can be registered to fire when these things happen.\n///\n/// * parent pointer - A View points to its parentView, which is the\n///   View that caused it to be rendered.  These pointers form a\n///   hierarchy or tree of Views.\n///\n/// * render() method - A View's render() method specifies the DOM\n///   (or HTML) content of the View.  If the method establishes\n///   reactive dependencies, it may be re-run.\n///\n/// * a DOMRange - If a View is rendered to DOM, its position and\n///   extent in the DOM are tracked using a DOMRange object.\n///\n/// When a View is constructed by calling Blaze.View, the View is\n/// not yet considered \"created.\"  It doesn't have a parentView yet,\n/// and no logic has been run to initialize the View.  All real\n/// work is deferred until at least creation time, when the onViewCreated\n/// callbacks are fired, which happens when the View is \"used\" in\n/// some way that requires it to be rendered.\n///\n/// ...more lifecycle stuff\n///\n/// `name` is an optional string tag identifying the View.  The only\n/// time it's used is when looking in the View tree for a View of a\n/// particular name; for example, data contexts are stored on Views\n/// of name \"with\".  Names are also useful when debugging, so in\n/// general it's good for functions that create Views to set the name.\n/// Views associated with templates have names of the form \"Template.foo\".\nimport { HTML } from 'meteor/htmljs';\n\n/**\n * A binding is either `undefined` (pending), `{ error }` (rejected), or\n * `{ value }` (resolved). Synchronous values are immediately resolved (i.e.,\n * `{ value }` is used). The other states are reserved for asynchronous bindings\n * (i.e., values wrapped with `Promise`s).\n * @typedef {{ error: unknown } | { value: unknown } | undefined} Binding\n */\n\n/**\n * @class\n * @summary Constructor for a View, which represents a reactive region of DOM.\n * @locus Client\n * @param {String} [name] Optional.  A name for this type of View.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  In this function, `this` is bound to the View.\n */\nBlaze.View = function (name, render) {\n  if (! (this instanceof Blaze.View))\n    // called without `new`\n    return new Blaze.View(name, render);\n\n  if (typeof name === 'function') {\n    // omitted \"name\" argument\n    render = name;\n    name = '';\n  }\n  this.name = name;\n  this._render = render;\n\n  this._callbacks = {\n    created: null,\n    rendered: null,\n    destroyed: null\n  };\n\n  // Setting all properties here is good for readability,\n  // and also may help Chrome optimize the code by keeping\n  // the View object from changing shape too much.\n  this.isCreated = false;\n  this._isCreatedForExpansion = false;\n  this.isRendered = false;\n  this._isAttached = false;\n  this.isDestroyed = false;\n  this._isInRender = false;\n  this.parentView = null;\n  this._domrange = null;\n  // This flag is normally set to false except for the cases when view's parent\n  // was generated as part of expanding some syntactic sugar expressions or\n  // methods.\n  // Ex.: Blaze.renderWithData is an equivalent to creating a view with regular\n  // Blaze.render and wrapping it into {{#with data}}{{/with}} view. Since the\n  // users don't know anything about these generated parent views, Blaze needs\n  // this information to be available on views to make smarter decisions. For\n  // example: removing the generated parent view with the view on Blaze.remove.\n  this._hasGeneratedParent = false;\n  // Bindings accessible to children views (via view.lookup('name')) within the\n  // closest template view.\n  /** @type {Record<string, ReactiveVar<Binding>>} */\n  this._scopeBindings = {};\n\n  this.renderCount = 0;\n};\n\nBlaze.View.prototype._render = function () { return null; };\n\nBlaze.View.prototype.onViewCreated = function (cb) {\n  this._callbacks.created = this._callbacks.created || [];\n  this._callbacks.created.push(cb);\n};\n\nBlaze.View.prototype._onViewRendered = function (cb) {\n  this._callbacks.rendered = this._callbacks.rendered || [];\n  this._callbacks.rendered.push(cb);\n};\n\nBlaze.View.prototype.onViewReady = function (cb) {\n  const self = this;\n  const fire = function () {\n    Tracker.afterFlush(function () {\n      if (! self.isDestroyed) {\n        Blaze._withCurrentView(self, function () {\n          cb.call(self);\n        });\n      }\n    });\n  };\n  self._onViewRendered(function onViewRendered() {\n    if (self.isDestroyed)\n      return;\n    if (! self._domrange.attached)\n      self._domrange.onAttached(fire);\n    else\n      fire();\n  });\n};\n\nBlaze.View.prototype.onViewDestroyed = function (cb) {\n  this._callbacks.destroyed = this._callbacks.destroyed || [];\n  this._callbacks.destroyed.push(cb);\n};\nBlaze.View.prototype.removeViewDestroyedListener = function (cb) {\n  const destroyed = this._callbacks.destroyed;\n  if (! destroyed)\n    return;\n  const index = destroyed.lastIndexOf(cb);\n  if (index !== -1) {\n    // XXX You'd think the right thing to do would be splice, but _fireCallbacks\n    // gets sad if you remove callbacks while iterating over the list.  Should\n    // change this to use callback-hook or EventEmitter or something else that\n    // properly supports removal.\n    destroyed[index] = null;\n  }\n};\n\n/// View#autorun(func)\n///\n/// Sets up a Tracker autorun that is \"scoped\" to this View in two\n/// important ways: 1) Blaze.currentView is automatically set\n/// on every re-run, and 2) the autorun is stopped when the\n/// View is destroyed.  As with Tracker.autorun, the first run of\n/// the function is immediate, and a Computation object that can\n/// be used to stop the autorun is returned.\n///\n/// View#autorun is meant to be called from View callbacks like\n/// onViewCreated, or from outside the rendering process.  It may not\n/// be called before the onViewCreated callbacks are fired (too early),\n/// or from a render() method (too confusing).\n///\n/// Typically, autoruns that update the state\n/// of the View (as in Blaze.With) should be started from an onViewCreated\n/// callback.  Autoruns that update the DOM should be started\n/// from either onViewCreated (guarded against the absence of\n/// view._domrange), or onViewReady.\nBlaze.View.prototype.autorun = function (f, _inViewScope, displayName) {\n  const self = this;\n\n  // The restrictions on when View#autorun can be called are in order\n  // to avoid bad patterns, like creating a Blaze.View and immediately\n  // calling autorun on it.  A freshly created View is not ready to\n  // have logic run on it; it doesn't have a parentView, for example.\n  // It's when the View is materialized or expanded that the onViewCreated\n  // handlers are fired and the View starts up.\n  //\n  // Letting the render() method call `this.autorun()` is problematic\n  // because of re-render.  The best we can do is to stop the old\n  // autorun and start a new one for each render, but that's a pattern\n  // we try to avoid internally because it leads to helpers being\n  // called extra times, in the case where the autorun causes the\n  // view to re-render (and thus the autorun to be torn down and a\n  // new one established).\n  //\n  // We could lift these restrictions in various ways.  One interesting\n  // idea is to allow you to call `view.autorun` after instantiating\n  // `view`, and automatically wrap it in `view.onViewCreated`, deferring\n  // the autorun so that it starts at an appropriate time.  However,\n  // then we can't return the Computation object to the caller, because\n  // it doesn't exist yet.\n  if (! self.isCreated) {\n    throw new Error(\"View#autorun must be called from the created callback at the earliest\");\n  }\n  if (this._isInRender) {\n    throw new Error(\"Can't call View#autorun from inside render(); try calling it from the created or rendered callback\");\n  }\n\n  const templateInstanceFunc = Blaze.Template._currentTemplateInstanceFunc;\n\n  const func = function viewAutorun(c) {\n    return Blaze._withCurrentView(_inViewScope || self, function () {\n      return Blaze.Template._withTemplateInstanceFunc(\n        templateInstanceFunc, function () {\n          return f.call(self, c);\n        });\n    });\n  };\n\n  // Give the autorun function a better name for debugging and profiling.\n  // The `displayName` property is not part of the spec but browsers like Chrome\n  // and Firefox prefer it in debuggers over the name function was declared by.\n  func.displayName =\n    (self.name || 'anonymous') + ':' + (displayName || 'anonymous');\n  const comp = Tracker.autorun(func);\n\n  const stopComputation = function () { comp.stop(); };\n  self.onViewDestroyed(stopComputation);\n  comp.onStop(function () {\n    self.removeViewDestroyedListener(stopComputation);\n  });\n\n  return comp;\n};\n\nBlaze.View.prototype._errorIfShouldntCallSubscribe = function () {\n  const self = this;\n\n  if (! self.isCreated) {\n    throw new Error(\"View#subscribe must be called from the created callback at the earliest\");\n  }\n  if (self._isInRender) {\n    throw new Error(\"Can't call View#subscribe from inside render(); try calling it from the created or rendered callback\");\n  }\n  if (self.isDestroyed) {\n    throw new Error(\"Can't call View#subscribe from inside the destroyed callback, try calling it inside created or rendered.\");\n  }\n};\n\n/**\n * Just like Blaze.View#autorun, but with Meteor.subscribe instead of\n * Tracker.autorun. Stop the subscription when the view is destroyed.\n * @return {SubscriptionHandle} A handle to the subscription so that you can\n * see if it is ready, or stop it manually\n */\nBlaze.View.prototype.subscribe = function (args, options) {\n  const self = this;\n  options = options || {};\n\n  self._errorIfShouldntCallSubscribe();\n\n  let subHandle;\n  if (options.connection) {\n    subHandle = options.connection.subscribe.apply(options.connection, args);\n  } else {\n    subHandle = Meteor.subscribe.apply(Meteor, args);\n  }\n\n  self.onViewDestroyed(function () {\n    subHandle.stop();\n  });\n\n  return subHandle;\n};\n\nBlaze.View.prototype.firstNode = function () {\n  if (! this._isAttached)\n    throw new Error(\"View must be attached before accessing its DOM\");\n\n  return this._domrange.firstNode();\n};\n\nBlaze.View.prototype.lastNode = function () {\n  if (! this._isAttached)\n    throw new Error(\"View must be attached before accessing its DOM\");\n\n  return this._domrange.lastNode();\n};\n\nBlaze._fireCallbacks = function (view, which) {\n  Blaze._withCurrentView(view, function () {\n    Tracker.nonreactive(function fireCallbacks() {\n      const cbs = view._callbacks[which];\n      for (let i = 0, N = (cbs && cbs.length); i < N; i++)\n        cbs[i] && cbs[i].call(view);\n    });\n  });\n};\n\nBlaze._createView = function (view, parentView, forExpansion) {\n  if (view.isCreated)\n    throw new Error(\"Can't render the same View twice\");\n\n  view.parentView = (parentView || null);\n  view.isCreated = true;\n  if (forExpansion)\n    view._isCreatedForExpansion = true;\n\n  Blaze._fireCallbacks(view, 'created');\n};\n\nconst doFirstRender = function (view, initialContent) {\n  const domrange = new Blaze._DOMRange(initialContent);\n  view._domrange = domrange;\n  domrange.view = view;\n  view.isRendered = true;\n  Blaze._fireCallbacks(view, 'rendered');\n\n  let teardownHook = null;\n\n  domrange.onAttached(function attached(range, element) {\n    view._isAttached = true;\n\n    teardownHook = Blaze._DOMBackend.Teardown.onElementTeardown(\n      element, function teardown() {\n        Blaze._destroyView(view, true /* _skipNodes */);\n      });\n  });\n\n  // tear down the teardown hook\n  view.onViewDestroyed(function () {\n    if (teardownHook) teardownHook.stop();\n    teardownHook = null;\n  });\n\n  return domrange;\n};\n\n// Take an uncreated View `view` and create and render it to DOM,\n// setting up the autorun that updates the View.  Returns a new\n// DOMRange, which has been associated with the View.\n//\n// The private arguments `_workStack` and `_intoArray` are passed in\n// by Blaze._materializeDOM and are only present for recursive calls\n// (when there is some other _materializeView on the stack).  If\n// provided, then we avoid the mutual recursion of calling back into\n// Blaze._materializeDOM so that deep View hierarchies don't blow the\n// stack.  Instead, we push tasks onto workStack for the initial\n// rendering and subsequent setup of the View, and they are done after\n// we return.  When there is a _workStack, we do not return the new\n// DOMRange, but instead push it into _intoArray from a _workStack\n// task.\nBlaze._materializeView = function (view, parentView, _workStack, _intoArray) {\n  Blaze._createView(view, parentView);\n\n  let domrange;\n  let lastHtmljs;\n  // We don't expect to be called in a Computation, but just in case,\n  // wrap in Tracker.nonreactive.\n  Tracker.nonreactive(function () {\n    view.autorun(function doRender(c) {\n      // `view.autorun` sets the current view.\n      view.renderCount = view.renderCount + 1;\n      view._isInRender = true;\n      // Any dependencies that should invalidate this Computation come\n      // from this line:\n      const htmljs = view._render();\n      view._isInRender = false;\n\n      if (! c.firstRun && ! Blaze._isContentEqual(lastHtmljs, htmljs)) {\n        Tracker.nonreactive(function doMaterialize() {\n          // re-render\n          const rangesAndNodes = Blaze._materializeDOM(htmljs, [], view);\n          domrange.setMembers(rangesAndNodes);\n          Blaze._fireCallbacks(view, 'rendered');\n        });\n      }\n      lastHtmljs = htmljs;\n\n      // Causes any nested views to stop immediately, not when we call\n      // `setMembers` the next time around the autorun.  Otherwise,\n      // helpers in the DOM tree to be replaced might be scheduled\n      // to re-run before we have a chance to stop them.\n      Tracker.onInvalidate(function () {\n        if (domrange) {\n          domrange.destroyMembers();\n        }\n      });\n    }, undefined, 'materialize');\n\n    // first render.  lastHtmljs is the first htmljs.\n    let initialContents;\n    if (! _workStack) {\n      initialContents = Blaze._materializeDOM(lastHtmljs, [], view);\n      domrange = doFirstRender(view, initialContents);\n      initialContents = null; // help GC because we close over this scope a lot\n    } else {\n      // We're being called from Blaze._materializeDOM, so to avoid\n      // recursion and save stack space, provide a description of the\n      // work to be done instead of doing it.  Tasks pushed onto\n      // _workStack will be done in LIFO order after we return.\n      // The work will still be done within a Tracker.nonreactive,\n      // because it will be done by some call to Blaze._materializeDOM\n      // (which is always called in a Tracker.nonreactive).\n      initialContents = [];\n      // push this function first so that it happens last\n      _workStack.push(function () {\n        domrange = doFirstRender(view, initialContents);\n        initialContents = null; // help GC because of all the closures here\n        _intoArray.push(domrange);\n      });\n      // now push the task that calculates initialContents\n      _workStack.push(Blaze._bind(Blaze._materializeDOM, null,\n                             lastHtmljs, initialContents, view, _workStack));\n    }\n  });\n\n  if (! _workStack) {\n    return domrange;\n  } else {\n    return null;\n  }\n};\n\n// Expands a View to HTMLjs, calling `render` recursively on all\n// Views and evaluating any dynamic attributes.  Calls the `created`\n// callback, but not the `materialized` or `rendered` callbacks.\n// Destroys the view immediately, unless called in a Tracker Computation,\n// in which case the view will be destroyed when the Computation is\n// invalidated.  If called in a Tracker Computation, the result is a\n// reactive string; that is, the Computation will be invalidated\n// if any changes are made to the view or subviews that might affect\n// the HTML.\nBlaze._expandView = function (view, parentView) {\n  Blaze._createView(view, parentView, true /*forExpansion*/);\n\n  view._isInRender = true;\n  const htmljs = Blaze._withCurrentView(view, function () {\n    return view._render();\n  });\n  view._isInRender = false;\n\n  const result = Blaze._expand(htmljs, view);\n\n  if (Tracker.active) {\n    Tracker.onInvalidate(function () {\n      Blaze._destroyView(view);\n    });\n  } else {\n    Blaze._destroyView(view);\n  }\n\n  return result;\n};\n\n// Options: `parentView`\nBlaze._HTMLJSExpander = HTML.TransformingVisitor.extend();\nBlaze._HTMLJSExpander.def({\n  visitObject: function (x) {\n    if (x instanceof Blaze.Template)\n      x = x.constructView();\n    if (x instanceof Blaze.View)\n      return Blaze._expandView(x, this.parentView);\n\n    // this will throw an error; other objects are not allowed!\n    return HTML.TransformingVisitor.prototype.visitObject.call(this, x);\n  },\n  visitAttributes: function (attrs) {\n    // expand dynamic attributes\n    if (typeof attrs === 'function')\n      attrs = Blaze._withCurrentView(this.parentView, attrs);\n\n    // call super (e.g. for case where `attrs` is an array)\n    return HTML.TransformingVisitor.prototype.visitAttributes.call(this, attrs);\n  },\n  visitAttribute: function (name, value, tag) {\n    // expand attribute values that are functions.  Any attribute value\n    // that contains Views must be wrapped in a function.\n    if (typeof value === 'function')\n      value = Blaze._withCurrentView(this.parentView, value);\n\n    return HTML.TransformingVisitor.prototype.visitAttribute.call(\n      this, name, value, tag);\n  }\n});\n\n// Return Blaze.currentView, but only if it is being rendered\n// (i.e. we are in its render() method).\nconst currentViewIfRendering = function () {\n  const view = Blaze.currentView;\n  return (view && view._isInRender) ? view : null;\n};\n\nBlaze._expand = function (htmljs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  return (new Blaze._HTMLJSExpander(\n    {parentView: parentView})).visit(htmljs);\n};\n\nBlaze._expandAttributes = function (attrs, parentView) {\n  parentView = parentView || currentViewIfRendering();\n  const expanded = (new Blaze._HTMLJSExpander(\n    {parentView: parentView})).visitAttributes(attrs);\n  return expanded || {};\n};\n\nBlaze._destroyView = function (view, _skipNodes) {\n  if (view.isDestroyed)\n    return;\n  view.isDestroyed = true;\n\n\n  // Destroy views and elements recursively.  If _skipNodes,\n  // only recurse up to views, not elements, for the case where\n  // the backend (jQuery) is recursing over the elements already.\n\n  if (view._domrange) view._domrange.destroyMembers(_skipNodes);\n\n  // XXX: fire callbacks after potential members are destroyed\n  // otherwise it's tracker.flush will cause the above line will\n  // not be called and their views won't be destroyed\n  // Involved issues: DOMRange \"Must be attached\" error, mem leak\n\n  Blaze._fireCallbacks(view, 'destroyed');\n};\n\nBlaze._destroyNode = function (node) {\n  if (node.nodeType === 1)\n    Blaze._DOMBackend.Teardown.tearDownElement(node);\n};\n\n// Are the HTMLjs entities `a` and `b` the same?  We could be\n// more elaborate here but the point is to catch the most basic\n// cases.\nBlaze._isContentEqual = function (a, b) {\n  if (a instanceof HTML.Raw) {\n    return (b instanceof HTML.Raw) && (a.value === b.value);\n  } else if (a == null) {\n    return (b == null);\n  } else {\n    return (a === b) &&\n      ((typeof a === 'number') || (typeof a === 'boolean') ||\n       (typeof a === 'string'));\n  }\n};\n\n/**\n * @summary The View corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @type {Blaze.View}\n */\nBlaze.currentView = null;\n\n/**\n * @template T\n * @param {Blaze.View} view\n * @param {function(): T} func\n * @returns {T}\n */\nBlaze._withCurrentView = function (view, func) {\n  const oldView = Blaze.currentView;\n  try {\n    Blaze.currentView = view;\n    return func();\n  } finally {\n    Blaze.currentView = oldView;\n  }\n};\n\n// Blaze.render publicly takes a View or a Template.\n// Privately, it takes any HTMLJS (extended with Views and Templates)\n// except null or undefined, or a function that returns any extended\n// HTMLJS.\nconst checkRenderContent = function (content) {\n  if (content === null)\n    throw new Error(\"Can't render null\");\n  if (typeof content === 'undefined')\n    throw new Error(\"Can't render undefined\");\n\n  if ((content instanceof Blaze.View) ||\n      (content instanceof Blaze.Template) ||\n      (typeof content === 'function'))\n    return;\n\n  try {\n    // Throw if content doesn't look like HTMLJS at the top level\n    // (i.e. verify that this is an HTML.Tag, or an array,\n    // or a primitive, etc.)\n    (new HTML.Visitor).visit(content);\n  } catch (e) {\n    // Make error message suitable for public API\n    throw new Error(\"Expected Template or View\");\n  }\n};\n\n// For Blaze.render and Blaze.toHTML, take content and\n// wrap it in a View, unless it's a single View or\n// Template already.\nconst contentAsView = function (content) {\n  checkRenderContent(content);\n\n  if (content instanceof Blaze.Template) {\n    return content.constructView();\n  } else if (content instanceof Blaze.View) {\n    return content;\n  } else {\n    let func = content;\n    if (typeof func !== 'function') {\n      func = function () {\n        return content;\n      };\n    }\n    return Blaze.View('render', func);\n  }\n};\n\n// For Blaze.renderWithData and Blaze.toHTMLWithData, wrap content\n// in a function, if necessary, so it can be a content arg to\n// a Blaze.With.\nconst contentAsFunc = function (content) {\n  checkRenderContent(content);\n\n  if (typeof content !== 'function') {\n    return function () {\n      return content;\n    };\n  } else {\n    return content;\n  }\n};\n\nBlaze.__rootViews = [];\n\n/**\n * @summary Renders a template or View to DOM nodes and inserts it into the DOM, returning a rendered [View](#Blaze-View) which can be passed to [`Blaze.remove`](#Blaze-remove).\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.  If a template, a View object is [constructed](#template_constructview).  If a View, it must be an unrendered View, which becomes a rendered View and is returned.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.render = function (content, parentElement, nextNode, parentView) {\n  if (! parentElement) {\n    Blaze._warn(\"Blaze.render without a parent element is deprecated. \" +\n                \"You must specify where to insert the rendered content.\");\n  }\n\n  if (nextNode instanceof Blaze.View) {\n    // handle omitted nextNode\n    parentView = nextNode;\n    nextNode = null;\n  }\n\n  // parentElement must be a DOM node. in particular, can't be the\n  // result of a call to `$`. Can't check if `parentElement instanceof\n  // Node` since 'Node' is undefined in IE8.\n  if (parentElement && typeof parentElement.nodeType !== 'number')\n    throw new Error(\"'parentElement' must be a DOM node\");\n  if (nextNode && typeof nextNode.nodeType !== 'number') // 'nextNode' is optional\n    throw new Error(\"'nextNode' must be a DOM node\");\n\n  parentView = parentView || currentViewIfRendering();\n\n  const view = contentAsView(content);\n\n  // TODO: this is only needed in development\n  if (!parentView) {\n    view.onViewCreated(function () {\n      Blaze.__rootViews.push(view);\n    });\n\n    view.onViewDestroyed(function () {\n      let index = Blaze.__rootViews.indexOf(view);\n      if (index > -1) {\n        Blaze.__rootViews.splice(index, 1);\n      }\n    });\n  }\n\n  Blaze._materializeView(view, parentView);\n  if (parentElement) {\n    view._domrange.attach(parentElement, nextNode);\n  }\n\n  return view;\n};\n\nBlaze.insert = function (view, parentElement, nextNode) {\n  Blaze._warn(\"Blaze.insert has been deprecated.  Specify where to insert the \" +\n              \"rendered content in the call to Blaze.render.\");\n\n  if (! (view && (view._domrange instanceof Blaze._DOMRange)))\n    throw new Error(\"Expected template rendered with Blaze.render\");\n\n  view._domrange.attach(parentElement, nextNode);\n};\n\n/**\n * @summary Renders a template or View to DOM nodes with a data context.  Otherwise identical to `Blaze.render`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object to render.\n * @param {Object|Function} data The data context to use, or a function returning a data context.  If a function is provided, it will be reactively re-run.\n * @param {DOMNode} parentNode The node that will be the parent of the rendered template.  It must be an Element node.\n * @param {DOMNode} [nextNode] Optional. If provided, must be a child of <em>parentNode</em>; the template will be inserted before this node. If not provided, the template will be inserted as the last child of parentNode.\n * @param {Blaze.View} [parentView] Optional. If provided, it will be set as the rendered View's [`parentView`](#view_parentview).\n */\nBlaze.renderWithData = function (content, data, parentElement, nextNode, parentView) {\n  // We defer the handling of optional arguments to Blaze.render.  At this point,\n  // `nextNode` may actually be `parentView`.\n  return Blaze.render(Blaze._TemplateWith(data, contentAsFunc(content)),\n                          parentElement, nextNode, parentView);\n};\n\n/**\n * @summary Removes a rendered View from the DOM, stopping all reactive updates and event listeners on it. Also destroys the Blaze.Template instance associated with the view.\n * @locus Client\n * @param {Blaze.View} renderedView The return value from `Blaze.render` or `Blaze.renderWithData`, or the `view` property of a Blaze.Template instance. Calling `Blaze.remove(Template.instance().view)` from within a template event handler will destroy the view as well as that template and trigger the template's `onDestroyed` handlers.\n */\nBlaze.remove = function (view) {\n  if (! (view && (view._domrange instanceof Blaze._DOMRange)))\n    throw new Error(\"Expected template rendered with Blaze.render\");\n\n  while (view) {\n    if (! view.isDestroyed) {\n      const range = view._domrange;\n      range.destroy();\n\n      if (range.attached && ! range.parentRange) {\n        range.detach();\n      }\n    }\n\n    view = view._hasGeneratedParent && view.parentView;\n  }\n};\n\n/**\n * @summary Renders a template or View to a string of HTML.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n */\nBlaze.toHTML = function (content, parentView) {\n  parentView = parentView || currentViewIfRendering();\n\n  return HTML.toHTML(Blaze._expandView(contentAsView(content), parentView));\n};\n\n/**\n * @summary Renders a template or View to HTML with a data context.  Otherwise identical to `Blaze.toHTML`.\n * @locus Client\n * @param {Template|Blaze.View} templateOrView The template (e.g. `Template.myTemplate`) or View object from which to generate HTML.\n * @param {Object|Function} data The data context to use, or a function returning a data context.\n */\nBlaze.toHTMLWithData = function (content, data, parentView) {\n  parentView = parentView || currentViewIfRendering();\n\n  return HTML.toHTML(Blaze._expandView(Blaze._TemplateWith(\n    data, contentAsFunc(content)), parentView));\n};\n\nBlaze._toText = function (htmljs, parentView, textMode) {\n  if (typeof htmljs === 'function')\n    throw new Error(\"Blaze._toText doesn't take a function, just HTMLjs\");\n\n  if ((parentView != null) && ! (parentView instanceof Blaze.View)) {\n    // omitted parentView argument\n    textMode = parentView;\n    parentView = null;\n  }\n  parentView = parentView || currentViewIfRendering();\n\n  if (! textMode)\n    throw new Error(\"textMode required\");\n  if (! (textMode === HTML.TEXTMODE.STRING ||\n         textMode === HTML.TEXTMODE.RCDATA ||\n         textMode === HTML.TEXTMODE.ATTRIBUTE))\n    throw new Error(\"Unknown textMode: \" + textMode);\n\n  return HTML.toText(Blaze._expand(htmljs, parentView), textMode);\n};\n\n/**\n * @summary Returns the current data context, or the data context that was used when rendering a particular DOM element or View from a Meteor template.\n * @locus Client\n * @param {DOMElement|Blaze.View} [elementOrView] Optional.  An element that was rendered by a Meteor, or a View.\n */\nBlaze.getData = function (elementOrView) {\n  let theWith;\n\n  if (! elementOrView) {\n    theWith = Blaze.getView('with');\n  } else if (elementOrView instanceof Blaze.View) {\n    const view = elementOrView;\n    theWith = (view.name === 'with' ? view :\n               Blaze.getView(view, 'with'));\n  } else if (typeof elementOrView.nodeType === 'number') {\n    if (elementOrView.nodeType !== 1)\n      throw new Error(\"Expected DOM element\");\n    theWith = Blaze.getView(elementOrView, 'with');\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n\n  return theWith ? theWith.dataVar.get()?.value : null;\n};\n\n// For back-compat\nBlaze.getElementData = function (element) {\n  Blaze._warn(\"Blaze.getElementData has been deprecated.  Use \" +\n              \"Blaze.getData(element) instead.\");\n\n  if (element.nodeType !== 1)\n    throw new Error(\"Expected DOM element\");\n\n  return Blaze.getData(element);\n};\n\n// Both arguments are optional.\n\n/**\n * @summary Gets either the current View, or the View enclosing the given DOM element.\n * @locus Client\n * @param {DOMElement} [element] Optional.  If specified, the View enclosing `element` is returned.\n */\nBlaze.getView = function (elementOrView, _viewName) {\n  let viewName = _viewName;\n\n  if ((typeof elementOrView) === 'string') {\n    // omitted elementOrView; viewName present\n    viewName = elementOrView;\n    elementOrView = null;\n  }\n\n  // We could eventually shorten the code by folding the logic\n  // from the other methods into this method.\n  if (! elementOrView) {\n    return Blaze._getCurrentView(viewName);\n  } else if (elementOrView instanceof Blaze.View) {\n    return Blaze._getParentView(elementOrView, viewName);\n  } else if (typeof elementOrView.nodeType === 'number') {\n    return Blaze._getElementView(elementOrView, viewName);\n  } else {\n    throw new Error(\"Expected DOM element or View\");\n  }\n};\n\n// Gets the current view or its nearest ancestor of name\n// `name`.\nBlaze._getCurrentView = function (name) {\n  let view = Blaze.currentView;\n  // Better to fail in cases where it doesn't make sense\n  // to use Blaze._getCurrentView().  There will be a current\n  // view anywhere it does.  You can check Blaze.currentView\n  // if you want to know whether there is one or not.\n  if (! view)\n    throw new Error(\"There is no current view\");\n\n  if (name) {\n    while (view && view.name !== name)\n      view = view.parentView;\n    return view || null;\n  } else {\n    // Blaze._getCurrentView() with no arguments just returns\n    // Blaze.currentView.\n    return view;\n  }\n};\n\nBlaze._getParentView = function (view, name) {\n  let v = view.parentView;\n\n  if (name) {\n    while (v && v.name !== name)\n      v = v.parentView;\n  }\n\n  return v || null;\n};\n\nBlaze._getElementView = function (elem, name) {\n  let range = Blaze._DOMRange.forElement(elem);\n  let view = null;\n  while (range && ! view) {\n    view = (range.view || null);\n    if (! view) {\n      if (range.parentRange)\n        range = range.parentRange;\n      else\n        range = Blaze._DOMRange.forElement(range.parentElement);\n    }\n  }\n\n  if (name) {\n    while (view && view.name !== name)\n      view = view.parentView;\n    return view || null;\n  } else {\n    return view;\n  }\n};\n\nBlaze._addEventMap = function (view, eventMap, thisInHandler) {\n  thisInHandler = (thisInHandler || null);\n  const handles = [];\n\n  if (! view._domrange)\n    throw new Error(\"View must have a DOMRange\");\n\n  view._domrange.onAttached(function attached_eventMaps(range, element) {\n    Object.keys(eventMap).forEach(function (spec) {\n      let handler = eventMap[spec];\n      const clauses = spec.split(/,\\s+/);\n      // iterate over clauses of spec, e.g. ['click .foo', 'click .bar']\n      clauses.forEach(function (clause) {\n        const parts = clause.split(/\\s+/);\n        if (parts.length === 0)\n          return;\n\n        const newEvents = parts.shift();\n        const selector = parts.join(' ');\n        handles.push(Blaze._EventSupport.listen(\n          element, newEvents, selector,\n          function (evt) {\n            if (! range.containsElement(evt.currentTarget, selector, newEvents))\n              return null;\n            const handlerThis = thisInHandler || this;\n            const handlerArgs = arguments;\n            return Blaze._withCurrentView(view, function () {\n              return handler.apply(handlerThis, handlerArgs);\n            });\n          },\n          range, function (r) {\n            return r.parentRange;\n          }));\n      });\n    });\n  });\n\n  view.onViewDestroyed(function () {\n    handles.forEach(function (h) {\n      h.stop();\n    });\n    handles.length = 0;\n  });\n};\n","import has from 'lodash.has';\nimport isObject from 'lodash.isobject';\n\nBlaze._calculateCondition = function (cond) {\n  if (HTML.isArray(cond) && cond.length === 0) return false;\n  return !!cond;\n};\n\n/**\n * @summary Constructs a View that renders content with a data context.\n * @locus Client\n * @param {Object|Function} data An object to use as the data context, or a function returning such an object.  If a\n *   function is provided, it will be reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.With = function (data, contentFunc) {\n  const view = Blaze.View('with', contentFunc);\n\n  view.dataVar = null;\n  view.onViewCreated(() => {\n    view.dataVar = _createBinding(view, data, 'setData');\n  });\n\n  return view;\n};\n\n\n/**\n * @summary Shallow compare of two bindings.\n * @param {Binding} x\n * @param {Binding} y\n */\nfunction _isEqualBinding(x, y) {\n  if (typeof x === 'object' && typeof y === 'object') {\n    return x.error === y.error && ReactiveVar._isEqual(x.value, y.value);\n  }\n  else {\n    return ReactiveVar._isEqual(x, y);\n  }\n}\n\n/**\n * @template T\n * @param {T} x\n * @returns {T}\n */\nfunction _identity(x) {\n  return x;\n}\n\n/**\n * Attaches a single binding to the instantiated view.\n * @template T, U\n * @param {ReactiveVar<U>} reactiveVar Target view.\n * @param {Promise<T> | T} value Bound value.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n */\nfunction _setBindingValue(reactiveVar, value, mapper = _identity) {\n  if (value && typeof value.then === 'function') {\n    value.then(\n      value => reactiveVar.set({ value: mapper(value) }),\n      error => reactiveVar.set({ error }),\n    );\n  } else {\n    reactiveVar.set({ value: mapper(value) });\n  }\n}\n\n/**\n * @template T, U\n * @param {Blaze.View} view Target view.\n * @param {Promise<T> | T | function(): (Promise<T> | T)} binding Binding value or its getter.\n * @param {string} [displayName] Autorun's display name.\n * @param {function(T): U} [mapper] Maps the computed value before store.\n * @returns {ReactiveVar<U>}\n */\nfunction _createBinding(view, binding, displayName, mapper) {\n  const reactiveVar = new ReactiveVar(undefined, _isEqualBinding);\n  if (typeof binding === 'function') {\n    view.autorun(\n      () => _setBindingValue(reactiveVar, binding(), mapper),\n      view.parentView,\n      displayName,\n    );\n  } else {\n    _setBindingValue(reactiveVar, binding, mapper);\n  }\n\n  return reactiveVar;\n}\n\n/**\n * Attaches bindings to the instantiated view.\n * @param {Object} bindings A dictionary of bindings, each binding name\n * corresponds to a value or a function that will be reactively re-run.\n * @param {Blaze.View} view The target.\n */\nBlaze._attachBindingsToView = function (bindings, view) {\n  view.onViewCreated(function () {\n    Object.entries(bindings).forEach(function ([name, binding]) {\n      view._scopeBindings[name] = _createBinding(view, binding);\n    });\n  });\n};\n\n/**\n * @summary Constructs a View setting the local lexical scope in the block.\n * @param {Function} bindings Dictionary mapping names of bindings to\n * values or computations to reactively re-run.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n */\nBlaze.Let = function (bindings, contentFunc) {\n  var view = Blaze.View('let', contentFunc);\n  Blaze._attachBindingsToView(bindings, view);\n\n  return view;\n};\n\n/**\n * @summary Constructs a View that renders content conditionally.\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  Whether the result is truthy or falsy determines\n *   whether `contentFunc` or `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.If = function (conditionFunc, contentFunc, elseFunc, _not) {\n  const view = Blaze.View(_not ? 'unless' : 'if', function () {\n    // Render only if the binding has a value, i.e., it's either synchronous or\n    // has resolved. Rejected `Promise`s are NOT rendered.\n    const condition = view.__conditionVar.get();\n    if (condition && 'value' in condition) {\n      return condition.value ? contentFunc() : (elseFunc ? elseFunc() : null);\n    }\n\n    return null;\n  });\n\n  view.__conditionVar = null;\n  view.onViewCreated(() => {\n    view.__conditionVar = _createBinding(\n      view,\n      conditionFunc,\n      'condition',\n      // Store only the actual condition.\n      value => !Blaze._calculateCondition(value) !== !_not,\n    );\n  });\n\n  return view;\n};\n\n/**\n * @summary An inverted [`Blaze.If`](#Blaze-If).\n * @locus Client\n * @param {Function} conditionFunc A function to reactively re-run.  If the result is falsy, `contentFunc` is shown,\n *   otherwise `elseFunc` is shown.  An empty array is considered falsy.\n * @param {Function} contentFunc A Function that returns [*renderable content*](#Renderable-Content).\n * @param {Function} [elseFunc] Optional.  A Function that returns [*renderable content*](#Renderable-Content).  If no\n *   `elseFunc` is supplied, no content is shown in the \"else\" case.\n */\nBlaze.Unless = function (conditionFunc, contentFunc, elseFunc) {\n  return Blaze.If(conditionFunc, contentFunc, elseFunc, true /*_not*/);\n};\n\n/**\n * @summary Constructs a View that renders `contentFunc` for each item in a sequence.\n * @locus Client\n * @param {Function} argFunc A function to reactively re-run. The function can\n * return one of two options:\n *\n * 1. An object with two fields: '_variable' and '_sequence'. Each iterates over\n *   '_sequence', it may be a Cursor, an array, null, or undefined. Inside the\n *   Each body you will be able to get the current item from the sequence using\n *   the name specified in the '_variable' field.\n *\n * 2. Just a sequence (Cursor, array, null, or undefined) not wrapped into an\n *   object. Inside the Each body, the current item will be set as the data\n *   context.\n * @param {Function} contentFunc A Function that returns  [*renderable\n * content*](#Renderable-Content).\n * @param {Function} [elseFunc] A Function that returns [*renderable\n * content*](#Renderable-Content) to display in the case when there are no items\n * in the sequence.\n */\nBlaze.Each = function (argFunc, contentFunc, elseFunc) {\n  const eachView = Blaze.View('each', function () {\n    const subviews = this.initialSubviews;\n    this.initialSubviews = null;\n    if (this._isCreatedForExpansion) {\n      this.expandedValueDep = new Tracker.Dependency;\n      this.expandedValueDep.depend();\n    }\n    return subviews;\n  });\n  eachView.initialSubviews = [];\n  eachView.numItems = 0;\n  eachView.inElseMode = false;\n  eachView.stopHandle = null;\n  eachView.contentFunc = contentFunc;\n  eachView.elseFunc = elseFunc;\n  eachView.argVar = undefined;\n  eachView.variableName = null;\n\n  // update the @index value in the scope of all subviews in the range\n  const updateIndices = function (from, to) {\n    if (to === undefined) {\n      to = eachView.numItems - 1;\n    }\n\n    for (let i = from; i <= to; i++) {\n      const view = eachView._domrange.members[i].view;\n      view._scopeBindings['@index'].set({ value: i });\n    }\n  };\n\n  eachView.onViewCreated(function () {\n    // We evaluate `argFunc` in `Tracker.autorun` to ensure `Blaze.currentView`\n    // is always set when it runs.\n    eachView.argVar = _createBinding(\n      eachView,\n      // Unwrap a sequence reactively (`{{#each x in xs}}`).\n      () => {\n        let maybeSequence = argFunc();\n        if (isObject(maybeSequence) && has(maybeSequence, '_sequence')) {\n          eachView.variableName = maybeSequence._variable || null;\n          maybeSequence = maybeSequence._sequence;\n        }\n        return maybeSequence;\n      },\n      'collection',\n    );\n\n    eachView.stopHandle = ObserveSequence.observe(function () {\n      return eachView.argVar.get()?.value;\n    }, {\n      addedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          let newItemView;\n          if (eachView.variableName) {\n            // new-style #each (as in {{#each item in items}})\n            // doesn't create a new data context\n            newItemView = Blaze.View('item', eachView.contentFunc);\n          } else {\n            newItemView = Blaze.With(item, eachView.contentFunc);\n          }\n\n          eachView.numItems++;\n\n          const bindings = {};\n          bindings['@index'] = index;\n          if (eachView.variableName) {\n            bindings[eachView.variableName] = item;\n          }\n          Blaze._attachBindingsToView(bindings, newItemView);\n\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            if (eachView.inElseMode) {\n              eachView._domrange.removeMember(0);\n              eachView.inElseMode = false;\n            }\n\n            const range = Blaze._materializeView(newItemView, eachView);\n            eachView._domrange.addMember(range, index);\n            updateIndices(index);\n          } else {\n            eachView.initialSubviews.splice(index, 0, newItemView);\n          }\n        });\n      },\n      removedAt: function (id, item, index) {\n        Tracker.nonreactive(function () {\n          eachView.numItems--;\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.removeMember(index);\n            updateIndices(index);\n            if (eachView.elseFunc && eachView.numItems === 0) {\n              eachView.inElseMode = true;\n              eachView._domrange.addMember(\n                Blaze._materializeView(\n                  Blaze.View('each_else',eachView.elseFunc),\n                  eachView), 0);\n            }\n          } else {\n            eachView.initialSubviews.splice(index, 1);\n          }\n        });\n      },\n      changedAt: function (id, newItem, oldItem, index) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else {\n            let itemView;\n            if (eachView._domrange) {\n              itemView = eachView._domrange.getMember(index).view;\n            } else {\n              itemView = eachView.initialSubviews[index];\n            }\n            if (eachView.variableName) {\n              itemView._scopeBindings[eachView.variableName].set({ value: newItem });\n            } else {\n              itemView.dataVar.set({ value: newItem });\n            }\n          }\n        });\n      },\n      movedTo: function (id, item, fromIndex, toIndex) {\n        Tracker.nonreactive(function () {\n          if (eachView.expandedValueDep) {\n            eachView.expandedValueDep.changed();\n          } else if (eachView._domrange) {\n            eachView._domrange.moveMember(fromIndex, toIndex);\n            updateIndices(\n              Math.min(fromIndex, toIndex), Math.max(fromIndex, toIndex));\n          } else {\n            const subviews = eachView.initialSubviews;\n            const itemView = subviews[fromIndex];\n            subviews.splice(fromIndex, 1);\n            subviews.splice(toIndex, 0, itemView);\n          }\n        });\n      }\n    });\n\n    if (eachView.elseFunc && eachView.numItems === 0) {\n      eachView.inElseMode = true;\n      eachView.initialSubviews[0] =\n        Blaze.View('each_else', eachView.elseFunc);\n    }\n  });\n\n  eachView.onViewDestroyed(function () {\n    if (eachView.stopHandle)\n      eachView.stopHandle.stop();\n  });\n\n  return eachView;\n};\n\n/**\n * Create a new `Blaze.Let` view that unwraps the given value.\n * @param {unknown} value\n * @returns {Blaze.View}\n */\nBlaze._Await = function (value) {\n  return Blaze.Let({ value }, Blaze._AwaitContent);\n};\n\nBlaze._AwaitContent = function () {\n  return Blaze.currentView._scopeBindings.value.get()?.value;\n};\n\nBlaze._TemplateWith = function (arg, contentFunc) {\n  let w;\n\n  let argFunc = arg;\n  if (typeof arg !== 'function') {\n    argFunc = function () {\n      return arg;\n    };\n  }\n\n  // This is a little messy.  When we compile `{{> Template.contentBlock}}`, we\n  // wrap it in Blaze._InOuterTemplateScope in order to skip the intermediate\n  // parent Views in the current template.  However, when there's an argument\n  // (`{{> Template.contentBlock arg}}`), the argument needs to be evaluated\n  // in the original scope.  There's no good order to nest\n  // Blaze._InOuterTemplateScope and Blaze._TemplateWith to achieve this,\n  // so we wrap argFunc to run it in the \"original parentView\" of the\n  // Blaze._InOuterTemplateScope.\n  //\n  // To make this better, reconsider _InOuterTemplateScope as a primitive.\n  // Longer term, evaluate expressions in the proper lexical scope.\n  const wrappedArgFunc = function () {\n    let viewToEvaluateArg = null;\n    if (w.parentView && w.parentView.name === 'InOuterTemplateScope') {\n      viewToEvaluateArg = w.parentView.originalParentView;\n    }\n    if (viewToEvaluateArg) {\n      return Blaze._withCurrentView(viewToEvaluateArg, argFunc);\n    } else {\n      return argFunc();\n    }\n  };\n\n  const wrappedContentFunc = function () {\n    let content = contentFunc.call(this);\n\n    // Since we are generating the Blaze._TemplateWith view for the\n    // user, set the flag on the child view.  If `content` is a template,\n    // construct the View so that we can set the flag.\n    if (content instanceof Blaze.Template) {\n      content = content.constructView();\n    }\n    if (content instanceof Blaze.View) {\n      content._hasGeneratedParent = true;\n    }\n\n    return content;\n  };\n\n  w = Blaze.With(wrappedArgFunc, wrappedContentFunc);\n  w.__isTemplateWith = true;\n  return w;\n};\n\nBlaze._InOuterTemplateScope = function (templateView, contentFunc) {\n  const view = Blaze.View('InOuterTemplateScope', contentFunc);\n  let parentView = templateView.parentView;\n\n  // Hack so that if you call `{{> foo bar}}` and it expands into\n  // `{{#with bar}}{{> foo}}{{/with}}`, and then `foo` is a template\n  // that inserts `{{> Template.contentBlock}}`, the data context for\n  // `Template.contentBlock` is not `bar` but the one enclosing that.\n  if (parentView.__isTemplateWith)\n    parentView = parentView.parentView;\n\n  view.onViewCreated(function () {\n    this.originalParentView = this.parentView;\n    this.parentView = parentView;\n    this.__childDoesntStartNewLexicalScope = true;\n  });\n  return view;\n};\n\n","import has from 'lodash.has';\n\n/** @param {function(Binding): boolean} fn */\nfunction _createBindingsHelper(fn) {\n  /** @param {string[]} names */\n  return (...names) => {\n    const view = Blaze.currentView;\n\n    // There's either zero arguments (i.e., check all bindings) or an additional\n    // \"hash\" argument that we have to ignore.\n    names = names.length === 0\n      // TODO: Should we walk up the bindings here?\n      ? Object.keys(view._scopeBindings)\n      : names.slice(0, -1);\n\n    return names.some(name => {\n      const binding = _lexicalBindingLookup(view, name);\n      if (!binding) {\n        throw new Error(`Binding for \"${name}\" was not found.`);\n      }\n\n      return fn(binding.get());\n    });\n  };\n}\n\nBlaze._globalHelpers = {\n  /** @summary Check whether any of the given bindings (or all if none given) is still pending. */\n  '@pending': _createBindingsHelper(binding => binding === undefined),\n  /** @summary Check whether any of the given bindings (or all if none given) has rejected. */\n  '@rejected': _createBindingsHelper(binding => !!binding && 'error' in binding),\n  /** @summary Check whether any of the given bindings (or all if none given) has resolved. */\n  '@resolved': _createBindingsHelper(binding => !!binding && 'value' in binding),\n};\n\n// Documented as Template.registerHelper.\n// This definition also provides back-compat for `UI.registerHelper`.\nBlaze.registerHelper = function (name, func) {\n  Blaze._globalHelpers[name] = func;\n};\n\n// Also documented as Template.deregisterHelper\nBlaze.deregisterHelper = function(name) {\n  delete Blaze._globalHelpers[name];\n};\n\nconst bindIfIsFunction = function (x, target) {\n  if (typeof x !== 'function')\n    return x;\n  return Blaze._bind(x, target);\n};\n\n// If `x` is a function, binds the value of `this` for that function\n// to the current data context.\nconst bindDataContext = function (x) {\n  if (typeof x === 'function') {\n    return function (...args) {\n      let data = Blaze.getData();\n      if (data == null)\n        data = {};\n      return x.apply(data, args);\n    };\n  }\n  return x;\n};\n\nBlaze._OLDSTYLE_HELPER = {};\n\nBlaze._getTemplateHelper = function (template, name, tmplInstanceFunc) {\n  // XXX COMPAT WITH 0.9.3\n  let isKnownOldStyleHelper = false;\n\n  if (template.__helpers.has(name)) {\n    const helper = template.__helpers.get(name);\n    if (helper === Blaze._OLDSTYLE_HELPER) {\n      isKnownOldStyleHelper = true;\n    } else if (helper != null) {\n      const printName = `${template.viewName} ${name}`;\n      return wrapHelper(bindDataContext(helper), tmplInstanceFunc, printName);\n    } else {\n      return null;\n    }\n  }\n\n  // old-style helper\n  if (name in template) {\n    // Only warn once per helper\n    if (! isKnownOldStyleHelper) {\n      template.__helpers.set(name, Blaze._OLDSTYLE_HELPER);\n      if (! template._NOWARN_OLDSTYLE_HELPERS) {\n        Blaze._warn('Assigning helper with `' + template.viewName + '.' +\n                    name + ' = ...` is deprecated.  Use `' + template.viewName +\n                    '.helpers(...)` instead.');\n      }\n    }\n    if (template[name] != null) {\n      return wrapHelper(bindDataContext(template[name]), tmplInstanceFunc);\n    }\n  }\n\n  return null;\n};\n\nconst wrapHelper = function (f, templateFunc, name = 'template helper') {\n  if (typeof f !== \"function\") {\n    return f;\n  }\n\n  return function (...args) {\n    const self = this;\n\n    return Blaze.Template._withTemplateInstanceFunc(templateFunc, function () {\n      return Blaze._wrapCatchingExceptions(f, name).apply(self, args);\n    });\n  };\n};\n\nfunction _lexicalKeepGoing(currentView) {\n  if (!currentView.parentView) {\n    return undefined;\n  }\n  if (!currentView.__startsNewLexicalScope) {\n    return currentView.parentView;\n  }\n  if (currentView.parentView.__childDoesntStartNewLexicalScope) {\n    return currentView.parentView;\n  }\n\n  // in the case of {{> Template.contentBlock data}} the contentBlock loses the lexical scope of it's parent, wheras {{> Template.contentBlock}} it does not\n  // this is because a #with sits between the include InOuterTemplateScope\n  if (currentView.parentView.name === \"with\" && currentView.parentView.parentView && currentView.parentView.parentView.__childDoesntStartNewLexicalScope) {\n    return currentView.parentView;\n  }\n  return undefined;\n}\n\nfunction _lexicalBindingLookup(view, name) {\n  let currentView = view;\n\n  // walk up the views stopping at a Spacebars.include or Template view that\n  // doesn't have an InOuterTemplateScope view as a parent\n  do {\n    // skip block helpers views\n    // if we found the binding on the scope, return it\n    if (has(currentView._scopeBindings, name)) {\n      return currentView._scopeBindings[name];\n    }\n  } while (currentView = _lexicalKeepGoing(currentView));\n\n  return null;\n}\n\nBlaze._lexicalBindingLookup = function (view, name) {\n  const binding = _lexicalBindingLookup(view, name);\n  return binding && (() => binding.get()?.value);\n};\n\n// templateInstance argument is provided to be available for possible\n// alternative implementations of this function by 3rd party packages.\nBlaze._getTemplate = function (name, templateInstance) {\n  if ((name in Blaze.Template) && (Blaze.Template[name] instanceof Blaze.Template)) {\n    return Blaze.Template[name];\n  }\n  return null;\n};\n\nBlaze._getGlobalHelper = function (name, templateInstance) {\n  if (Blaze._globalHelpers[name] != null) {\n    const printName = `global helper ${name}`;\n    return wrapHelper(bindDataContext(Blaze._globalHelpers[name]), templateInstance, printName);\n  }\n  return null;\n};\n\n// Looks up a name, like \"foo\" or \"..\", as a helper of the\n// current template; the name of a template; a global helper;\n// or a property of the data context.  Called on the View of\n// a template (i.e. a View with a `.template` property,\n// where the helpers are).  Used for the first name in a\n// \"path\" in a template tag, like \"foo\" in `{{foo.bar}}` or\n// \"..\" in `{{frobulate ../blah}}`.\n//\n// Returns a function, a non-function value, or null.  If\n// a function is found, it is bound appropriately.\n//\n// NOTE: This function must not establish any reactive\n// dependencies itself.  If there is any reactivity in the\n// value, lookup should return a function.\nBlaze.View.prototype.lookup = function (name, _options) {\n  const template = this.template;\n  const lookupTemplate = _options && _options.template;\n  let helper;\n  let binding;\n  let boundTmplInstance;\n  let foundTemplate;\n\n  if (this.templateInstance) {\n    boundTmplInstance = Blaze._bind(this.templateInstance, this);\n  }\n\n  // 0. looking up the parent data context with the special \"../\" syntax\n  if (/^\\./.test(name)) {\n    // starts with a dot. must be a series of dots which maps to an\n    // ancestor of the appropriate height.\n    if (!/^(\\.)+$/.test(name))\n      throw new Error(\"id starting with dot must be a series of dots\");\n\n    return Blaze._parentData(name.length - 1, true /*_functionWrapped*/);\n\n  }\n\n  // 1. look up a helper on the current template\n  if (template && ((helper = Blaze._getTemplateHelper(template, name, boundTmplInstance)) != null)) {\n    return helper;\n  }\n\n  // 2. look up a binding by traversing the lexical view hierarchy inside the\n  // current template\n  if (template && (binding = Blaze._lexicalBindingLookup(Blaze.currentView, name)) != null) {\n    return binding;\n  }\n\n  // 3. look up a template by name\n  if (lookupTemplate && ((foundTemplate = Blaze._getTemplate(name, boundTmplInstance)) != null)) {\n    return foundTemplate;\n  }\n\n  // 4. look up a global helper\n  helper = Blaze._getGlobalHelper(name, boundTmplInstance);\n  if (helper != null) {\n    return helper;\n  }\n\n  // 5. look up in a data context\n  return function (...args) {\n    const isCalledAsFunction = (args.length > 0);\n    const data = Blaze.getData();\n    const x = data && data[name];\n    if (! x) {\n      if (lookupTemplate) {\n        throw new Error(\"No such template: \" + name);\n      } else if (isCalledAsFunction) {\n        throw new Error(\"No such function: \" + name);\n      } else if (name.charAt(0) === '@' && ((x === null) ||\n                                            (x === undefined))) {\n        // Throw an error if the user tries to use a `@directive`\n        // that doesn't exist.  We don't implement all directives\n        // from Handlebars, so there's a potential for confusion\n        // if we fail silently.  On the other hand, we want to\n        // throw late in case some app or package wants to provide\n        // a missing directive.\n        throw new Error(\"Unsupported directive: \" + name);\n      }\n    }\n    if (! data) {\n      return null;\n    }\n    if (typeof x !== 'function') {\n      if (isCalledAsFunction) {\n        throw new Error(\"Can't call non-function: \" + x);\n      }\n      return x;\n    }\n    return x.apply(data, args);\n  };\n};\n\n// Implement Spacebars' {{../..}}.\n// @param height {Number} The number of '..'s\nBlaze._parentData = function (height, _functionWrapped) {\n  // If height is null or undefined, we default to 1, the first parent.\n  if (height == null) {\n    height = 1;\n  }\n  let theWith = Blaze.getView('with');\n  for (let i = 0; (i < height) && theWith; i++) {\n    theWith = Blaze.getView(theWith, 'with');\n  }\n\n  if (! theWith)\n    return null;\n  if (_functionWrapped)\n    return function () { return theWith.dataVar.get()?.value; };\n  return theWith.dataVar.get()?.value;\n};\n\n\nBlaze.View.prototype.lookupTemplate = function (name) {\n  return this.lookup(name, {template:true});\n};\n","import isObject from 'lodash.isobject';\nimport isFunction from 'lodash.isfunction';\nimport has from 'lodash.has';\nimport isEmpty from 'lodash.isempty';\n\n// [new] Blaze.Template([viewName], renderFunction)\n//\n// `Blaze.Template` is the class of templates, like `Template.foo` in\n// Meteor, which is `instanceof Template`.\n//\n// `viewKind` is a string that looks like \"Template.foo\" for templates\n// defined by the compiler.\n\n/**\n * @class\n * @summary Constructor for a Template, which is used to construct Views with particular name and content.\n * @locus Client\n * @param {String} [viewName] Optional.  A name for Views constructed by this Template.  See [`view.name`](#view_name).\n * @param {Function} renderFunction A function that returns [*renderable content*](#Renderable-Content).  This function is used as the `renderFunction` for Views constructed by this Template.\n */\nBlaze.Template = function (viewName, renderFunction) {\n  if (! (this instanceof Blaze.Template))\n    // called without `new`\n    return new Blaze.Template(viewName, renderFunction);\n\n  if (typeof viewName === 'function') {\n    // omitted \"viewName\" argument\n    renderFunction = viewName;\n    viewName = '';\n  }\n  if (typeof viewName !== 'string')\n    throw new Error(\"viewName must be a String (or omitted)\");\n  if (typeof renderFunction !== 'function')\n    throw new Error(\"renderFunction must be a function\");\n\n  this.viewName = viewName;\n  this.renderFunction = renderFunction;\n\n  this.__helpers = new HelperMap;\n  this.__eventMaps = [];\n\n  this._callbacks = {\n    created: [],\n    rendered: [],\n    destroyed: []\n  };\n};\nconst Template = Blaze.Template;\n\nconst HelperMap = function () {};\nHelperMap.prototype.get = function (name) {\n  return this[' '+name];\n};\nHelperMap.prototype.set = function (name, helper) {\n  this[' '+name] = helper;\n};\nHelperMap.prototype.has = function (name) {\n  return (typeof this[' '+name] !== 'undefined');\n};\n\n/**\n * @summary Returns true if `value` is a template object like `Template.myTemplate`.\n * @locus Client\n * @param {Any} value The value to test.\n */\nBlaze.isTemplate = function (t) {\n  return (t instanceof Blaze.Template);\n};\n\n/**\n * @name  onCreated\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is created.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onCreated = function (cb) {\n  this._callbacks.created.push(cb);\n};\n\n/**\n * @name  onRendered\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is inserted into the DOM.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onRendered = function (cb) {\n  this._callbacks.rendered.push(cb);\n};\n\n/**\n * @name  onDestroyed\n * @instance\n * @memberOf Template\n * @summary Register a function to be called when an instance of this template is removed from the DOM and destroyed.\n * @param {Function} callback A function to be added as a callback.\n * @locus Client\n * @importFromPackage templating\n */\nTemplate.prototype.onDestroyed = function (cb) {\n  this._callbacks.destroyed.push(cb);\n};\n\nTemplate.prototype._getCallbacks = function (which) {\n  const self = this;\n  let callbacks = self[which] ? [self[which]] : [];\n  // Fire all callbacks added with the new API (Template.onRendered())\n  // as well as the old-style callback (e.g. Template.rendered) for\n  // backwards-compatibility.\n  callbacks = callbacks.concat(self._callbacks[which]);\n  return callbacks;\n};\n\nconst fireCallbacks = function (callbacks, template) {\n  Template._withTemplateInstanceFunc(\n    function () { return template; },\n    function () {\n      for (let i = 0, N = callbacks.length; i < N; i++) {\n        callbacks[i].call(template);\n      }\n    });\n};\n\nTemplate.prototype.constructView = function (contentFunc, elseFunc) {\n  const self = this;\n  const view = Blaze.View(self.viewName, self.renderFunction);\n  view.template = self;\n\n  view.templateContentBlock = (\n    contentFunc ? new Template('(contentBlock)', contentFunc) : null);\n  view.templateElseBlock = (\n    elseFunc ? new Template('(elseBlock)', elseFunc) : null);\n\n  if (self.__eventMaps || typeof self.events === 'object') {\n    view._onViewRendered(function () {\n      if (view.renderCount !== 1)\n        return;\n\n      if (! self.__eventMaps.length && typeof self.events === \"object\") {\n        // Provide limited back-compat support for `.events = {...}`\n        // syntax.  Pass `template.events` to the original `.events(...)`\n        // function.  This code must run only once per template, in\n        // order to not bind the handlers more than once, which is\n        // ensured by the fact that we only do this when `__eventMaps`\n        // is falsy, and we cause it to be set now.\n        Template.prototype.events.call(self, self.events);\n      }\n\n      self.__eventMaps.forEach(function (m) {\n        Blaze._addEventMap(view, m, view);\n      });\n    });\n  }\n\n  view._templateInstance = new Blaze.TemplateInstance(view);\n  view.templateInstance = function () {\n    // Update data, firstNode, and lastNode, and return the TemplateInstance\n    // object.\n    const inst = view._templateInstance;\n\n    /**\n     * @instance\n     * @memberOf Blaze.TemplateInstance\n     * @name  data\n     * @summary The data context of this instance's latest invocation.\n     * @locus Client\n     */\n    inst.data = Blaze.getData(view);\n\n    if (view._domrange && !view.isDestroyed) {\n      inst.firstNode = view._domrange.firstNode();\n      inst.lastNode = view._domrange.lastNode();\n    } else {\n      // on 'created' or 'destroyed' callbacks we don't have a DomRange\n      inst.firstNode = null;\n      inst.lastNode = null;\n    }\n\n    return inst;\n  };\n\n  /**\n   * @name  created\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is created.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  // To avoid situations when new callbacks are added in between view\n  // instantiation and event being fired, decide on all callbacks to fire\n  // immediately and then fire them on the event.\n  const createdCallbacks = self._getCallbacks('created');\n  view.onViewCreated(function () {\n    fireCallbacks(createdCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  rendered\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is rendered.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  const renderedCallbacks = self._getCallbacks('rendered');\n  view.onViewReady(function () {\n    fireCallbacks(renderedCallbacks, view.templateInstance());\n  });\n\n  /**\n   * @name  destroyed\n   * @instance\n   * @memberOf Template\n   * @summary Provide a callback when an instance of a template is destroyed.\n   * @locus Client\n   * @deprecated in 1.1\n   */\n  const destroyedCallbacks = self._getCallbacks('destroyed');\n  view.onViewDestroyed(function () {\n    fireCallbacks(destroyedCallbacks, view.templateInstance());\n  });\n\n  return view;\n};\n\n/**\n * @class\n * @summary The class for template instances\n * @param {Blaze.View} view\n * @instanceName template\n */\nBlaze.TemplateInstance = function (view) {\n  if (! (this instanceof Blaze.TemplateInstance))\n    // called without `new`\n    return new Blaze.TemplateInstance(view);\n\n  if (! (view instanceof Blaze.View))\n    throw new Error(\"View required\");\n\n  view._templateInstance = this;\n\n  /**\n   * @name view\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The [View](../api/blaze.html#Blaze-View) object for this invocation of the template.\n   * @locus Client\n   * @type {Blaze.View}\n   */\n  this.view = view;\n  this.data = null;\n\n  /**\n   * @name firstNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The first top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.firstNode = null;\n\n  /**\n   * @name lastNode\n   * @memberOf Blaze.TemplateInstance\n   * @instance\n   * @summary The last top-level DOM node in this template instance.\n   * @locus Client\n   * @type {DOMNode}\n   */\n  this.lastNode = null;\n\n  // This dependency is used to identify state transitions in\n  // _subscriptionHandles which could cause the result of\n  // TemplateInstance#subscriptionsReady to change. Basically this is triggered\n  // whenever a new subscription handle is added or when a subscription handle\n  // is removed and they are not ready.\n  this._allSubsReadyDep = new Tracker.Dependency();\n  this._allSubsReady = false;\n\n  this._subscriptionHandles = {};\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance, and return them as a JQuery object.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMNode[]}\n */\nBlaze.TemplateInstance.prototype.$ = function (selector) {\n  const view = this.view;\n  if (! view._domrange)\n    throw new Error(\"Can't use $ on template instance with no DOM\");\n  return view._domrange.$(selector);\n};\n\n/**\n * @summary Find all elements matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement[]}\n */\nBlaze.TemplateInstance.prototype.findAll = function (selector) {\n  return Array.prototype.slice.call(this.$(selector));\n};\n\n/**\n * @summary Find one element matching `selector` in this template instance.\n * @locus Client\n * @param {String} selector The CSS selector to match, scoped to the template contents.\n * @returns {DOMElement}\n */\nBlaze.TemplateInstance.prototype.find = function (selector) {\n  const result = this.$(selector);\n  return result[0] || null;\n};\n\n/**\n * @summary A version of [Tracker.autorun](https://docs.meteor.com/api/tracker.html#Tracker-autorun) that is stopped when the template is destroyed.\n * @locus Client\n * @param {Function} runFunc The function to run. It receives one argument: a Tracker.Computation object.\n */\nBlaze.TemplateInstance.prototype.autorun = function (f) {\n  return this.view.autorun(f);\n};\n\n/**\n * @summary A version of [Meteor.subscribe](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe) that is stopped\n * when the template is destroyed.\n * @return {SubscriptionHandle} The subscription handle to the newly made\n * subscription. Call `handle.stop()` to manually stop the subscription, or\n * `handle.ready()` to find out if this particular subscription has loaded all\n * of its inital data.\n * @locus Client\n * @param {String} name Name of the subscription.  Matches the name of the\n * server's `publish()` call.\n * @param {Any} [arg1,arg2...] Optional arguments passed to publisher function\n * on server.\n * @param {Function|Object} [options] If a function is passed instead of an\n * object, it is interpreted as an `onReady` callback.\n * @param {Function} [options.onReady] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {Function} [options.onStop] Passed to [`Meteor.subscribe`](https://docs.meteor.com/api/pubsub.html#Meteor-subscribe).\n * @param {DDP.Connection} [options.connection] The connection on which to make the\n * subscription.\n */\nBlaze.TemplateInstance.prototype.subscribe = function (...args) {\n  const self = this;\n\n  const subHandles = self._subscriptionHandles;\n\n  // Duplicate logic from Meteor.subscribe\n  let options = {};\n  if (args.length) {\n    const lastParam = args[args.length - 1];\n\n    // Match pattern to check if the last arg is an options argument\n    const lastParamOptionsPattern = {\n      onReady: Match.Optional(Function),\n      // XXX COMPAT WITH 1.0.3.1 onError used to exist, but now we use\n      // onStop with an error callback instead.\n      onError: Match.Optional(Function),\n      onStop: Match.Optional(Function),\n      connection: Match.Optional(Match.Any)\n    };\n\n    if (isFunction(lastParam)) {\n      options.onReady = args.pop();\n    } else if (lastParam && ! isEmpty(lastParam) && Match.test(lastParam, lastParamOptionsPattern)) {\n      options = args.pop();\n    }\n  }\n\n  let subHandle;\n  const oldStopped = options.onStop;\n  options.onStop = function (error) {\n    // When the subscription is stopped, remove it from the set of tracked\n    // subscriptions to avoid this list growing without bound\n    delete subHandles[subHandle.subscriptionId];\n\n    // Removing a subscription can only change the result of subscriptionsReady\n    // if we are not ready (that subscription could be the one blocking us being\n    // ready).\n    if (! self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n\n    if (oldStopped) {\n      oldStopped(error);\n    }\n  };\n\n  const { onReady, onError, onStop, connection } = options;\n  const callbacks = { onReady, onError, onStop };\n\n  // The callbacks are passed as the last item in the arguments array passed to\n  // View#subscribe\n  args.push(callbacks);\n\n  // View#subscribe takes the connection as one of the options in the last\n  // argument\n  subHandle = self.view.subscribe.call(self.view, args, {\n    connection: connection\n  });\n\n  if (!has(subHandles, subHandle.subscriptionId)) {\n    subHandles[subHandle.subscriptionId] = subHandle;\n\n    // Adding a new subscription will always cause us to transition from ready\n    // to not ready, but if we are already not ready then this can't make us\n    // ready.\n    if (self._allSubsReady) {\n      self._allSubsReadyDep.changed();\n    }\n  }\n\n  return subHandle;\n};\n\n/**\n * @summary A reactive function that returns true when all of the subscriptions\n * called with [this.subscribe](#TemplateInstance-subscribe) are ready.\n * @return {Boolean} True if all subscriptions on this template instance are\n * ready.\n */\nBlaze.TemplateInstance.prototype.subscriptionsReady = function () {\n  this._allSubsReadyDep.depend();\n  this._allSubsReady = Object.values(this._subscriptionHandles).every((handle) => {\n    return handle.ready();\n  });\n\n  return this._allSubsReady;\n};\n\n/**\n * @summary Specify template helpers available to this template.\n * @locus Client\n * @param {Object} helpers Dictionary of helper functions by name.\n * @importFromPackage templating\n */\nTemplate.prototype.helpers = function (dict) {\n  if (!isObject(dict)) {\n    throw new Error(\"Helpers dictionary has to be an object\");\n  }\n\n  for (let k in dict) this.__helpers.set(k, dict[k]);\n};\n\nconst canUseGetters = (function () {\n  if (Object.defineProperty) {\n    let obj = {};\n    try {\n      Object.defineProperty(obj, \"self\", {\n        get: function () { return obj; }\n      });\n    } catch (e) {\n      return false;\n    }\n    return obj.self === obj;\n  }\n  return false;\n})();\n\nif (canUseGetters) {\n  // Like Blaze.currentView but for the template instance. A function\n  // rather than a value so that not all helpers are implicitly dependent\n  // on the current template instance's `data` property, which would make\n  // them dependent on the data context of the template inclusion.\n  let currentTemplateInstanceFunc = null;\n\n  // If getters are supported, define this property with a getter function\n  // to make it effectively read-only, and to work around this bizarre JSC\n  // bug: https://github.com/meteor/meteor/issues/9926\n  Object.defineProperty(Template, \"_currentTemplateInstanceFunc\", {\n    get: function () {\n      return currentTemplateInstanceFunc;\n    }\n  });\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    const oldTmplInstanceFunc = currentTemplateInstanceFunc;\n    try {\n      currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n} else {\n  // If getters are not supported, just use a normal property.\n  Template._currentTemplateInstanceFunc = null;\n\n  Template._withTemplateInstanceFunc = function (templateInstanceFunc, func) {\n    if (typeof func !== 'function') {\n      throw new Error(\"Expected function, got: \" + func);\n    }\n    const oldTmplInstanceFunc = Template._currentTemplateInstanceFunc;\n    try {\n      Template._currentTemplateInstanceFunc = templateInstanceFunc;\n      return func();\n    } finally {\n      Template._currentTemplateInstanceFunc = oldTmplInstanceFunc;\n    }\n  };\n}\n\n/**\n * @summary Specify event handlers for this template.\n * @locus Client\n * @param {EventMap} eventMap Event handlers to associate with this template.\n * @importFromPackage templating\n */\nTemplate.prototype.events = function (eventMap) {\n  if (!isObject(eventMap)) {\n    throw new Error(\"Event map has to be an object\");\n  }\n\n  const template = this;\n  let eventMap2 = {};\n  for (let k in eventMap) {\n    eventMap2[k] = (function (k, v) {\n      return function (event /*, ...*/) {\n        const view = this; // passed by EventAugmenter\n        const args = Array.prototype.slice.call(arguments);\n        // Exiting the current computation to avoid creating unnecessary\n        // and unexpected reactive dependencies with Templates data\n        // or any other reactive dependencies defined in event handlers\n        return Tracker.nonreactive(function () {\n          let data = Blaze.getData(event.currentTarget);\n          if (data == null) data = {};\n          const tmplInstanceFunc = Blaze._bind(view.templateInstance, view);\n          args.splice(1, 0, tmplInstanceFunc());\n          return Template._withTemplateInstanceFunc(tmplInstanceFunc, function () {\n            return v.apply(data, args);\n          });\n        });\n      };\n    })(k, eventMap[k]);\n  }\n\n  template.__eventMaps.push(eventMap2);\n};\n\n/**\n * @function\n * @name instance\n * @memberOf Template\n * @summary The [template instance](#Template-instances) corresponding to the current template helper, event handler, callback, or autorun.  If there isn't one, `null`.\n * @locus Client\n * @returns {Blaze.TemplateInstance}\n * @importFromPackage templating\n */\nTemplate.instance = function () {\n  return Template._currentTemplateInstanceFunc\n    && Template._currentTemplateInstanceFunc();\n};\n\n// Note: Template.currentData() is documented to take zero arguments,\n// while Blaze.getData takes up to one.\n\n/**\n * @summary\n *\n * - Inside an `onCreated`, `onRendered`, or `onDestroyed` callback, returns\n * the data context of the template.\n * - Inside an event handler, returns the data context of the template on which\n * this event handler was defined.\n * - Inside a helper, returns the data context of the DOM node where the helper\n * was used.\n *\n * Establishes a reactive dependency on the result.\n * @locus Client\n * @function\n * @importFromPackage templating\n */\nTemplate.currentData = Blaze.getData;\n\n/**\n * @summary Accesses other data contexts that enclose the current data context.\n * @locus Client\n * @function\n * @param {Integer} [numLevels] The number of levels beyond the current data context to look. Defaults to 1.\n * @importFromPackage templating\n */\nTemplate.parentData = Blaze._parentData;\n\n/**\n * @summary Defines a [helper function](#Template-helpers) which can be used from all templates.\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @param {Function} function The helper function itself.\n * @importFromPackage templating\n */\nTemplate.registerHelper = Blaze.registerHelper;\n\n/**\n * @summary Removes a global [helper function](#Template-helpers).\n * @locus Client\n * @function\n * @param {String} name The name of the helper function you are defining.\n * @importFromPackage templating\n */\nTemplate.deregisterHelper = Blaze.deregisterHelper;\n","UI = Blaze;\n\nBlaze.ReactiveVar = ReactiveVar;\nUI._templateInstance = Blaze.Template.instance;\n\nHandlebars = {};\nHandlebars.registerHelper = Blaze.registerHelper;\n\nHandlebars._escape = Blaze._escape;\n\n// Return these from {{...}} helpers to achieve the same as returning\n// strings from {{{...}}} helpers\nHandlebars.SafeString = function(string) {\n  this.string = string;\n};\nHandlebars.SafeString.prototype.toString = function() {\n  return this.string.toString();\n};\n"]}}]